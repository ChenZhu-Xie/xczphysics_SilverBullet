{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"sum",
				"\\sum_{min}^{max}"
			],
			[
				"highl",
				"highlight"
			]
		]
	},
	"buffers":
	[
		{
			"file": "Library/Git.md",
			"settings":
			{
				"buffer_size": 29769,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					54,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAQXcAAAAAAAAAAAAAQXcAAAAAAABBdwAAAAAAAKt8AAAtLS0KZ2l0aHViVXJsOiAiaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQ2hlblpodS1YaWUvMWViNGI3NjQ0NzRhMmIwY2Q5NGEzNTE5NjlkMmU1YmIiCi0tLQojbWV0YQoKVGhpcyBsaWJyYXJ5IGFkZHMgYSBiYXNpYyBnaXQgc3luY2hyb25pemF0aW9uIGZ1bmN0aW9uYWxpdHkgdG8gU2lsdmVyQnVsbGV0LiBJdCBzaG91bGQgYmUgY29uc2lkZXJlZCBhIHN1Y2Nlc3NvciB0byBbc2lsdmVyYnVsbGV0LWdpdF0oaHR0cHM6Ly9naXRodWIuY29tL3NpbHZlcmJ1bGxldG1kL3NpbHZlcmJ1bGxldC1naXQpIGltcGxlbWVudGVkIGluIFNwYWNlIEx1YS4KClRoZSBmb2xsb3dpbmcgY29tbWFuZHMgYXJlIGltcGxlbWVudGVkOgoKJHt3aWRnZXRzLmNvbW1hbmRCdXR0b24oIkdpdDogU3luYyIpfQoKKiBBZGRzIGFsbCBmaWxlcyBpbiB5b3VyIGZvbGRlciB0byBnaXQKKiBDb21taXRzIHRoZW0gd2l0aCB0aGUgZGVmYXVsdCAiU25hcHNob3QiIGNvbW1pdCBtZXNzYWdlCiogYGdpdCBwdWxsYHMgY2hhbmdlcyBmcm9tIHRoZSByZW1vdGUgc2VydmVyCiogYGdpdCBwdXNoYGVzIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBzZXJ2ZXIKCiR7d2lkZ2V0cy5jb21tYW5kQnV0dG9uKCJHaXQ6IENvbW1pdCIpfQoKKiBBc2tzIHlvdSBmb3IgYSBjb21taXQgbWVzc2FnZQoqIENvbW1pdHMKCiMgQ29uZmlndXJhdGlvbgpUaGVyZSBpcyBjdXJyZW50bHkgb25seSBhIHNpbmdsZSBjb25maWd1cmF0aW9uIG9wdGlvbjogYGdpdC5hdXRvU3luY2AuIFdoZW4gc2V0LCB0aGUgYEdpdDogU3luY2AgY29tbWFuZCB3aWxsIGJlIHJ1biBldmVyeSBfeF8gbWludXRlcy4KCkV4YW1wbGUgY29uZmlndXJhdGlvbjoKYGBgbHVhCmNvbmZpZy5zZXQoImdpdC5hdXRvU3luYyIsIDUpCmBgYAoKIyBJbXBsZW1lbnRhdGlvbgpUaGUgZnVsbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGludGVncmF0aW9uIGZvbGxvd3MuCgojIyBDb25maWd1cmF0aW9uCmBgYHNwYWNlLWx1YQotLSBwcmlvcml0eTogMTAwCmNvbmZpZy5kZWZpbmUoImdpdCIsIHsKICB0eXBlID0gIm9iamVjdCIsCiAgcHJvcGVydGllcyA9IHsKICAgIGF1dG9TeW5jID0gc2NoZW1hLm51bWJlcigpCiAgfQp9KQpgYGAKCiMjIFV0aWxpdHkgRnVuY3Rpb25zCgojIyMgR2l0IENvbW1hbmQgRXhlY3V0b3IKCmBgYHNwYWNlLWx1YQotLSBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgY29uc2lzdGVudCBlcnJvciBoYW5kbGluZwpsb2NhbCBmdW5jdGlvbiBleGVjdXRlR2l0Q29tbWFuZChjb21tYW5kLCBhcmdzLCBvcGVyYXRpb24pCiAgcHJpbnQoIj09PSBleGVjdXRlR2l0Q29tbWFuZCBERUJVRyBTVEFSVCA9PT0iKQogIHByaW50KCJjb21tYW5kOiIsIGNvbW1hbmQpCiAgcHJpbnQoImFyZ3M6IiwgdGFibGUuY29uY2F0KGFyZ3Mgb3Ige30sICIgIikpCiAgcHJpbnQoIm9wZXJhdGlvbjoiLCBvcGVyYXRpb24pCgogIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgIHJldHVybiBzaGVsbC5ydW4oY29tbWFuZCwgYXJncykKICBlbmQpCgogIHByaW50KCJwY2FsbCBzdWNjZXNzOiIsIHN1Y2Nlc3MpCiAgcHJpbnQoInJlc3VsdCB0eXBlOiIsIHR5cGUocmVzdWx0KSkKCiAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgcHJpbnQoIj09PSBUYWJsZSBjb250ZW50cyA9PT0iKQogICAgZm9yIGssIHYgaW4gcGFpcnMocmVzdWx0KSBkbwogICAgICBwcmludCgiICAiIC4uIHRvc3RyaW5nKGspIC4uICI6IiwgdG9zdHJpbmcodikpCiAgICBlbmQKICAgIHByaW50KCI9PT0gRW5kIHRhYmxlID09PSIpCiAgZWxzZQogICAgcHJpbnQoInJlc3VsdCB2YWx1ZToiLCB0b3N0cmluZyhyZXN1bHQpKQogIGVuZAoKICBpZiBub3Qgc3VjY2VzcyB0aGVuCiAgICBsb2NhbCBlcnJvck1zZyA9IHRvc3RyaW5nKHJlc3VsdCBvciAiVW5rbm93biBlcnJvciIpCiAgICBwcmludCgicGNhbGwgZmFpbGVkLCByZXR1cm5pbmc6Iiwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiAiIC4uIGVycm9yTXNnKQogICAgcmV0dXJuIGZhbHNlLCBvcGVyYXRpb24gLi4gIiBmYWlsZWQ6ICIgLi4gZXJyb3JNc2cKICBlbmQKCiAgaWYgcmVzdWx0ID09IG5pbCB0aGVuCiAgICBwcmludCgicmVzdWx0IGlzIG5pbCwgcmV0dXJuaW5nIGVycm9yIikKICAgIHJldHVybiBmYWxzZSwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiBObyByZXN1bHQgcmV0dXJuZWQgZnJvbSBnaXQgY29tbWFuZCIKICBlbmQKCiAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgbG9jYWwgb3V0ID0gIiIKICAgIGxvY2FsIGV4aXRDb2RlID0gcmVzdWx0LmNvZGUgb3IgMAoKICAgIHByaW50KCJleGl0Q29kZToiLCBleGl0Q29kZSkKICAgIHByaW50KCJyZXN1bHQuc3Rkb3V0OiIsIHRvc3RyaW5nKHJlc3VsdC5zdGRvdXQpKQogICAgcHJpbnQoInJlc3VsdC5zdGRlcnI6IiwgdG9zdHJpbmcocmVzdWx0LnN0ZGVycikpCgogICAgaWYgcmVzdWx0LnN0ZGVyciBhbmQgcmVzdWx0LnN0ZGVyciB+PSAiIiB0aGVuCiAgICAgIG91dCA9IHJlc3VsdC5zdGRlcnIKICAgIGVsc2VpZiByZXN1bHQuc3Rkb3V0IGFuZCByZXN1bHQuc3Rkb3V0IH49ICIiIHRoZW4KICAgICAgb3V0ID0gcmVzdWx0LnN0ZG91dAogICAgZWxzZQogICAgICBvdXQgPSAiR2l0IGNvbW1hbmQgY29tcGxldGVkIHdpdGggbm8gb3V0cHV0IgogICAgZW5kCgogICAgcHJpbnQoImZpbmFsIG91dDoiLCBvdXQpCgogICAgaWYgZXhpdENvZGUgfj0gMCB0aGVuCiAgICAgIHByaW50KCJyZXR1cm5pbmcgZmFsc2UgZHVlIHRvIG5vbi16ZXJvIGV4aXQgY29kZSIpCiAgICAgIHJldHVybiBmYWxzZSwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiAiIC4uIG91dAogICAgZWxzZQogICAgICBwcmludCgicmV0dXJuaW5nIHRydWUgd2l0aCBvdXRwdXQ6Iiwgb3V0KQogICAgICByZXR1cm4gdHJ1ZSwgb3V0CiAgICBlbmQKICBlbHNlaWYgdHlwZShyZXN1bHQpID09ICJzdHJpbmciIHRoZW4KICAgIHByaW50KCJyZXN1bHQgaXMgc3RyaW5nLCByZXR1cm5pbmc6IiwgcmVzdWx0KQogICAgcmV0dXJuIHRydWUsIHJlc3VsdAogIGVsc2VpZiB0eXBlKHJlc3VsdCkgPT0gIm51bWJlciIgdGhlbgogICAgcHJpbnQoInJlc3VsdCBpcyBudW1iZXI6IiwgcmVzdWx0KQogICAgaWYgcmVzdWx0IH49IDAgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIG9wZXJhdGlvbiAuLiAiIGZhaWxlZCB3aXRoIGV4aXQgY29kZTogIiAuLiB0b3N0cmluZyhyZXN1bHQpCiAgICBlbHNlCiAgICAgIHJldHVybiB0cnVlLCBvcGVyYXRpb24gLi4gIiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IgogICAgZW5kCiAgZWxzZQogICAgcHJpbnQoInJlc3VsdCBpcyBvdGhlciB0eXBlLCByZXR1cm5pbmc6IiwgdG9zdHJpbmcocmVzdWx0KSkKICAgIHJldHVybiB0cnVlLCBvcGVyYXRpb24gLi4gIiBjb21wbGV0ZWQ6ICIgLi4gdG9zdHJpbmcocmVzdWx0KQogIGVuZAoKICBwcmludCgiPT09IGV4ZWN1dGVHaXRDb21tYW5kIERFQlVHIEVORCA9PT0iKQplbmQKYGBgCgojIyMgTm90aWZpY2F0aW9uIE1hbmFnZXIKCmBgYHNwYWNlLWx1YQotLSBOb3RpZmljYXRpb24gbWFuYWdlciBmb3IgY29uc2lzdGVudCBtZXNzYWdpbmcKbG9jYWwgTm90aWZpY2F0aW9uTWFuYWdlciA9IHsKICBtZXNzYWdlcyA9IHsKICAgIEdJVF9MT0NLX1dBUk5JTkcgPSAiR2l0IG9wZXJhdGlvbiAnJXMnIGlzIGFscmVhZHkgcnVubmluZy4gUGxlYXNlIHdhaXQuIiwKICAgIENPTU1JVF9TVEFSVCA9ICJDb21taXR0aW5nIGxvY2FsIGNoYW5nZXMuLi4iLAogICAgQ09NTUlUX1NURVAgPSAiU3RlcCAxLzM6IENvbW1pdHRpbmcgbG9jYWwgY2hhbmdlcy4uLiIsCiAgICBQVUxMX1NURVAgPSAiU3RlcCAyLzM6IFB1bGxpbmcgZnJvbSByZW1vdGUuLi4iLAogICAgUFVTSF9TVEVQID0gIlN0ZXAgMy8zOiBQdXNoaW5nIHRvIHJlbW90ZS4uLiIsCiAgICBTWU5DX1NVQ0NFU1MgPSAiR2l0IHN5bmMgc3VjY2Vzc2Z1bC4iLAogICAgU1lOQ19NQU5VQUxfU1RBUlQgPSAiU3RhcnRpbmcgbWFudWFsIEdpdCBzeW5jLi4uIiwKICAgIFNZTkNfTUFOVUFMX0NPTVBMRVRFID0gIk1hbnVhbCBHaXQgc3luYyBjb21wbGV0ZSEiLAogICAgTk9USElOR19UT19DT01NSVQgPSAiTm8gY2hhbmdlcyB0byBjb21taXQiLAogICAgRk9SQ0VfUFVTSF9TVEFSVCA9ICJTdGFydGluZyBmb3JjZSBwdXNoIHByb2Nlc3MuLi4iLAogICAgRk9SQ0VfUFVMTF9TVEFSVCA9ICJTdGFydGluZyBmb3JjZSBwdWxsIHByb2Nlc3MuLi4iLAogICAgQVVUT19TWU5DX1RSSUdHRVIgPSAiVHJpZ2dlcmluZyAlcyBHaXQgc3luYy4uLiIsCiAgICBBVVRPX1NZTkNfQ09NUExFVEUgPSAiJXM6IEdpdCBzeW5jIGNvbXBsZXRlLiIsCiAgICBBVVRPX1NZTkNfUFVMTF9PTkxZID0gIiVzOiBHaXQgcHVsbCBjb21wbGV0ZS4iLAogICAgQ09NTUlUX1NVQ0NFU1MgPSAiQ29tbWl0IHN1Y2Nlc3NmdWwhIiwKICAgIE5PVEhJTkdfVE9fQ09NTUlUX0NMRUFOID0gIk5vdGhpbmcgdG8gY29tbWl0OiB3b3JraW5nIHRyZWUgaXMgY2xlYW4uIiwKICAgIEdJVF9PUEVSQVRJT05fSU5fUFJPR1JFU1MgPSAiQW5vdGhlciBnaXQgb3BlcmF0aW9uIGlzIGluIHByb2dyZXNzIgogIH0KfQoKZnVuY3Rpb24gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93KG1lc3NhZ2VLZXksIGxldmVsLCAuLi4pCiAgbG9jYWwgdGVtcGxhdGUgPSBzZWxmLm1lc3NhZ2VzW21lc3NhZ2VLZXldIG9yIG1lc3NhZ2VLZXkKICBsb2NhbCBtZXNzYWdlID0gc3RyaW5nLmZvcm1hdCh0ZW1wbGF0ZSwgLi4uKQogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihtZXNzYWdlLCBsZXZlbCBvciAiaW5mbyIpCmVuZAoKZnVuY3Rpb24gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93RXJyb3IobWVzc2FnZUtleSwgLi4uKQogIHNlbGY6c2hvdyhtZXNzYWdlS2V5LCAiZXJyb3IiLCAuLi4pCmVuZAoKZnVuY3Rpb24gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93SW5mbyhtZXNzYWdlS2V5LCAuLi4pCiAgc2VsZjpzaG93KG1lc3NhZ2VLZXksICJpbmZvIiwgLi4uKQplbmQKCmZ1bmN0aW9uIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd1dhcm5pbmcobWVzc2FnZUtleSwgLi4uKQogIHNlbGY6c2hvdyhtZXNzYWdlS2V5LCAid2FybmluZyIsIC4uLikKZW5kCmBgYAoKIyMjIEdpdCBMb2NrIFN5c3RlbQoKYGBgc3BhY2UtbHVhCi0tIFNpbXBsZSBtZW1vcnkgbG9jayBtZWNoYW5pc20gZm9yIFNCIGludGVybmFsIGdpdCBvcGVyYXRpb25zCmlmIG5vdCBfRyB0aGVuCiAgZ2l0TG9jayA9IHsKICAgIGlzTG9ja2VkID0gZmFsc2UsCiAgICBjdXJyZW50T3BlcmF0aW9uID0gIiIKICB9CgogIGFjcXVpcmVHaXRMb2NrID0gZnVuY3Rpb24ob3BlcmF0aW9uTmFtZSkKICAgIGlmIGdpdExvY2suaXNMb2NrZWQgdGhlbgogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dXYXJuaW5nKCJHSVRfTE9DS19XQVJOSU5HIiwgZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uKQogICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAoKICAgIGdpdExvY2suaXNMb2NrZWQgPSB0cnVlCiAgICBnaXRMb2NrLmN1cnJlbnRPcGVyYXRpb24gPSBvcGVyYXRpb25OYW1lCiAgICByZXR1cm4gdHJ1ZQogIGVuZAoKICByZWxlYXNlR2l0TG9jayA9IGZ1bmN0aW9uKCkKICAgIGdpdExvY2suaXNMb2NrZWQgPSBmYWxzZQogICAgZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uID0gIiIKICBlbmQKZWxzZQogIF9HLmdpdExvY2sgPSB7CiAgICBpc0xvY2tlZCA9IGZhbHNlLAogICAgY3VycmVudE9wZXJhdGlvbiA9ICIiCiAgfQoKICBfRy5hY3F1aXJlR2l0TG9jayA9IGZ1bmN0aW9uKG9wZXJhdGlvbk5hbWUpCiAgICBpZiBfRy5naXRMb2NrLmlzTG9ja2VkIHRoZW4KICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZygiR0lUX0xPQ0tfV0FSTklORyIsIF9HLmdpdExvY2suY3VycmVudE9wZXJhdGlvbikKICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBfRy5naXRMb2NrLmlzTG9ja2VkID0gdHJ1ZQogICAgX0cuZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uID0gb3BlcmF0aW9uTmFtZQogICAgcmV0dXJuIHRydWUKICBlbmQKCiAgX0cucmVsZWFzZUdpdExvY2sgPSBmdW5jdGlvbigpCiAgICBfRy5naXRMb2NrLmlzTG9ja2VkID0gZmFsc2UKICAgIF9HLmdpdExvY2suY3VycmVudE9wZXJhdGlvbiA9ICIiCiAgZW5kCgogIC0tIEFsc28gY3JlYXRlIGxvY2FsIHJlZmVyZW5jZXMgZm9yIGNvbnNpc3RlbmN5CiAgZ2l0TG9jayA9IF9HLmdpdExvY2sKICBhY3F1aXJlR2l0TG9jayA9IF9HLmFjcXVpcmVHaXRMb2NrCiAgcmVsZWFzZUdpdExvY2sgPSBfRy5yZWxlYXNlR2l0TG9jawplbmQKYGBgCgojIyBHaXQgT3BlcmF0aW9ucwoKIyMjIEJhc2ljIEdpdCBPcGVyYXRpb25zCgpgYGBzcGFjZS1sdWEKLS0gR2l0IG9wZXJhdGlvbiBoYW5kbGVycyAobG93LWxldmVsIG9wZXJhdGlvbnMsIG5vIGxvY2tzKQpsb2NhbCBHaXRPcGVyYXRpb25zID0ge30KCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuYWRkRmlsZXMoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJhZGQiLCAiLi8qIn0sICJHaXQgYWRkIikKZW5kCgpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLmNvbW1pdENoYW5nZXMobWVzc2FnZSkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsiY29tbWl0IiwgIi1hIiwgIi1tIiwgbWVzc2FnZX0sICJHaXQgY29tbWl0IikKZW5kCgpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLnB1bGxDaGFuZ2VzKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicHVsbCIsICJvcmlnaW4iLCAibWFpbiJ9LCAiR2l0IHB1bGwiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucHVzaENoYW5nZXMoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJwdXNoIiwgIm9yaWdpbiIsICJtYWluIn0sICJHaXQgcHVzaCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5mZXRjaEZyb21SZW1vdGUoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJmZXRjaCIsICJvcmlnaW4ifSwgIkdpdCBmZXRjaCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5yZXNldEhhcmQoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJyZXNldCIsICItLWhhcmQiLCAib3JpZ2luL21haW4ifSwgIkdpdCByZXNldCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5jbGVhblVudHJhY2tlZCgpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7ImNsZWFuIiwgIi1mZCJ9LCAiR2l0IGNsZWFuIikKZW5kCgpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLmdldFJlbW90ZVVybCgpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7InJlbW90ZSIsICJnZXQtdXJsIiwgIm9yaWdpbiJ9LCAiR2l0IGdldCByZW1vdGUgVVJMIikKZW5kCmBgYAoKIyMjIFJlcG9zaXRvcnkgTWFuYWdlbWVudCBPcGVyYXRpb25zCgpgYGBzcGFjZS1sdWEKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5yZW1vdmVHaXREaXJlY3RvcnkoKQogIC0tIFRyeSBXaW5kb3dzIGZpcnN0CiAgbG9jYWwgd2luU3VjY2Vzcywgd2luUmVzdWx0ID0gZXhlY3V0ZUdpdENvbW1hbmQoImNtZCIsIHsiL2MiLCAicmQiLCAiL3MiLCAiL3EiLCAiLmdpdCJ9LCAiUmVtb3ZlIC5naXQgZGlyZWN0b3J5IChXaW5kb3dzKSIpCiAgaWYgd2luU3VjY2VzcyB0aGVuCiAgICByZXR1cm4gdHJ1ZSwgIldpbmRvd3MiCiAgZW5kCgogIC0tIFRyeSBVbml4L0xpbnV4CiAgbG9jYWwgbGludXhTdWNjZXNzLCBsaW51eFJlc3VsdCA9IGV4ZWN1dGVHaXRDb21tYW5kKCJybSIsIHsiLXJmIiwgIi5naXQifSwgIlJlbW92ZSAuZ2l0IGRpcmVjdG9yeSAoVW5peC9MaW51eCkiKQogIGlmIGxpbnV4U3VjY2VzcyB0aGVuCiAgICByZXR1cm4gdHJ1ZSwgIlVuaXgvTGludXgiCiAgZW5kCgogIHJldHVybiBmYWxzZSwgIkZhaWxlZCB0byBkZWxldGUgLmdpdCBkaXJlY3Rvcnkgb24gYm90aCBXaW5kb3dzIGFuZCBVbml4L0xpbnV4IHN5c3RlbXMiCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5pbml0UmVwb3NpdG9yeSgpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7ImluaXQiLCAiLWIiLCAibWFpbiJ9LCAiR2l0IGluaXQiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuYWRkUmVtb3RlT3JpZ2luKHJlbW90ZVVybCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicmVtb3RlIiwgImFkZCIsICJvcmlnaW4iLCByZW1vdGVVcmx9LCAiR2l0IGFkZCByZW1vdGUiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuZm9yY2VQdXNoKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicHVzaCIsICItLWZvcmNlIiwgIm9yaWdpbiIsICJtYWluIn0sICJHaXQgZm9yY2UgcHVzaCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5oYW5kbGVQdXNoRXJyb3IoZXJyb3JNZXNzYWdlLCBpc0NvbGRTdGFydCkKICBsb2NhbCBmb3JtYXR0ZWRFcnJvciA9IGVycm9yTWVzc2FnZTpnc3ViKCJeR2l0IHB1c2ggZmFpbGVkOiIsICJPbmx5IHB1c2ggZmFpbGVkOiIpCgogIGxvY2FsIHN5bmNSZXN1bHRNZXNzYWdlID0gIk9ubHkgcHVzaCBmYWlsZWQiCiAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZyhzeW5jUmVzdWx0TWVzc2FnZSAuLiAiOiAiIC4uIGZvcm1hdHRlZEVycm9yKQogIHJldHVybiB0cnVlLCBzeW5jUmVzdWx0TWVzc2FnZQplbmQKYGBgCgojIyMgQ29yZSBDb21taXQgT3BlcmF0aW9ucwoKYGBgc3BhY2UtbHVhCi0tIEludGVybmFsIGNvbW1pdCBmdW5jdGlvbiAobm8gbG9jaywgdXNlZCB3aGVuIGxvY2sgaXMgYWxyZWFkeSBhY3F1aXJlZCkKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5wZXJmb3JtQ29tbWl0SW50ZXJuYWwobWVzc2FnZSwgc2hvd1N0ZXBzLCBpc0NvbGRTdGFydCkKICBtZXNzYWdlID0gbWVzc2FnZSBvciAiU25hcHNob3QiCiAgc2hvd1N0ZXBzID0gc2hvd1N0ZXBzID09IG5pbCBhbmQgdHJ1ZSBvciBzaG93U3RlcHMKCiAgaWYgc2hvd1N0ZXBzIHRoZW4KICAgIGlmIGlzQ29sZFN0YXJ0IHRoZW4KICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93SW5mbygiQ09NTUlUX1NURVAiKQogICAgZWxzZQogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dJbmZvKCJDT01NSVRfU1RBUlQiKQogICAgZW5kCiAgZW5kCgogIC0tIFN0ZXAgMTogYWRkIGZpbGVzCiAgbG9jYWwgYWRkU3VjY2VzcywgYWRkUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5hZGRGaWxlcygpCiAgaWYgbm90IGFkZFN1Y2Nlc3MgdGhlbgogICAgcmV0dXJuIGZhbHNlLCBhZGRSZXN1bHQgIC0tIGFkZFJlc3VsdCDlt7Lnu4/mmK/lrozmlbTlrZfnrKbkuLIKICBlbmQKCiAgLS0gU3RlcCAyOiBjb21taXQgY2hhbmdlcwogIGxvY2FsIGNvbW1pdFN1Y2Nlc3MsIGNvbW1pdFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuY29tbWl0Q2hhbmdlcyhtZXNzYWdlKQogIGlmIGNvbW1pdFN1Y2Nlc3MgdGhlbgogICAgcmV0dXJuIHRydWUsIGNvbW1pdFJlc3VsdCAgLS0gY29tbWl0UmVzdWx0IOaYryBzdGRvdXTvvIzmmL7npLrlrozmlbTovpPlh7oKICBlbmQKCiAgLS0gU3RlcCAzOiBub3RoaW5nIHRvIGNvbW1pdAogIGlmIGNvbW1pdFJlc3VsdDpmaW5kKCJub3RoaW5nIHRvIGNvbW1pdCIpIHRoZW4KICAgIHJldHVybiAibm90aGluZyIsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuTk9USElOR19UT19DT01NSVRfQ0xFQU4KICBlbHNlCiAgICByZXR1cm4gZmFsc2UsIGNvbW1pdFJlc3VsdCAtLSDlrozmlbTplJnor6/kv6Hmga8KICBlbmQKZW5kCgotLSBDb3JlIGNvbW1pdCBvcGVyYXRpb24gV0lUSCBMT0NLCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdChtZXNzYWdlLCBzaG93U3RlcHMsIGlzQ29sZFN0YXJ0KQogIGxvY2FsIG5lZWRUb1JlbGVhc2VMb2NrID0gZmFsc2UKICBsb2NhbCBsb2NrT2JqID0gX0cgYW5kIF9HLmdpdExvY2sgb3IgZ2l0TG9jawogIGxvY2FsIGFjcXVpcmVGbiA9IF9HIGFuZCBfRy5hY3F1aXJlR2l0TG9jayBvciBhY3F1aXJlR2l0TG9jawogIGxvY2FsIHJlbGVhc2VGbiA9IF9HIGFuZCBfRy5yZWxlYXNlR2l0TG9jayBvciByZWxlYXNlR2l0TG9jawoKICBpZiBub3QgbG9ja09iai5pc0xvY2tlZCB0aGVuCiAgICBpZiBub3QgYWNxdWlyZUZuKCJHaXQgQ29tbWl0IikgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUwogICAgZW5kCiAgICBuZWVkVG9SZWxlYXNlTG9jayA9IHRydWUKICBlbmQKCiAgbWVzc2FnZSA9IG1lc3NhZ2Ugb3IgIlNuYXBzaG90IgogIHNob3dTdGVwcyA9IHNob3dTdGVwcyA9PSBuaWwgYW5kIHRydWUgb3Igc2hvd1N0ZXBzCgogIC0tIFN0ZXAgMTogQ29tbWl0ICjlhoXpg6jlh73mlbDkvJrlpITnkIYgYWRkICYgY29tbWl0KQogIGxvY2FsIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdEludGVybmFsKG1lc3NhZ2UsIHNob3dTdGVwcywgaXNDb2xkU3RhcnQpCgogIGlmIG5lZWRUb1JlbGVhc2VMb2NrIHRoZW4gcmVsZWFzZUZuKCkgZW5kIC0tIPCflJMKCiAgcmV0dXJuIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZQplbmQKYGBgCgojIyMgQ29yZSBTeW5jIE9wZXJhdGlvbnMKCmBgYHNwYWNlLWx1YQotLSBDb3JlIHN5bmMgb3BlcmF0aW9uIFdJVEggTE9DSyAodGhpcyBpcyBhIGNvcmUgZnVuY3Rpb24gdGhhdCBuZWVkcyBsb2NraW5nKQpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLnBlcmZvcm1TeW5jKHNob3dTdGVwcywgaXNDb2xkU3RhcnQpCiAgbG9jYWwgbmVlZFRvUmVsZWFzZUxvY2sgPSBmYWxzZQogIGxvY2FsIGxvY2tPYmogPSBfRyBhbmQgX0cuZ2l0TG9jayBvciBnaXRMb2NrCiAgbG9jYWwgYWNxdWlyZUZuID0gX0cgYW5kIF9HLmFjcXVpcmVHaXRMb2NrIG9yIGFjcXVpcmVHaXRMb2NrCiAgbG9jYWwgcmVsZWFzZUZuID0gX0cgYW5kIF9HLnJlbGVhc2VHaXRMb2NrIG9yIHJlbGVhc2VHaXRMb2NrCgogIGlmIG5vdCBsb2NrT2JqLmlzTG9ja2VkIHRoZW4KICAgIGlmIG5vdCBhY3F1aXJlRm4oIkdpdCBTeW5jIikgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUwogICAgZW5kCiAgICBuZWVkVG9SZWxlYXNlTG9jayA9IHRydWUKICBlbmQKCiAgc2hvd1N0ZXBzID0gc2hvd1N0ZXBzID09IG5pbCBhbmQgdHJ1ZSBvciBzaG93U3RlcHMKCiAgLS0gU3RlcCAxOiBjb21taXQKICBsb2NhbCBjb21taXRSZXN1bHQsIGNvbW1pdE1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLnBlcmZvcm1Db21taXRJbnRlcm5hbChuaWwsIHNob3dTdGVwcywgdHJ1ZSkKICBpZiBjb21taXRSZXN1bHQgPT0gZmFsc2UgdGhlbgogICAgaWYgbmVlZFRvUmVsZWFzZUxvY2sgdGhlbiByZWxlYXNlRm4oKSBlbmQKICAgIHJldHVybiBmYWxzZSwgY29tbWl0TWVzc2FnZQogIGVsc2VpZiBjb21taXRSZXN1bHQgPT0gIm5vdGhpbmciIHRoZW4KICAgIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd1dhcm5pbmcoIk5PVEhJTkdfVE9fQ09NTUlUX0NMRUFOIikKICBlbmQKCiAgLS0gU3RlcCAyOiBwdWxsCiAgaWYgc2hvd1N0ZXBzIHRoZW4gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93SW5mbygiUFVMTF9TVEVQIikgZW5kCiAgbG9jYWwgcHVsbFN1Y2Nlc3MsIHB1bGxNZXNzYWdlID0gR2l0T3BlcmF0aW9ucy5wdWxsQ2hhbmdlcygpCiAgaWYgbm90IHB1bGxTdWNjZXNzIHRoZW4KICAgIGlmIG5lZWRUb1JlbGVhc2VMb2NrIHRoZW4gcmVsZWFzZUZuKCkgZW5kCiAgICByZXR1cm4gZmFsc2UsIHB1bGxNZXNzYWdlCiAgZW5kCgogIC0tIFN0ZXAgMzogcHVzaAogIGlmIHNob3dTdGVwcyB0aGVuIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd0luZm8oIlBVU0hfU1RFUCIpIGVuZAogIGxvY2FsIHB1c2hTdWNjZXNzLCBwdXNoTWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucHVzaENoYW5nZXMoKQogIGlmIG5vdCBwdXNoU3VjY2VzcyB0aGVuCiAgICBsb2NhbCBoYW5kbGVkLCBtZXNzYWdlID0gR2l0T3BlcmF0aW9ucy5oYW5kbGVQdXNoRXJyb3IocHVzaE1lc3NhZ2UsIGlzQ29sZFN0YXJ0KQogICAgaWYgbmVlZFRvUmVsZWFzZUxvY2sgdGhlbiByZWxlYXNlRm4oKSBlbmQKICAgIHJldHVybiBoYW5kbGVkLCBtZXNzYWdlCiAgZW5kCgogIGlmIG5lZWRUb1JlbGVhc2VMb2NrIHRoZW4gcmVsZWFzZUZuKCkgZW5kCiAgcmV0dXJuIHRydWUsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuU1lOQ19TVUNDRVNTCmVuZApgYGAKCiMjIEdpdCBDb25maWd1cmF0aW9uIFZhbGlkYXRvcgoKIyMjIEdpdCBDb25maWcgVmFsaWRhdG9yIENsYXNzCgpgYGBzcGFjZS1sdWEKLS0gR2l0Q29uZmlnVmFsaWRhdG9yCmlmIG5vdCBHaXRDb25maWdWYWxpZGF0b3IgdGhlbgogIC0tIFJlZGVmaW5lIEdpdENvbmZpZ1ZhbGlkYXRvciBoZXJlIGlmIG5lZWRlZAogIEdpdENvbmZpZ1ZhbGlkYXRvciA9IHsKICAgIGV4cGVjdGVkQ29uZmlnID0gewogICAgICB1c2VyTmFtZSA9ICJYY3oiLAogICAgICB1c2VyRW1haWwgPSAiMjk0MzAyNzA0QHFxLmNvbSIsCiAgICAgIGNyZWRlbnRpYWxIZWxwZXIgPSAic3RvcmUiLAogICAgICBwdWxsUmViYXNlID0gImZhbHNlIiwKICAgICAgcHVzaEF1dG9SZW1vdGUgPSAidHJ1ZSIKICAgIH0KICB9CgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjpleGVjdXRlQ29tbWFuZChjb21tYW5kLCBhcmdzLCBzdXBwcmVzc091dHB1dCkKICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgcmV0dXJuIHNoZWxsLnJ1bihjb21tYW5kLCBhcmdzKQogICAgZW5kKQoKICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4KICAgICAgcmV0dXJuIGZhbHNlLCBuaWwKICAgIGVuZAoKICAgIGlmIHR5cGUocmVzdWx0KSA9PSAidGFibGUiIHRoZW4KICAgICAgbG9jYWwgb3V0cHV0ID0gcmVzdWx0LnN0ZG91dCBvciAiIgogICAgICBsb2NhbCBleGl0Q29kZSA9IHJlc3VsdC5jb2RlIG9yIDAKICAgICAgaWYgZXhpdENvZGUgPT0gMCB0aGVuCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gc2FmZV90cmltKHMpCiAgICAgICAgICBpZiBub3QgcyBvciBzID09ICIiIHRoZW4KICAgICAgICAgICAgcmV0dXJuICIiICAtLSDnqbrlrZfnrKbkuLLnm7TmjqXov5Tlm54KICAgICAgICAgIGVuZAogICAgICAgICAgcmV0dXJuIHM6Z3N1YigiJXMrJCIsICIiKQogICAgICAgIGVuZAogICAgICAgIHJldHVybiB0cnVlLCBzYWZlX3RyaW0ob3V0cHV0KQogICAgICBlbHNlCiAgICAgICAgcmV0dXJuIGZhbHNlLCByZXN1bHQuc3RkZXJyIG9yICIiCiAgICAgIGVuZAogICAgZW5kCgogICAgcmV0dXJuIHN1Y2Nlc3MsIHJlc3VsdAogIGVuZApgYGAKCiMjIyBHaXQgQ29uZmlnIFZhbGlkYXRvciAtIFVSTCBNYW5hZ2VtZW50CgpgYGBzcGFjZS1sdWEKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6Z2V0T3JpZ2luVXJsRnJvbUluaXRTY3JpcHQoKQogICAgLS0gRmlyc3QsIHRyeSB0byBnZXQgdGhlIFVSTCBmcm9tIGV4aXN0aW5nIGdpdCBjb25maWcgdXNpbmcgR2l0T3BlcmF0aW9ucwogICAgaWYgR2l0T3BlcmF0aW9ucyBhbmQgR2l0T3BlcmF0aW9ucy5nZXRSZW1vdGVVcmwgdGhlbgogICAgICBsb2NhbCB1cmxTdWNjZXNzLCB1cmxSZXN1bHQgPSBHaXRPcGVyYXRpb25zLmdldFJlbW90ZVVybCgpCgogICAgICBpZiB1cmxTdWNjZXNzIGFuZCB1cmxSZXN1bHQgYW5kIHVybFJlc3VsdCB+PSAiIiB0aGVuCiAgICAgICAgLS0gQ2xlYW4gdXAgdGhlIFVSTCAocmVtb3ZlIHF1b3RlcywgdHJhaWxpbmcgd2hpdGVzcGFjZSkKICAgICAgICBsb2NhbCBjbGVhblVybCA9IHVybFJlc3VsdDpnc3ViKCIlcysiLCAiIikKICAgICAgICBpZiBjbGVhblVybCB+PSAiIiB0aGVuCiAgICAgICAgICByZXR1cm4gY2xlYW5VcmwKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKCiAgICAtLSBJZiBubyByZW1vdGUgVVJMIGZvdW5kIGluIGdpdCBjb25maWcsIHRyeSB0byByZWFkIGZyb20gaW5pdCBzY3JpcHQKICAgIGxvY2FsIHBhdGhzID0geyIuLi9pbml0LnNoIiwgIi4uL2luaXQuYmF0IiwgIi4uL2luaXQuY21kIn0KCiAgICBmb3IgXywgcGF0aCBpbiBpcGFpcnMocGF0aHMpIGRvCiAgICAgIGxvY2FsIHN1Y2Nlc3MsIGNvbnRlbnQgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4ocGF0aCwgInIiKQogICAgICAgIGlmIGZpbGUgdGhlbgogICAgICAgICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmFsbCIpCiAgICAgICAgICBmaWxlOmNsb3NlKCkKICAgICAgICAgIHJldHVybiBjb250ZW50CiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIG5pbAogICAgICBlbmQpCgogICAgICBpZiBzdWNjZXNzIGFuZCBjb250ZW50IHRoZW4KICAgICAgICAtLSBMb29rIGZvciBHaXRIdWIgVVJMIHBhdHRlcm5zIGluIHRoZSBzY3JpcHQKICAgICAgICBsb2NhbCBwYXR0ZXJucyA9IHsKICAgICAgICAgICJodHRwczovL1teJXNdK0BnaXRodWIlLmNvbS9bXiVzXSsiLAogICAgICAgICAgImdpdEBnaXRodWIlLmNvbTpbXiVzXSsiLAogICAgICAgICAgImh0dHBzOi8vZ2l0aHViJS5jb20vW14lc10rIgogICAgICAgIH0KCiAgICAgICAgZm9yIF8sIHBhdHRlcm4gaW4gaXBhaXJzKHBhdHRlcm5zKSBkbwogICAgICAgICAgbG9jYWwgdXJsID0gY29udGVudDptYXRjaChwYXR0ZXJuKQogICAgICAgICAgaWYgdXJsIHRoZW4KICAgICAgICAgICAgLS0gQ2xlYW4gdXAgdGhlIFVSTCAocmVtb3ZlIHF1b3RlcywgdHJhaWxpbmcgY2hhcmFjdGVycykKICAgICAgICAgICAgdXJsID0gdXJsOmdzdWIoIltcIidgXSIsICIiKTpnc3ViKCJbJXMlY10rJCIsICIiKQogICAgICAgICAgICByZXR1cm4gdXJsCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKCiAgICByZXR1cm4gbmlsCiAgZW5kCmBgYAoKIyMjIEdpdCBDb25maWcgVmFsaWRhdG9yIC0gUmVwb3NpdG9yeSBNYW5hZ2VtZW50CgpgYGBzcGFjZS1sdWEKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6aXNHaXRSZXBvc2l0b3J5KCkKICAgIHJldHVybiBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCB7InJldi1wYXJzZSIsICItLWdpdC1kaXIifSwgdHJ1ZSkKICBlbmQKCiAgZnVuY3Rpb24gR2l0Q29uZmlnVmFsaWRhdG9yOmluaXRpYWxpemVSZXBvc2l0b3J5KCkKICAgIGlmIG5vdCBzZWxmOmlzR2l0UmVwb3NpdG9yeSgpIHRoZW4KICAgICAgcmV0dXJuIHNlbGY6ZXhlY3V0ZUNvbW1hbmQoImdpdCIsIHsiaW5pdCIsICItYiIsICJtYWluIn0sIHRydWUpCiAgICBlbmQKICAgIHJldHVybiB0cnVlCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjpnZXRDb25maWdWYWx1ZShrZXksIHNjb3BlKQogICAgbG9jYWwgYXJncyA9IHsiY29uZmlnIn0KICAgIGlmIHNjb3BlID09ICJnbG9iYWwiIHRoZW4KICAgICAgdGFibGUuaW5zZXJ0KGFyZ3MsICItLWdsb2JhbCIpCiAgICBlbHNlaWYgc2NvcGUgPT0gImxvY2FsIiB0aGVuCiAgICAgIHRhYmxlLmluc2VydChhcmdzLCAiLS1sb2NhbCIpCiAgICBlbmQKICAgIHRhYmxlLmluc2VydChhcmdzLCBrZXkpCgogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gc2VsZjpleGVjdXRlQ29tbWFuZCgiZ2l0IiwgYXJncywgdHJ1ZSkKICAgIHJldHVybiBzdWNjZXNzIGFuZCByZXN1bHQgb3IgbmlsCiAgZW5kCmBgYAoKIyMjIEdpdCBDb25maWcgVmFsaWRhdG9yIC0gQ29uZmlndXJhdGlvbiBNYW5hZ2VtZW50CgpgYGBzcGFjZS1sdWEKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6c2V0Q29uZmlnVmFsdWUoa2V5LCB2YWx1ZSwgc2NvcGUpCiAgICBsb2NhbCBhcmdzID0geyJjb25maWcifQogICAgaWYgc2NvcGUgPT0gImdsb2JhbCIgdGhlbgogICAgICB0YWJsZS5pbnNlcnQoYXJncywgIi0tZ2xvYmFsIikKICAgIGVsc2VpZiBzY29wZSA9PSAibG9jYWwiIHRoZW4KICAgICAgdGFibGUuaW5zZXJ0KGFyZ3MsICItLWxvY2FsIikKICAgIGVuZAogICAgdGFibGUuaW5zZXJ0KGFyZ3MsIGtleSkKICAgIHRhYmxlLmluc2VydChhcmdzLCB2YWx1ZSkKCiAgICAtLSBVc2UgZXhlY3V0ZUNvbW1hbmQgd2hpY2ggcmV0dXJucyBzdWNjZXNzIGJhc2VkIG9uIGV4aXQgY29kZSwgbm90IG91dHB1dAogICAgLS0gZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCIxMjM0IiwgIndhcm5pbmciKQogICAgbG9jYWwgc3VjY2Vzcywgb3V0cHV0ID0gc2VsZjpleGVjdXRlQ29tbWFuZCgiZ2l0IiwgYXJncywgdHJ1ZSkKCiAgICAtLSBEZWJ1ZzogQ2hlY2sgd2hhdCBleGVjdXRlQ29tbWFuZCBhY3R1YWxseSByZXR1cm5zCiAgICAtLSBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oImV0c3QiLCAid2FybmluZyIpCiAgICBwcmludCgic2V0Q29uZmlnVmFsdWUgZGVidWcgLSBzdWNjZXNzOiIsIHN1Y2Nlc3MsICJvdXRwdXQ6Iiwgb3V0cHV0IG9yICIobmlsKSIpCgogICAgaWYgc3VjY2VzcyB0aGVuCiAgICAgIC0tIENvbnN0cnVjdCB0aGUgZ2l0IGNvbW1hbmQgc3RyaW5nIGZvciBkaXNwbGF5CiAgICAgIGxvY2FsIGdpdENvbW1hbmQgPSAiZ2l0IGNvbmZpZyIKICAgICAgaWYgc2NvcGUgPT0gImdsb2JhbCIgdGhlbgogICAgICAgIGdpdENvbW1hbmQgPSBnaXRDb21tYW5kIC4uICIgLS1nbG9iYWwiCiAgICAgIGVsc2VpZiBzY29wZSA9PSAibG9jYWwiIHRoZW4KICAgICAgICBnaXRDb21tYW5kID0gZ2l0Q29tbWFuZCAuLiAiIC0tbG9jYWwiCiAgICAgIGVuZAogICAgICBnaXRDb21tYW5kID0gZ2l0Q29tbWFuZCAuLiAiICIgLi4ga2V5IC4uICIgIiAuLiB2YWx1ZQoKICAgICAgLS0gRmxhc2ggbm90aWZpY2F0aW9uIGFuZCBwcmludAogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkNvbmZpZyBzZXQ6ICIgLi4gZ2l0Q29tbWFuZCwgIndhcm5pbmciKQogICAgICBwcmludCgiR2l0IGNvbmZpZyBzZXQ6ICIgLi4gZ2l0Q29tbWFuZCkKICAgIGVsc2UKICAgICAgcHJpbnQoIkZhaWxlZCB0byBzZXQgY29uZmlnOiIsIGtleSwgIj0iLCB2YWx1ZSwgIkVycm9yOiIsIG91dHB1dCBvciAiKG5vIGVycm9yKSIpCiAgICBlbmQKCiAgICByZXR1cm4gc3VjY2VzcwogIGVuZAoKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6c2V0UmVtb3RlT3JpZ2luKHVybCkKICAgIC0tIEZpcnN0IHRyeSB0byBzZXQgZXhpc3Rpbmcgb3JpZ2luIChsb2NhbCkKICAgIGxvY2FsIHN1Y2Nlc3MgPSBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCB7InJlbW90ZSIsICJzZXQtdXJsIiwgIm9yaWdpbiIsIHVybH0sIHRydWUpCiAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgcmV0dXJuIHRydWUKICAgIGVuZAoKICAgIC0tIElmIHRoYXQgZmFpbHMsIHRyeSB0byBhZGQgbmV3IG9yaWdpbiAobG9jYWwpCiAgICByZXR1cm4gc2VsZjpleGVjdXRlQ29tbWFuZCgiZ2l0IiwgeyJyZW1vdGUiLCAiYWRkIiwgIm9yaWdpbiIsIHVybH0sIHRydWUpCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjpjaGVja0FuZFNldENvbmZpZyhrZXksIGV4cGVjdGVkVmFsdWUpCiAgICAtLSBDaGVjayBnbG9iYWwgZmlyc3QKICAgIGxvY2FsIGdsb2JhbFZhbHVlID0gc2VsZjpnZXRDb25maWdWYWx1ZShrZXksICJnbG9iYWwiKQogICAgaWYgZ2xvYmFsVmFsdWUgPT0gZXhwZWN0ZWRWYWx1ZSB0aGVuCiAgICAgIGxvY2FsIGdpdENvbW1hbmQgPSAiZ2l0IGNvbmZpZyIgLi4gIiAtLWdsb2JhbCIKICAgICAgZ2l0Q29tbWFuZCA9IGdpdENvbW1hbmQgLi4gIiAiIC4uIGtleSAuLiAiICIgLi4gdmFsdWUKICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJBbHJlYWR5IHNldDogIiAuLiBnaXRDb21tYW5kLCAid2FybmluZyIpCiAgICAgIHJldHVybiB0cnVlIC0tIEFscmVhZHkgc2V0IGluIGdsb2JhbCwgbm8gbmVlZCB0byBzZXQgbG9jYWxseQogICAgZW5kCgogICAgLS0gQ2hlY2sgbG9jYWwKICAgIGxvY2FsIGxvY2FsVmFsdWUgPSBzZWxmOmdldENvbmZpZ1ZhbHVlKGtleSwgImxvY2FsIikKICAgIGlmIGxvY2FsVmFsdWUgPT0gZXhwZWN0ZWRWYWx1ZSB0aGVuCiAgICAgIGxvY2FsIGdpdENvbW1hbmQgPSAiZ2l0IGNvbmZpZyIgLi4gIiAtLWxvY2FsIgogICAgICBnaXRDb21tYW5kID0gZ2l0Q29tbWFuZCAuLiAiICIgLi4ga2V5IC4uICIgIiAuLiB2YWx1ZQogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkFscmVhZHkgc2V0OiAiIC4uIGdpdENvbW1hbmQsICJ3YXJuaW5nIikKICAgICAgcmV0dXJuIHRydWUgLS0gQWxyZWFkeSBzZXQgbG9jYWxseQogICAgZW5kCgogICAgLS0gTmVpdGhlciBnbG9iYWwgbm9yIGxvY2FsIGhhcyB0aGUgZXhwZWN0ZWQgdmFsdWUsIHNldCBpdCBsb2NhbGx5CiAgICByZXR1cm4gc2VsZjpzZXRDb25maWdWYWx1ZShrZXksIGV4cGVjdGVkVmFsdWUsICJsb2NhbCIpCiAgZW5kCmBgYAoKIyMjIEdpdCBDb25maWcgVmFsaWRhdG9yIC0gU2V0dXAgRnVuY3Rpb24KCmBgYHNwYWNlLWx1YQogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjp2YWxpZGF0ZUFuZFNldHVwKCkKICAgIC0tIFN0ZXAgMTogRW5zdXJlIGdpdCByZXBvc2l0b3J5IGlzIGluaXRpYWxpemVkCiAgICBpZiBub3Qgc2VsZjppbml0aWFsaXplUmVwb3NpdG9yeSgpIHRoZW4KICAgICAgcmV0dXJuIGZhbHNlIC0tIEZhaWxlZCB0byBpbml0aWFsaXplIHJlcG9zaXRvcnkKICAgIGVuZAoKICAgIC0tIFN0ZXAgMjogQ2hlY2sgYW5kIHNldCBiYXNpYyBnaXQgY29uZmlnCiAgICBsb2NhbCBjb25maWdLZXlzID0gewogICAgICBbInVzZXIubmFtZSJdID0gc2VsZi5leHBlY3RlZENvbmZpZy51c2VyTmFtZSwKICAgICAgWyJ1c2VyLmVtYWlsIl0gPSBzZWxmLmV4cGVjdGVkQ29uZmlnLnVzZXJFbWFpbCwKICAgICAgWyJjcmVkZW50aWFsLmhlbHBlciJdID0gc2VsZi5leHBlY3RlZENvbmZpZy5jcmVkZW50aWFsSGVscGVyLAogICAgICBbInB1bGwucmViYXNlIl0gPSBzZWxmLmV4cGVjdGVkQ29uZmlnLnB1bGxSZWJhc2UsCiAgICAgIFsicHVzaC5hdXRvU2V0dXBSZW1vdGUiXSA9IHNlbGYuZXhwZWN0ZWRDb25maWcucHVzaEF1dG9SZW1vdGUKICAgIH0KCiAgICBmb3Iga2V5LCBleHBlY3RlZFZhbHVlIGluIHBhaXJzKGNvbmZpZ0tleXMpIGRvCiAgICAgIGxvY2FsIGNvbmZpZ1NldCA9IHNlbGY6Y2hlY2tBbmRTZXRDb25maWcoa2V5LCBleHBlY3RlZFZhbHVlKQogICAgICBpZiBub3QgY29uZmlnU2V0IHRoZW4KICAgICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIldhcm5pbmc6IEZhaWxlZCB0byBzZXQgY29uZmlnICIgLi4ga2V5IC4uICIgPSAiIC4uIGV4cGVjdGVkVmFsdWUsICJ3YXJuaW5nIikKICAgICAgICBwcmludCgiV2FybmluZzogRmFpbGVkIHRvIHNldCBjb25maWcgIiAuLiBrZXkgLi4gIiA9ICIgLi4gZXhwZWN0ZWRWYWx1ZSkKICAgICAgZW5kCiAgICBlbmQKCiAgICAtLSBTdGVwIDM6IENoZWNrIGFuZCBzZXQgb3JpZ2luIFVSTCAob25seSBmcm9tIGluaXQgc2NyaXB0KQogICAgbG9jYWwgY3VycmVudE9yaWdpblVybCA9IHNlbGY6Z2V0UmVtb3RlT3JpZ2luVXJsKCkKICAgIGlmIG5vdCBjdXJyZW50T3JpZ2luVXJsIG9yIGN1cnJlbnRPcmlnaW5VcmwgPT0gIiIgdGhlbgogICAgICBsb2NhbCBzY3JpcHRVcmwgPSBzZWxmOmdldE9yaWdpblVybEZyb21Jbml0U2NyaXB0KCkKICAgICAgaWYgc2NyaXB0VXJsIHRoZW4KICAgICAgICBzZWxmOnNldFJlbW90ZU9yaWdpbihzY3JpcHRVcmwpCiAgICAgIGVuZAogICAgZW5kCgogICAgcmV0dXJuIHRydWUKICBlbmQKZW5kCmBgYAoKIyMgQWR2YW5jZWQgR2l0IE9wZXJhdGlvbnMKCiMjIyBGb3JjZSBQdXNoIEluaXRpYWwgQ29tbWl0CgpgYGBzcGFjZS1sdWEKLS0gQ29yZSBmb3JjZSBwdXNoIGluaXRpYWwgY29tbWl0IFdJVEggTE9DSwpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLnBlcmZvcm1Gb3JjZVB1c2hJbml0aWFsKCkKICAtLSDwn5SSIEFDUVVJUkUgTE9DSwogIGxvY2FsIGFjcXVpcmVGbiA9IF9HIGFuZCBfRy5hY3F1aXJlR2l0TG9jayBvciBhY3F1aXJlR2l0TG9jawogIGxvY2FsIHJlbGVhc2VGbiA9IF9HIGFuZCBfRy5yZWxlYXNlR2l0TG9jayBvciByZWxlYXNlR2l0TG9jawoKICBpZiBub3QgYWNxdWlyZUZuKCJHaXQgRm9yY2UgUHVzaCBJbml0aWFsIikgdGhlbgogICAgcmV0dXJuIGZhbHNlLCBOb3RpZmljYXRpb25NYW5hZ2VyLm1lc3NhZ2VzLkdJVF9PUEVSQVRJT05fSU5fUFJPR1JFU1MKICBlbmQKCiAgLS0gU3RlcCAxOiBHZXQgcmVtb3RlIFVSTCBmcm9tIGluaXQgc2NyaXB0IChiZWZvcmUgZGVsZXRpbmcgLmdpdCkKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMS82OiBSZWFkaW5nIHJlbW90ZSBVUkwgZnJvbSBpbml0IHNjcmlwdC4uLiIsICJpbmZvIikKICBsb2NhbCByZW1vdGVVcmwgPSBHaXRDb25maWdWYWxpZGF0b3I6Z2V0T3JpZ2luVXJsRnJvbUluaXRTY3JpcHQoKQoKICBpZiBub3QgcmVtb3RlVXJsIG9yIHJlbW90ZVVybCA9PSAiIiB0aGVuCiAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dXYXJuaW5nKCJObyByZW1vdGUgVVJMIGZvdW5kIGluIGluaXQgc2NyaXB0LiBQbGVhc2UgZW50ZXIgdGhlIHJlbW90ZSByZXBvc2l0b3J5IFVSTC4iKQogICAgcmVtb3RlVXJsID0gZWRpdG9yLnByb21wdCgiRW50ZXIgcmVtb3RlIHJlcG9zaXRvcnkgVVJMOiIpCgogICAgaWYgbm90IHJlbW90ZVVybCBvciByZW1vdGVVcmwgPT0gIiIgdGhlbgogICAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICAgIHJldHVybiBmYWxzZSwgIkZvcmNlIHB1c2ggY2FuY2VsbGVkOiBubyByZW1vdGUgVVJMIHByb3ZpZGVkLiIKICAgIGVuZAogIGVuZAoKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlJlbW90ZSBVUkw6ICIgLi4gcmVtb3RlVXJsLCAid2FybmluZyIpCgogIC0tIFN0ZXAgMjogUmVtb3ZlIC5naXQgZGlyZWN0b3J5CiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDIvNjogV2lwaW5nIGxvY2FsIGhpc3RvcnkuLi4iLCAiaW5mbyIpCiAgbG9jYWwgZGVsZXRlU3VjY2Vzcywgb3NUeXBlID0gR2l0T3BlcmF0aW9ucy5yZW1vdmVHaXREaXJlY3RvcnkoKQoKICBpZiBub3QgZGVsZXRlU3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIG9zVHlwZQogIGVuZAoKICAtLSBTdGVwIDM6IFJlLWluaXRpYWxpemUgcmVwb3NpdG9yeSBhbmQgY29uZmlndXJlIGl0CiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDMvNjogUmUtaW5pdGlhbGl6aW5nIHJlcG9zaXRvcnkgb24gJ21haW4nIGJyYW5jaC4uLiIsICJpbmZvIikKCiAgLS0gSW5pdGlhbGl6ZSByZXBvc2l0b3J5CiAgbG9jYWwgaW5pdFN1Y2Nlc3MsIGluaXRSZXN1bHQgPSBHaXRPcGVyYXRpb25zLmluaXRSZXBvc2l0b3J5KCkKICBpZiBub3QgaW5pdFN1Y2Nlc3MgdGhlbgogICAgcmVsZWFzZUZuKCkgLS0g8J+UkwogICAgcmV0dXJuIGZhbHNlLCBpbml0UmVzdWx0CiAgZW5kCgogIC0tIPCflKUgTkVXOiBDb25maWd1cmUgZ2l0IGFmdGVyIHJlLWluaXRpYWxpemF0aW9uCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJDb25maWd1cmluZyBnaXQgc2V0dGluZ3MuLi4iLCAid2FybmluZyIpCiAgbG9jYWwgY29uZmlnU3VjY2VzcywgY29uZmlnRXJyID0gcGNhbGwoZnVuY3Rpb24oKQogICAgR2l0Q29uZmlnVmFsaWRhdG9yOnZhbGlkYXRlQW5kU2V0dXAoKQogIGVuZCkKICBpZiBub3QgY29uZmlnU3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STIFJlbGVhc2UgdGhlIGxvY2sgYmVmb3JlIHJldHVybmluZwogICAgLS0gcmV0dXJuIGZhbHNlLCAiR2l0IGNvbmZpZ3VyYXRpb24gZmFpbGVkOiAiIC4uIHRvc3RyaW5nKGNvbmZpZ0VycikKICBlbmQKCiAgLS0gU3RlcCA0OiBSZS1saW5rIHRvIHJlbW90ZQogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RlcCA0LzY6IFJlLWxpbmtpbmcgdG8gcmVtb3RlLi4uIiwgImluZm8iKQogIGxvY2FsIHJlbW90ZVN1Y2Nlc3MsIHJlbW90ZVJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuYWRkUmVtb3RlT3JpZ2luKHJlbW90ZVVybCkKICBpZiBub3QgcmVtb3RlU3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIHJlbW90ZVJlc3VsdAogIGVuZAoKICAtLSBTdGVwIDU6IENyZWF0ZSBpbml0aWFsIGNvbW1pdAogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RlcCA1LzY6IENyZWF0aW5nIGluaXRpYWwgY29tbWl0Li4uIiwgImluZm8iKQogIGxvY2FsIGNvbW1pdFN1Y2Nlc3MsIGNvbW1pdE1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLnBlcmZvcm1Db21taXRJbnRlcm5hbCgiSW5pdGlhbCBDb21taXQiLCBmYWxzZSwgZmFsc2UpCiAgaWYgY29tbWl0U3VjY2VzcyB+PSB0cnVlIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgIkVycm9yIGR1cmluZyBpbml0aWFsIGNvbW1pdDogIiAuLiBjb21taXRNZXNzYWdlCiAgZW5kCgogIC0tIFN0ZXAgNjogRm9yY2UgcHVzaAogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RlcCA2LzY6IEZvcmNlIHB1c2hpbmcgdG8gcmVtb3RlLi4uIiwgImluZm8iKQogIGxvY2FsIHB1c2hTdWNjZXNzLCBwdXNoUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5mb3JjZVB1c2goKQogIGlmIG5vdCBwdXNoU3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIHB1c2hSZXN1bHQKICBlbmQKCiAgcmVsZWFzZUZuKCkgLS0g8J+UkwogIHJldHVybiB0cnVlLCAiRm9yY2UgcHVzaCBpbml0aWFsIGNvbW1pdCBzdWNjZXNzZnVsISIKZW5kCmBgYAoKIyMjIEZvcmNlIFB1bGwgT3BlcmF0aW9uCgpgYGBzcGFjZS1sdWEKLS0gQ29yZSBmb3JjZSBwdWxsIFdJVEggTE9DSwpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLnBlcmZvcm1Gb3JjZVB1bGwoKQogIC0tIPCflJIgQUNRVUlSRSBMT0NLCiAgbG9jYWwgYWNxdWlyZUZuID0gX0cgYW5kIF9HLmFjcXVpcmVHaXRMb2NrIG9yIGFjcXVpcmVHaXRMb2NrCiAgbG9jYWwgcmVsZWFzZUZuID0gX0cgYW5kIF9HLnJlbGVhc2VHaXRMb2NrIG9yIHJlbGVhc2VHaXRMb2NrCgogIGlmIG5vdCBhY3F1aXJlRm4oIkdpdCBGb3JjZSBQdWxsIikgdGhlbgogICAgcmV0dXJuIGZhbHNlLCBOb3RpZmljYXRpb25NYW5hZ2VyLm1lc3NhZ2VzLkdJVF9PUEVSQVRJT05fSU5fUFJPR1JFU1MKICBlbmQKCiAgLS0gU3RlcCAxOiBGZXRjaAogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RlcCAxLzM6IEZldGNoaW5nIGZyb20gcmVtb3RlLi4uIiwgImluZm8iKQogIGxvY2FsIGZldGNoU3VjY2VzcywgZmV0Y2hSZXN1bHQgPSBHaXRPcGVyYXRpb25zLmZldGNoRnJvbVJlbW90ZSgpCiAgaWYgbm90IGZldGNoU3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIGZldGNoUmVzdWx0CiAgZW5kCgogIC0tIFN0ZXAgMjogUmVzZXQgaGFyZAogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RlcCAyLzM6IFJlc2V0dGluZyBsb2NhbCB0byBtYXRjaCByZW1vdGUuLi4iLCAiaW5mbyIpCiAgbG9jYWwgcmVzZXRTdWNjZXNzLCByZXNldFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMucmVzZXRIYXJkKCkKICBpZiBub3QgcmVzZXRTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgcmVzZXRSZXN1bHQKICBlbmQKCiAgLS0gU3RlcCAzOiBDbGVhbiB1bnRyYWNrZWQgZmlsZXMKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMy8zOiBDbGVhbmluZyB1bnRyYWNrZWQgZmlsZXMuLi4iLCAiaW5mbyIpCiAgbG9jYWwgY2xlYW5TdWNjZXNzLCBjbGVhblJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuY2xlYW5VbnRyYWNrZWQoKQogIGlmIG5vdCBjbGVhblN1Y2Nlc3MgdGhlbgogICAgcmVsZWFzZUZuKCkgLS0g8J+UkwogICAgcmV0dXJuIGZhbHNlLCBjbGVhblJlc3VsdAogIGVuZAoKICByZWxlYXNlRm4oKSAtLSDwn5STCiAgcmV0dXJuIHRydWUsICJGb3JjZSBwdWxsIHN1Y2Nlc3NmdWwhIExvY2FsIGlzIG5vdyBpZGVudGljYWwgdG8gcmVtb3RlLiIKZW5kCmBgYAoKIyMgR2l0IEFQSQoKIyMjIE1haW4gR2l0IE9iamVjdAoKYGBgc3BhY2UtbHVhCi0tIE1haW4gZ2l0IG9iamVjdCAodGhlc2UgY29yZSBmdW5jdGlvbnMgbm93IGhhbmRsZSB0aGVpciBvd24gbG9ja2luZykKZ2l0ID0ge30KZ2l0LmNvbW1pdCA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdApnaXQuc3luYyA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybVN5bmMKYGBgCgojIyBDb21tYW5kcwoKIyMjIEdpdCBDb21taXQgQ29tbWFuZAoKYGBgc3BhY2UtbHVhCmNvbW1hbmQuZGVmaW5lIHsKICBuYW1lID0gIkdpdDogQ29tbWl0IiwKICBydW4gPSBmdW5jdGlvbigpCiAgICBsb2NhbCBtZXNzYWdlID0gZWRpdG9yLnByb21wdCgiQ29tbWl0IG1lc3NhZ2U6IikKICAgIGlmIG5vdCBtZXNzYWdlIHRoZW4gcmV0dXJuIGVuZAoKICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IGdpdC5jb21taXQobWVzc2FnZSwgdHJ1ZSwgbmlsKQoKICAgIGlmIHN1Y2Nlc3MgPT0gZmFsc2UgdGhlbgogICAgICAtLSDlrozmlbTplJnor6/kv6Hmga/mmL7npLoKICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93RXJyb3IocmVzdWx0KQogICAgZWxzZWlmIHN1Y2Nlc3MgPT0gIm5vdGhpbmciIHRoZW4KICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJOb3RoaW5nIHRvIGNvbW1pdDogd29ya2luZyB0cmVlIGlzIGNsZWFuLiIsICJ3YXJuaW5nIikKICAgIGVsc2UKICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJDb21taXQgc3VjY2Vzc2Z1bCFcbiIgLi4gcmVzdWx0LCAid2FybmluZyIpCiAgICBlbmQKICBlbmQKfQpgYGAKCiMjIyBHaXQgU3luYyBDb21tYW5kCgpgYGBzcGFjZS1sdWEKY29tbWFuZC5kZWZpbmUgewogIG5hbWUgPSAiR2l0OiBTeW5jIiwKICBydW4gPSBmdW5jdGlvbigpCiAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0YXJ0aW5nIG1hbnVhbCBHaXQgc3luYy4uLiIsICJ3YXJuaW5nIikKCiAgICBsb2NhbCBzdWNjZXNzLCBtZXNzYWdlID0gZ2l0LnN5bmModHJ1ZSwgZmFsc2UpIC0tIFNob3cgc3RlcHMsIG5vdCBjb2xkIHN0YXJ0CgogICAgaWYgc3VjY2VzcyA9PSB0cnVlIHRoZW4KICAgICAgaWYgbWVzc2FnZSA9PSAiT25seSBwdXNoIGZhaWxlZCIgdGhlbgogICAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiTWFudWFsOiBHaXQgcHVsbCBjb21wbGV0ZS4gIiAuLiBtZXNzYWdlIC4uICIuIiwgIndhcm5pbmciKQogICAgICBlbHNlCiAgICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJNYW51YWwgR2l0IHN5bmMgY29tcGxldGUhIiwgIndhcm5pbmciKQogICAgICBlbmQKICAgIGVsc2VpZiBzdWNjZXNzID09ICJub3RoaW5nIiB0aGVuCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiTm90aGluZyB0byBjb21taXQ6IHdvcmtpbmcgdHJlZSBpcyBjbGVhbi4iLCAid2FybmluZyIpCiAgICBlbHNlCiAgICAgIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd0Vycm9yKG1lc3NhZ2UpCiAgICBlbmQKICBlbmQKfQpgYGAKCiMjIyBHaXQgRm9yY2UgUHVzaCBDb21tYW5kCgpgYGBzcGFjZS1sdWEKY29tbWFuZC5kZWZpbmUgewogIG5hbWUgPSAiR2l0OiBGb3JjZSBQdXNoIEluaXRpYWwgQ29tbWl0IiwKICBydW4gPSBmdW5jdGlvbigpCiAgICBpZiBub3QgZWRpdG9yLmNvbmZpcm0oIkRBTkdFUjogVGhpcyB3aWxsIFdJUEUgeW91ciBlbnRpcmUgR2l0IGhpc3RvcnkgKGxvY2FsIGFuZCByZW1vdGUpIGFuZCBzdGFydCBvdmVyLiBBcmUgeW91IGFic29sdXRlbHkgc3VyZT8iKSB0aGVuCiAgICAgIHJldHVybgogICAgZW5kCgogICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGFydGluZyBmb3JjZSBwdXNoIHByb2Nlc3MuLi4iLCAid2FybmluZyIpCgogICAgbG9jYWwgc3VjY2VzcywgbWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUZvcmNlUHVzaEluaXRpYWwoKQoKICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24obWVzc2FnZSwgIndhcm5pbmciKQogICAgZWxzZQogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dFcnJvcihtZXNzYWdlKQogICAgZW5kCiAgZW5kCn0KYGBgCgojIyMgR2l0IEZvcmNlIFB1bGwgQ29tbWFuZAoKYGBgc3BhY2UtbHVhCmNvbW1hbmQuZGVmaW5lIHsKICBuYW1lID0gIkdpdDogRm9yY2UgUHVsbCB0byBPdmVyd3JpdGUgTG9jYWwiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIGlmIG5vdCBlZGl0b3IuY29uZmlybSgiREFOR0VSOiBUaGlzIHdpbGwgRElTQ0FSRCBhbGwgbG9jYWwgY2hhbmdlcyBhbmQgY29tbWl0cywgbWFraW5nIHlvdXIgbG9jYWwgY29weSBpZGVudGljYWwgdG8gdGhlIHJlbW90ZS4gQXJlIHlvdSBzdXJlPyIpIHRoZW4KICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0YXJ0aW5nIGZvcmNlIHB1bGwgcHJvY2Vzcy4uLiIsICJ3YXJuaW5nIikKCiAgICBsb2NhbCBzdWNjZXNzLCBtZXNzYWdlID0gR2l0T3BlcmF0aW9ucy5wZXJmb3JtRm9yY2VQdWxsKCkKCiAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKG1lc3NhZ2UsICJ3YXJuaW5nIikKICAgIGVsc2UKICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93RXJyb3IobWVzc2FnZSkKICAgIGVuZAogIGVuZAp9CmBgYAoKIyMgQXV0by1TeW5jIFN5c3RlbQoKIyMjIEF1dG8tU3luYyBNYW5hZ2VyCgpgYGBzcGFjZS1sdWEKLS0gcHJpb3JpdHk6IC0xCgotLSBBdXRvLXN5bmMgbWFuYWdlciAoU0lNUExJRklFRCAtIG5vIGV4cGxpY2l0IGxvY2tpbmcsIGNvcmUgZnVuY3Rpb25zIGhhbmRsZSBpdCkKbG9jYWwgQXV0b1N5bmNNYW5hZ2VyID0gewogIGxhc3RQZXJpb2RpY1N5bmMgPSAwLAogIGNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgPSBmYWxzZSwKICBzdGFydHVwVGltZSA9IG9zLnRpbWUoKSwKICBldmVudFN5bmNTY2hlZHVsZWRBdCA9IDAsCiAgZXZlbnRTeW5jRGVsYXlTZWNvbmRzID0gMTAKfQoKZnVuY3Rpb24gQXV0b1N5bmNNYW5hZ2VyOnNob3VsZFRyaWdnZXJTeW5jKCkKICBsb2NhbCBub3cgPSBvcy50aW1lKCkKICBsb2NhbCB1cHRpbWUgPSBub3cgLSBzZWxmLnN0YXJ0dXBUaW1lCiAgbG9jYWwgcGVyaW9kaWNTeW5jTWludXRlcyA9IGNvbmZpZy5nZXQoImdpdC5hdXRvU3luYyIpCgogIC0tIENvbGQgc3RhcnQgc3luYwogIGlmIHBlcmlvZGljU3luY01pbnV0ZXMgYW5kIG5vdCBzZWxmLmNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgYW5kIHVwdGltZSA+PSA1IGFuZCB1cHRpbWUgPD0gMTAgdGhlbgogICAgcmV0dXJuICJjb2xkLXN0YXJ0IgogIGVuZAoKICAtLSBQZXJpb2RpYyBzeW5jCiAgaWYgcGVyaW9kaWNTeW5jTWludXRlcyBhbmQgc2VsZi5jb2xkU3RhcnRTeW5jVHJpZ2dlcmVkIGFuZCAobm93IC0gc2VsZi5sYXN0UGVyaW9kaWNTeW5jKSAvIDYwID49IHBlcmlvZGljU3luY01pbnV0ZXMgdGhlbgogICAgcmV0dXJuICJwZXJpb2RpYyIKICBlbmQKCiAgLS0gRXZlbnQtZHJpdmVuIHN5bmMKICBpZiBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID4gMCBhbmQgKG5vdyAtIHNlbGYuZXZlbnRTeW5jU2NoZWR1bGVkQXQpID49IHNlbGYuZXZlbnRTeW5jRGVsYXlTZWNvbmRzIHRoZW4KICAgIHJldHVybiAiZXZlbnQtZHJpdmVuIgogIGVuZAoKICByZXR1cm4gbmlsCmVuZApgYGAKCiMjIyBBdXRvLVN5bmMgRXhlY3V0aW9uCgpgYGBzcGFjZS1sdWEKLS0gQVVUTyBTWU5DIEZVTkNUSU9OCmZ1bmN0aW9uIEF1dG9TeW5jTWFuYWdlcjpwZXJmb3JtQXV0b1N5bmMoc3luY1R5cGUpCiAgcHJpbnQoIlRyaWdnZXJpbmcgIiAuLiBzeW5jVHlwZTpsb3dlcigpIC4uICIgZ2l0IHN5bmMuLi4iKQogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiVHJpZ2dlcmluZyAiIC4uIHN5bmNUeXBlIC4uICIgR2l0IHN5bmMuLi4iLCAid2FybmluZyIpCgogIGxvY2FsIGlzQ29sZFN0YXJ0ID0gKHN5bmNUeXBlID09ICJTdGFydHVwIikKICBsb2NhbCBzeW5jT2ssIHN5bmNNZXNzYWdlID0gZ2l0LnN5bmModHJ1ZSwgaXNDb2xkU3RhcnQpIC0tIEFsd2F5cyBzaG93IHN0ZXBzICh0cnVlKQoKICBpZiBzeW5jT2sgPT0gdHJ1ZSB0aGVuCiAgICBpZiBzeW5jTWVzc2FnZSA9PSAiT25seSBwdXNoIGZhaWxlZCIgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oc3luY1R5cGUgLi4gIjogR2l0IHB1bGwgY29tcGxldGUuICIgLi4gc3luY01lc3NhZ2UgLi4gIi4iLCAid2FybmluZyIpCiAgICBlbHNlCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jVHlwZSAuLiAiOiBHaXQgc3luYyBjb21wbGV0ZS4iLCAid2FybmluZyIpCiAgICBlbmQKICAgIHByaW50KHN5bmNUeXBlIC4uICIgc3luYyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikKICBlbHNlaWYgc3luY09rID09ICJub3RoaW5nIiB0aGVuCgo+Pj4gKipVc2VyKio6IOe7p+e7reeUn+aIkOWujOaVtAoKPj4+ICoqQ29waWxvdCoqOiBgYGBzcGFjZS1sdWEKLS0gQVVUTyBTWU5DIEZVTkNUSU9OCmZ1bmN0aW9uIEF1dG9TeW5jTWFuYWdlcjpwZXJmb3JtQXV0b1N5bmMoc3luY1R5cGUpCiAgcHJpbnQoIlRyaWdnZXJpbmcgIiAuLiBzeW5jVHlwZTpsb3dlcigpIC4uICIgZ2l0IHN5bmMuLi4iKQogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiVHJpZ2dlcmluZyAiIC4uIHN5bmNUeXBlIC4uICIgR2l0IHN5bmMuLi4iLCAid2FybmluZyIpCgogIGxvY2FsIGlzQ29sZFN0YXJ0ID0gKHN5bmNUeXBlID09ICJTdGFydHVwIikKICBsb2NhbCBzeW5jT2ssIHN5bmNNZXNzYWdlID0gZ2l0LnN5bmModHJ1ZSwgaXNDb2xkU3RhcnQpIC0tIEFsd2F5cyBzaG93IHN0ZXBzICh0cnVlKQoKICBpZiBzeW5jT2sgPT0gdHJ1ZSB0aGVuCiAgICBpZiBzeW5jTWVzc2FnZSA9PSAiT25seSBwdXNoIGZhaWxlZCIgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oc3luY1R5cGUgLi4gIjogR2l0IHB1bGwgY29tcGxldGUuICIgLi4gc3luY01lc3NhZ2UgLi4gIi4iLCAid2FybmluZyIpCiAgICBlbHNlCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jVHlwZSAuLiAiOiBHaXQgc3luYyBjb21wbGV0ZS4iLCAid2FybmluZyIpCiAgICBlbmQKICAgIHByaW50KHN5bmNUeXBlIC4uICIgc3luYyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikKICBlbHNlaWYgc3luY09rID09ICJub3RoaW5nIiB0aGVuCiAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oc3luY01lc3NhZ2UsICJ3YXJuaW5nIikKICAgIHByaW50KHN5bmNUeXBlIC4uICIgc3luYzogbm90aGluZyB0byBjb21taXQiKQogIGVsc2VpZiBzeW5jT2sgPT0gZmFsc2UgdGhlbgogICAgaWYgc3luY01lc3NhZ2UgPT0gTm90aWZpY2F0aW9uTWFuYWdlci5tZXNzYWdlcy5HSVRfT1BFUkFUSU9OX0lOX1BST0dSRVNTIHRoZW4KICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKHN5bmNNZXNzYWdlLCAid2FybmluZyIpCiAgICAgIHByaW50KHN5bmNUeXBlIC4uICIgc3luYyB3YXJuaW5nOiAiIC4uIHN5bmNNZXNzYWdlKQogICAgZWxzZQogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oc3luY01lc3NhZ2UsICJlcnJvciIpCiAgICAgIHByaW50KHN5bmNUeXBlIC4uICIgc3luYyBmYWlsZWQ6XG4iIC4uIHN5bmNNZXNzYWdlKQogICAgZW5kCiAgZWxzZQogICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJVbmtub3duIGdpdCBzeW5jIHJlc3VsdCIsICJlcnJvciIpCiAgICBwcmludChzeW5jVHlwZSAuLiAiIHN5bmMgdW5rbm93biByZXN1bHQ6Iiwgc3luY09rLCBzeW5jTWVzc2FnZSkKICBlbmQKZW5kCgpmdW5jdGlvbiBBdXRvU3luY01hbmFnZXI6dXBkYXRlU3luY1N0YXRlKHN5bmNUeXBlKQogIGxvY2FsIG5vdyA9IG9zLnRpbWUoKQoKICBpZiBzeW5jVHlwZSA9PSAiY29sZC1zdGFydCIgdGhlbgogICAgc2VsZi5jb2xkU3RhcnRTeW5jVHJpZ2dlcmVkID0gdHJ1ZQogICAgc2VsZi5sYXN0UGVyaW9kaWNTeW5jID0gbm93CiAgICBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID0gMAogIGVsc2VpZiBzeW5jVHlwZSA9PSAicGVyaW9kaWMiIHRoZW4KICAgIHNlbGYubGFzdFBlcmlvZGljU3luYyA9IG5vdwogICAgc2VsZi5ldmVudFN5bmNTY2hlZHVsZWRBdCA9IDAKICBlbHNlIC0tIGV2ZW50LWRyaXZlbgogICAgc2VsZi5ldmVudFN5bmNTY2hlZHVsZWRBdCA9IDAKICAgIHNlbGYubGFzdFBlcmlvZGljU3luYyA9IG5vdwogIGVuZAplbmQKYGBgCgojIyMgQXV0by1TeW5jIEluaXRpYWxpemF0aW9uCgpgYGBzcGFjZS1sdWEKLS0gSW5pdGlhbGl6ZSBhdXRvLXN5bmMgY29uZmlndXJhdGlvbgpsb2NhbCBwZXJpb2RpY1N5bmNNaW51dGVzID0gY29uZmlnLmdldCgiZ2l0LmF1dG9TeW5jIikKaWYgcGVyaW9kaWNTeW5jTWludXRlcyB0aGVuCiAgcHJpbnQoIkVuYWJsaW5nIHBlcmlvZGljIGdpdCBhdXRvIHN5bmMgZXZlcnkgIiAuLiBwZXJpb2RpY1N5bmNNaW51dGVzIC4uICIgbWludXRlcyIpCmVuZApgYGAKCiMjIEV2ZW50IExpc3RlbmVycwoKIyMjIFBhZ2UgU2F2ZSBFdmVudCBMaXN0ZW5lcgoKYGBgc3BhY2UtbHVhCi0tIEZJWEVEIEVWRU5UIExJU1RFTkVSUyAocmVtb3ZlIHVubmVjZXNzYXJ5IGxvY2sgY2hlY2tzKQpldmVudC5saXN0ZW4gewogIG5hbWUgPSAicGFnZTpzYXZlZCIsCiAgcnVuID0gZnVuY3Rpb24oZXZlbnQpCiAgICAtLSDinIUg56e76Zmk6ZSB5qOA5p+l77yM6K6p5qC45b+D5Ye95pWw5aSE55CG5LqS5palCiAgICBwcmludCgiUGFnZSAnIiAuLiBldmVudC5uYW1lIC4uICInIHNhdmVkLiBTY2hlZHVsaW5nIGdpdCBzeW5jIGluICIgLi4gQXV0b1N5bmNNYW5hZ2VyLmV2ZW50U3luY0RlbGF5U2Vjb25kcy82MCAuLiAiIG1pbnV0ZXMuIikKICAgIEF1dG9TeW5jTWFuYWdlci5ldmVudFN5bmNTY2hlZHVsZWRBdCA9IG9zLnRpbWUoKQogIGVuZAp9CnByaW50KCJFdmVudC1kcml2ZW4gZ2l0IHN5bmMgZW5hYmxlZCAob24gcGFnZSBzYXZlKS4iKQpgYGAKCiMjIyBDcm9uIEV2ZW50IExpc3RlbmVyCgpgYGBzcGFjZS1sdWEKZXZlbnQubGlzdGVuIHsKICBuYW1lID0gImNyb246c2Vjb25kUGFzc2VkIiwKICBydW4gPSBmdW5jdGlvbigpCiAgICAtLSDinIUg566A5YyW6YC76L6R77yM6K6p5qC45b+D5Ye95pWw5aSE55CG6ZSBCiAgICBsb2NhbCBzeW5jVHlwZSA9IEF1dG9TeW5jTWFuYWdlcjpzaG91bGRUcmlnZ2VyU3luYygpCgogICAgaWYgc3luY1R5cGUgdGhlbgogICAgICBwcmludCgiPT09ICIgLi4gc3luY1R5cGUgLi4gIiBzeW5jIHRyaWdnZXIgZGV0ZWN0ZWQgPT09IikgLS0g5re75Yqg6LCD6K+V5L+h5oGvCgogICAgICAtLSBVcGRhdGUgc3luYyBzdGF0ZQogICAgICBBdXRvU3luY01hbmFnZXI6dXBkYXRlU3luY1N0YXRlKHN5bmNUeXBlKQoKICAgICAgLS0gRXhlY3V0ZSBzeW5jIChsb2NraW5nIGhhbmRsZWQgaW50ZXJuYWxseSBieSBnaXQuc3luYykKICAgICAgaWYgc3luY1R5cGUgPT0gImNvbGQtc3RhcnQiIHRoZW4KICAgICAgICBwcmludCgiPT09IENvbGQgU3RhcnQgU3luYyBUcmlnZ2VyZWQgPT09IikKICAgICAgICBwcmludCgiVXB0aW1lOiIsIG9zLnRpbWUoKSAtIEF1dG9TeW5jTWFuYWdlci5zdGFydHVwVGltZSwgInNlY29uZHMiKQogICAgICAgIEF1dG9TeW5jTWFuYWdlcjpwZXJmb3JtQXV0b1N5bmMoIlN0YXJ0dXAiKQogICAgICBlbHNlaWYgc3luY1R5cGUgPT0gInBlcmlvZGljIiB0aGVuCiAgICAgICAgQXV0b1N5bmNNYW5hZ2VyOnBlcmZvcm1BdXRvU3luYygiUGVyaW9kaWMiKQogICAgICBlbHNlIC0tIGV2ZW50LWRyaXZlbgogICAgICAgIEF1dG9TeW5jTWFuYWdlcjpwZXJmb3JtQXV0b1N5bmMoIkV2ZW50LWRyaXZlbiIpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kCn0KYGBg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAM17AAAAAAAAAAAAAAAA8L8"
				],
				[
					58,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAXeAAALS0tCmdpdGh1YlVybDogImh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0NoZW5aaHUtWGllLzFlYjRiNzY0NDc0YTJiMGNkOTRhMzUxOTY5ZDJlNWJiIgotLS0KI21ldGEKClRoaXMgbGlicmFyeSBhZGRzIGEgYmFzaWMgZ2l0IHN5bmNocm9uaXphdGlvbiBmdW5jdGlvbmFsaXR5IHRvIFNpbHZlckJ1bGxldC4gSXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBzdWNjZXNzb3IgdG8gW3NpbHZlcmJ1bGxldC1naXRdKGh0dHBzOi8vZ2l0aHViLmNvbS9zaWx2ZXJidWxsZXRtZC9zaWx2ZXJidWxsZXQtZ2l0KSBpbXBsZW1lbnRlZCBpbiBTcGFjZSBMdWEuCgpUaGUgZm9sbG93aW5nIGNvbW1hbmRzIGFyZSBpbXBsZW1lbnRlZDoKCiR7d2lkZ2V0cy5jb21tYW5kQnV0dG9uKCJHaXQ6IFN5bmMiKX0KCiogQWRkcyBhbGwgZmlsZXMgaW4geW91ciBmb2xkZXIgdG8gZ2l0CiogQ29tbWl0cyB0aGVtIHdpdGggdGhlIGRlZmF1bHQgIlNuYXBzaG90IiBjb21taXQgbWVzc2FnZQoqIGBnaXQgcHVsbGBzIGNoYW5nZXMgZnJvbSB0aGUgcmVtb3RlIHNlcnZlcgoqIGBnaXQgcHVzaGBlcyBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgc2VydmVyCgoke3dpZGdldHMuY29tbWFuZEJ1dHRvbigiR2l0OiBDb21taXQiKX0KCiogQXNrcyB5b3UgZm9yIGEgY29tbWl0IG1lc3NhZ2UKKiBDb21taXRzCgojIENvbmZpZ3VyYXRpb24KVGhlcmUgaXMgY3VycmVudGx5IG9ubHkgYSBzaW5nbGUgY29uZmlndXJhdGlvbiBvcHRpb246IGBnaXQuYXV0b1N5bmNgLiBXaGVuIHNldCwgdGhlIGBHaXQ6IFN5bmNgIGNvbW1hbmQgd2lsbCBiZSBydW4gZXZlcnkgX3hfIG1pbnV0ZXMuCgpFeGFtcGxlIGNvbmZpZ3VyYXRpb246CmBgYGx1YQpjb25maWcuc2V0KCJnaXQuYXV0b1N5bmMiLCA1KQpgYGAKCiMgSW1wbGVtZW50YXRpb24KVGhlIGZ1bGwgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBpbnRlZ3JhdGlvbiBmb2xsb3dzLgoKIyMgQ29uZmlndXJhdGlvbgpgYGBzcGFjZS1sdWEKLS0gcHJpb3JpdHk6IDEwMApjb25maWcuZGVmaW5lKCJnaXQiLCB7CiAgdHlwZSA9ICJvYmplY3QiLAogIHByb3BlcnRpZXMgPSB7CiAgICBhdXRvU3luYyA9IHNjaGVtYS5udW1iZXIoKQogIH0KfSkKYGBgCgojIyBDb3JlIFV0aWxpdGllcyBhbmQgR2l0IE9wZXJhdGlvbnMKCiMjIyBCYXNlIFV0aWxpdGllcyBhbmQgR2l0IE9wZXJhdGlvbnMKCmBgYHNwYWNlLWx1YQotLSBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgY29uc2lzdGVudCBlcnJvciBoYW5kbGluZwpsb2NhbCBmdW5jdGlvbiBleGVjdXRlR2l0Q29tbWFuZChjb21tYW5kLCBhcmdzLCBvcGVyYXRpb24pCiAgcHJpbnQoIj09PSBleGVjdXRlR2l0Q29tbWFuZCBERUJVRyBTVEFSVCA9PT0iKQogIHByaW50KCJjb21tYW5kOiIsIGNvbW1hbmQpCiAgcHJpbnQoImFyZ3M6IiwgdGFibGUuY29uY2F0KGFyZ3Mgb3Ige30sICIgIikpCiAgcHJpbnQoIm9wZXJhdGlvbjoiLCBvcGVyYXRpb24pCgogIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgIHJldHVybiBzaGVsbC5ydW4oY29tbWFuZCwgYXJncykKICBlbmQpCgogIHByaW50KCJwY2FsbCBzdWNjZXNzOiIsIHN1Y2Nlc3MpCiAgcHJpbnQoInJlc3VsdCB0eXBlOiIsIHR5cGUocmVzdWx0KSkKCiAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgcHJpbnQoIj09PSBUYWJsZSBjb250ZW50cyA9PT0iKQogICAgZm9yIGssIHYgaW4gcGFpcnMocmVzdWx0KSBkbwogICAgICBwcmludCgiICAiIC4uIHRvc3RyaW5nKGspIC4uICI6IiwgdG9zdHJpbmcodikpCiAgICBlbmQKICAgIHByaW50KCI9PT0gRW5kIHRhYmxlID09PSIpCiAgZWxzZQogICAgcHJpbnQoInJlc3VsdCB2YWx1ZToiLCB0b3N0cmluZyhyZXN1bHQpKQogIGVuZAoKICBpZiBub3Qgc3VjY2VzcyB0aGVuCiAgICBsb2NhbCBlcnJvck1zZyA9IHRvc3RyaW5nKHJlc3VsdCBvciAiVW5rbm93biBlcnJvciIpCiAgICBwcmludCgicGNhbGwgZmFpbGVkLCByZXR1cm5pbmc6Iiwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiAiIC4uIGVycm9yTXNnKQogICAgcmV0dXJuIGZhbHNlLCBvcGVyYXRpb24gLi4gIiBmYWlsZWQ6ICIgLi4gZXJyb3JNc2cKICBlbmQKCiAgaWYgcmVzdWx0ID09IG5pbCB0aGVuCiAgICBwcmludCgicmVzdWx0IGlzIG5pbCwgcmV0dXJuaW5nIGVycm9yIikKICAgIHJldHVybiBmYWxzZSwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiBObyByZXN1bHQgcmV0dXJuZWQgZnJvbSBnaXQgY29tbWFuZCIKICBlbmQKCiAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgbG9jYWwgb3V0ID0gIiIKICAgIGxvY2FsIGV4aXRDb2RlID0gcmVzdWx0LmNvZGUgb3IgMAoKICAgIHByaW50KCJleGl0Q29kZToiLCBleGl0Q29kZSkKICAgIHByaW50KCJyZXN1bHQuc3Rkb3V0OiIsIHRvc3RyaW5nKHJlc3VsdC5zdGRvdXQpKQogICAgcHJpbnQoInJlc3VsdC5zdGRlcnI6IiwgdG9zdHJpbmcocmVzdWx0LnN0ZGVycikpCgogICAgaWYgcmVzdWx0LnN0ZGVyciBhbmQgcmVzdWx0LnN0ZGVyciB+PSAiIiB0aGVuCiAgICAgIG91dCA9IHJlc3VsdC5zdGRlcnIKICAgIGVsc2VpZiByZXN1bHQuc3Rkb3V0IGFuZCByZXN1bHQuc3Rkb3V0IH49ICIiIHRoZW4KICAgICAgb3V0ID0gcmVzdWx0LnN0ZG91dAogICAgZWxzZQogICAgICBvdXQgPSAiR2l0IGNvbW1hbmQgY29tcGxldGVkIHdpdGggbm8gb3V0cHV0IgogICAgZW5kCgogICAgcHJpbnQoImZpbmFsIG91dDoiLCBvdXQpCgogICAgaWYgZXhpdENvZGUgfj0gMCB0aGVuCiAgICAgIHByaW50KCJyZXR1cm5pbmcgZmFsc2UgZHVlIHRvIG5vbi16ZXJvIGV4aXQgY29kZSIpCiAgICAgIHJldHVybiBmYWxzZSwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiAiIC4uIG91dAogICAgZWxzZQogICAgICBwcmludCgicmV0dXJuaW5nIHRydWUgd2l0aCBvdXRwdXQ6Iiwgb3V0KQogICAgICByZXR1cm4gdHJ1ZSwgb3V0CiAgICBlbmQKICBlbHNlaWYgdHlwZShyZXN1bHQpID09ICJzdHJpbmciIHRoZW4KICAgIHByaW50KCJyZXN1bHQgaXMgc3RyaW5nLCByZXR1cm5pbmc6IiwgcmVzdWx0KQogICAgcmV0dXJuIHRydWUsIHJlc3VsdAogIGVsc2VpZiB0eXBlKHJlc3VsdCkgPT0gIm51bWJlciIgdGhlbgogICAgcHJpbnQoInJlc3VsdCBpcyBudW1iZXI6IiwgcmVzdWx0KQogICAgaWYgcmVzdWx0IH49IDAgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIG9wZXJhdGlvbiAuLiAiIGZhaWxlZCB3aXRoIGV4aXQgY29kZTogIiAuLiB0b3N0cmluZyhyZXN1bHQpCiAgICBlbHNlCiAgICAgIHJldHVybiB0cnVlLCBvcGVyYXRpb24gLi4gIiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IgogICAgZW5kCiAgZWxzZQogICAgcHJpbnQoInJlc3VsdCBpcyBvdGhlciB0eXBlLCByZXR1cm5pbmc6IiwgdG9zdHJpbmcocmVzdWx0KSkKICAgIHJldHVybiB0cnVlLCBvcGVyYXRpb24gLi4gIiBjb21wbGV0ZWQ6ICIgLi4gdG9zdHJpbmcocmVzdWx0KQogIGVuZAoKICBwcmludCgiPT09IGV4ZWN1dGVHaXRDb21tYW5kIERFQlVHIEVORCA9PT0iKQplbmQKCi0tIE5vdGlmaWNhdGlvbiBtYW5hZ2VyIGZvciBjb25zaXN0ZW50IG1lc3NhZ2luZwpsb2NhbCBOb3RpZmljYXRpb25NYW5hZ2VyID0gewogIG1lc3NhZ2VzID0gewogICAgR0lUX0xPQ0tfV0FSTklORyA9ICJHaXQgb3BlcmF0aW9uICclcycgaXMgYWxyZWFkeSBydW5uaW5nLiBQbGVhc2Ugd2FpdC4iLAogICAgQ09NTUlUX1NUQVJUID0gIkNvbW1pdHRpbmcgbG9jYWwgY2hhbmdlcy4uLiIsCiAgICBDT01NSVRfU1RFUCA9ICJTdGVwIDEvMzogQ29tbWl0dGluZyBsb2NhbCBjaGFuZ2VzLi4uIiwKICAgIFBVTExfU1RFUCA9ICJTdGVwIDIvMzogUHVsbGluZyBmcm9tIHJlbW90ZS4uLiIsCiAgICBQVVNIX1NURVAgPSAiU3RlcCAzLzM6IFB1c2hpbmcgdG8gcmVtb3RlLi4uIiwKICAgIFNZTkNfU1VDQ0VTUyA9ICJHaXQgc3luYyBzdWNjZXNzZnVsLiIsCiAgICBTWU5DX01BTlVBTF9TVEFSVCA9ICJTdGFydGluZyBtYW51YWwgR2l0IHN5bmMuLi4iLAogICAgU1lOQ19NQU5VQUxfQ09NUExFVEUgPSAiTWFudWFsIEdpdCBzeW5jIGNvbXBsZXRlISIsCiAgICBOT1RISU5HX1RPX0NPTU1JVCA9ICJObyBjaGFuZ2VzIHRvIGNvbW1pdCIsCiAgICBGT1JDRV9QVVNIX1NUQVJUID0gIlN0YXJ0aW5nIGZvcmNlIHB1c2ggcHJvY2Vzcy4uLiIsCiAgICBGT1JDRV9QVUxMX1NUQVJUID0gIlN0YXJ0aW5nIGZvcmNlIHB1bGwgcHJvY2Vzcy4uLiIsCiAgICBBVVRPX1NZTkNfVFJJR0dFUiA9ICJUcmlnZ2VyaW5nICVzIEdpdCBzeW5jLi4uIiwKICAgIEFVVE9fU1lOQ19DT01QTEVURSA9ICIlczogR2l0IHN5bmMgY29tcGxldGUuIiwKICAgIEFVVE9fU1lOQ19QVUxMX09OTFkgPSAiJXM6IEdpdCBwdWxsIGNvbXBsZXRlLiIsCiAgICBDT01NSVRfU1VDQ0VTUyA9ICJDb21taXQgc3VjY2Vzc2Z1bCEiLAogICAgTk9USElOR19UT19DT01NSVRfQ0xFQU4gPSAiTm90aGluZyB0byBjb21taXQ6IHdvcmtpbmcgdHJlZSBpcyBjbGVhbi4iLAogICAgR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUyA9ICJBbm90aGVyIGdpdCBvcGVyYXRpb24gaXMgaW4gcHJvZ3Jlc3MiCiAgfQp9CgpmdW5jdGlvbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3cobWVzc2FnZUtleSwgbGV2ZWwsIC4uLikKICBsb2NhbCB0ZW1wbGF0ZSA9IHNlbGYubWVzc2FnZXNbbWVzc2FnZUtleV0gb3IgbWVzc2FnZUtleQogIGxvY2FsIG1lc3NhZ2UgPSBzdHJpbmcuZm9ybWF0KHRlbXBsYXRlLCAuLi4pCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKG1lc3NhZ2UsIGxldmVsIG9yICJpbmZvIikKZW5kCgpmdW5jdGlvbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dFcnJvcihtZXNzYWdlS2V5LCAuLi4pCiAgc2VsZjpzaG93KG1lc3NhZ2VLZXksICJlcnJvciIsIC4uLikKZW5kCgpmdW5jdGlvbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dJbmZvKG1lc3NhZ2VLZXksIC4uLikKICBzZWxmOnNob3cobWVzc2FnZUtleSwgImluZm8iLCAuLi4pCmVuZAoKZnVuY3Rpb24gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZyhtZXNzYWdlS2V5LCAuLi4pCiAgc2VsZjpzaG93KG1lc3NhZ2VLZXksICJ3YXJuaW5nIiwgLi4uKQplbmQKCi0tIFNpbXBsZSBtZW1vcnkgbG9jayBtZWNoYW5pc20gZm9yIFNCIGludGVybmFsIGdpdCBvcGVyYXRpb25zCmlmIG5vdCBfRyB0aGVuCiAgZ2l0TG9jayA9IHsKICAgIGlzTG9ja2VkID0gZmFsc2UsCiAgICBjdXJyZW50T3BlcmF0aW9uID0gIiIKICB9CgogIGFjcXVpcmVHaXRMb2NrID0gZnVuY3Rpb24ob3BlcmF0aW9uTmFtZSkKICAgIGlmIGdpdExvY2suaXNMb2NrZWQgdGhlbgogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dXYXJuaW5nKCJHSVRfTE9DS19XQVJOSU5HIiwgZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uKQogICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAoKICAgIGdpdExvY2suaXNMb2NrZWQgPSB0cnVlCiAgICBnaXRMb2NrLmN1cnJlbnRPcGVyYXRpb24gPSBvcGVyYXRpb25OYW1lCiAgICByZXR1cm4gdHJ1ZQogIGVuZAoKICByZWxlYXNlR2l0TG9jayA9IGZ1bmN0aW9uKCkKICAgIGdpdExvY2suaXNMb2NrZWQgPSBmYWxzZQogICAgZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uID0gIiIKICBlbmQKZWxzZQogIF9HLmdpdExvY2sgPSB7CiAgICBpc0xvY2tlZCA9IGZhbHNlLAogICAgY3VycmVudE9wZXJhdGlvbiA9ICIiCiAgfQoKICBfRy5hY3F1aXJlR2l0TG9jayA9IGZ1bmN0aW9uKG9wZXJhdGlvbk5hbWUpCiAgICBpZiBfRy5naXRMb2NrLmlzTG9ja2VkIHRoZW4KICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZygiR0lUX0xPQ0tfV0FSTklORyIsIF9HLmdpdExvY2suY3VycmVudE9wZXJhdGlvbikKICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBfRy5naXRMb2NrLmlzTG9ja2VkID0gdHJ1ZQogICAgX0cuZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uID0gb3BlcmF0aW9uTmFtZQogICAgcmV0dXJuIHRydWUKICBlbmQKCiAgX0cucmVsZWFzZUdpdExvY2sgPSBmdW5jdGlvbigpCiAgICBfRy5naXRMb2NrLmlzTG9ja2VkID0gZmFsc2UKICAgIF9HLmdpdExvY2suY3VycmVudE9wZXJhdGlvbiA9ICIiCiAgZW5kCgogIC0tIEFsc28gY3JlYXRlIGxvY2FsIHJlZmVyZW5jZXMgZm9yIGNvbnNpc3RlbmN5CiAgZ2l0TG9jayA9IF9HLmdpdExvY2sKICBhY3F1aXJlR2l0TG9jayA9IF9HLmFjcXVpcmVHaXRMb2NrCiAgcmVsZWFzZUdpdExvY2sgPSBfRy5yZWxlYXNlR2l0TG9jawplbmQKCi0tIEdpdCBvcGVyYXRpb24gaGFuZGxlcnMgKGxvdy1sZXZlbCBvcGVyYXRpb25zLCBubyBsb2NrcykKbG9jYWwgR2l0T3BlcmF0aW9ucyA9IHt9CgpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLmFkZEZpbGVzKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsiYWRkIiwgIi4vKiJ9LCAiR2l0IGFkZCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5jb21taXRDaGFuZ2VzKG1lc3NhZ2UpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7ImNvbW1pdCIsICItYSIsICItbSIsIG1lc3NhZ2V9LCAiR2l0IGNvbW1pdCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5wdWxsQ2hhbmdlcygpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7InB1bGwiLCAib3JpZ2luIiwgIm1haW4ifSwgIkdpdCBwdWxsIikKZW5kCgpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLnB1c2hDaGFuZ2VzKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicHVzaCIsICJvcmlnaW4iLCAibWFpbiJ9LCAiR2l0IHB1c2giKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuZmV0Y2hGcm9tUmVtb3RlKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsiZmV0Y2giLCAib3JpZ2luIn0sICJHaXQgZmV0Y2giKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucmVzZXRIYXJkKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicmVzZXQiLCAiLS1oYXJkIiwgIm9yaWdpbi9tYWluIn0sICJHaXQgcmVzZXQiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuY2xlYW5VbnRyYWNrZWQoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJjbGVhbiIsICItZmQifSwgIkdpdCBjbGVhbiIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5nZXRSZW1vdGVVcmwoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJyZW1vdGUiLCAiZ2V0LXVybCIsICJvcmlnaW4ifSwgIkdpdCBnZXQgcmVtb3RlIFVSTCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5yZW1vdmVHaXREaXJlY3RvcnkoKQogIC0tIFRyeSBXaW5kb3dzIGZpcnN0CiAgbG9jYWwgd2luU3VjY2Vzcywgd2luUmVzdWx0ID0gZXhlY3V0ZUdpdENvbW1hbmQoImNtZCIsIHsiL2MiLCAicmQiLCAiL3MiLCAiL3EiLCAiLmdpdCJ9LCAiUmVtb3ZlIC5naXQgZGlyZWN0b3J5IChXaW5kb3dzKSIpCiAgaWYgd2luU3VjY2VzcyB0aGVuCiAgICByZXR1cm4gdHJ1ZSwgIldpbmRvd3MiCiAgZW5kCgogIC0tIFRyeSBVbml4L0xpbnV4CiAgbG9jYWwgbGludXhTdWNjZXNzLCBsaW51eFJlc3VsdCA9IGV4ZWN1dGVHaXRDb21tYW5kKCJybSIsIHsiLXJmIiwgIi5naXQifSwgIlJlbW92ZSAuZ2l0IGRpcmVjdG9yeSAoVW5peC9MaW51eCkiKQogIGlmIGxpbnV4U3VjY2VzcyB0aGVuCiAgICByZXR1cm4gdHJ1ZSwgIlVuaXgvTGludXgiCiAgZW5kCgogIHJldHVybiBmYWxzZSwgIkZhaWxlZCB0byBkZWxldGUgLmdpdCBkaXJlY3Rvcnkgb24gYm90aCBXaW5kb3dzIGFuZCBVbml4L0xpbnV4IHN5c3RlbXMiCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5pbml0UmVwb3NpdG9yeSgpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7ImluaXQiLCAiLWIiLCAibWFpbiJ9LCAiR2l0IGluaXQiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuYWRkUmVtb3RlT3JpZ2luKHJlbW90ZVVybCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicmVtb3RlIiwgImFkZCIsICJvcmlnaW4iLCByZW1vdGVVcmx9LCAiR2l0IGFkZCByZW1vdGUiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuZm9yY2VQdXNoKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicHVzaCIsICItLWZvcmNlIiwgIm9yaWdpbiIsICJtYWluIn0sICJHaXQgZm9yY2UgcHVzaCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5oYW5kbGVQdXNoRXJyb3IoZXJyb3JNZXNzYWdlLCBpc0NvbGRTdGFydCkKICBsb2NhbCBmb3JtYXR0ZWRFcnJvciA9IGVycm9yTWVzc2FnZTpnc3ViKCJeR2l0IHB1c2ggZmFpbGVkOiIsICJPbmx5IHB1c2ggZmFpbGVkOiIpCgogIGxvY2FsIHN5bmNSZXN1bHRNZXNzYWdlID0gIk9ubHkgcHVzaCBmYWlsZWQiCiAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZyhzeW5jUmVzdWx0TWVzc2FnZSAuLiAiOiAiIC4uIGZvcm1hdHRlZEVycm9yKQogIHJldHVybiB0cnVlLCBzeW5jUmVzdWx0TWVzc2FnZQplbmQKYGBgCgojIyBHaXQgQ29uZmlndXJhdGlvbiBWYWxpZGF0b3IKCmBgYHNwYWNlLWx1YQotLSBHaXRDb25maWdWYWxpZGF0b3IKaWYgbm90IEdpdENvbmZpZ1ZhbGlkYXRvciB0aGVuCiAgR2l0Q29uZmlnVmFsaWRhdG9yID0gewogICAgZXhwZWN0ZWRDb25maWcgPSB7CiAgICAgIHVzZXJOYW1lID0gIlhjeiIsCiAgICAgIHVzZXJFbWFpbCA9ICIyOTQzMDI3MDRAcXEuY29tIiwKICAgICAgY3JlZGVudGlhbEhlbHBlciA9ICJzdG9yZSIsCiAgICAgIHB1bGxSZWJhc2UgPSAiZmFsc2UiLAogICAgICBwdXNoQXV0b1JlbW90ZSA9ICJ0cnVlIgogICAgfQogIH0KCiAgZnVuY3Rpb24gR2l0Q29uZmlnVmFsaWRhdG9yOmV4ZWN1dGVDb21tYW5kKGNvbW1hbmQsIGFyZ3MsIHN1cHByZXNzT3V0cHV0KQogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICByZXR1cm4gc2hlbGwucnVuKGNvbW1hbmQsIGFyZ3MpCiAgICBlbmQpCgogICAgaWYgbm90IHN1Y2Nlc3MgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIG5pbAogICAgZW5kCgogICAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgICBsb2NhbCBvdXRwdXQgPSByZXN1bHQuc3Rkb3V0IG9yICIiCiAgICAgIGxvY2FsIGV4aXRDb2RlID0gcmVzdWx0LmNvZGUgb3IgMAogICAgICBpZiBleGl0Q29kZSA9PSAwIHRoZW4KICAgICAgICBsb2NhbCBmdW5jdGlvbiBzYWZlX3RyaW0ocykKICAgICAgICAgIGlmIG5vdCBzIG9yIHMgPT0gIiIgdGhlbgogICAgICAgICAgICByZXR1cm4gIiIgIC0tIOepuuWtl+espuS4suebtOaOpei/lOWbngogICAgICAgICAgZW5kCiAgICAgICAgICByZXR1cm4gczpnc3ViKCIlcyskIiwgIiIpCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIHRydWUsIHNhZmVfdHJpbShvdXRwdXQpCiAgICAgIGVsc2UKICAgICAgICByZXR1cm4gZmFsc2UsIHJlc3VsdC5zdGRlcnIgb3IgIiIKICAgICAgZW5kCiAgICBlbmQKCiAgICByZXR1cm4gc3VjY2VzcywgcmVzdWx0CiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjpnZXRPcmlnaW5VcmxGcm9tSW5pdFNjcmlwdCgpCiAgICAtLSBGaXJzdCwgdHJ5IHRvIGdldCB0aGUgVVJMIGZyb20gZXhpc3RpbmcgZ2l0IGNvbmZpZyB1c2luZyBHaXRPcGVyYXRpb25zCiAgICBpZiBHaXRPcGVyYXRpb25zIGFuZCBHaXRPcGVyYXRpb25zLmdldFJlbW90ZVVybCB0aGVuCiAgICAgIGxvY2FsIHVybFN1Y2Nlc3MsIHVybFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuZ2V0UmVtb3RlVXJsKCkKCiAgICAgIGlmIHVybFN1Y2Nlc3MgYW5kIHVybFJlc3VsdCBhbmQgdXJsUmVzdWx0IH49ICIiIHRoZW4KICAgICAgICAtLSBDbGVhbiB1cCB0aGUgVVJMIChyZW1vdmUgcXVvdGVzLCB0cmFpbGluZyB3aGl0ZXNwYWNlKQogICAgICAgIGxvY2FsIGNsZWFuVXJsID0gdXJsUmVzdWx0OmdzdWIoIiVzKyIsICIiKQogICAgICAgIGlmIGNsZWFuVXJsIH49ICIiIHRoZW4KICAgICAgICAgIHJldHVybiBjbGVhblVybAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAoKICAgIC0tIElmIG5vIHJlbW90ZSBVUkwgZm91bmQgaW4gZ2l0IGNvbmZpZywgdHJ5IHRvIHJlYWQgZnJvbSBpbml0IHNjcmlwdAogICAgbG9jYWwgcGF0aHMgPSB7Ii4uL2luaXQuc2giLCAiLi4vaW5pdC5iYXQiLCAiLi4vaW5pdC5jbWQifQoKICAgIGZvciBfLCBwYXRoIGluIGlwYWlycyhwYXRocykgZG8KICAgICAgbG9jYWwgc3VjY2VzcywgY29udGVudCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihwYXRoLCAiciIpCiAgICAgICAgaWYgZmlsZSB0aGVuCiAgICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYWxsIikKICAgICAgICAgIGZpbGU6Y2xvc2UoKQogICAgICAgICAgcmV0dXJuIGNvbnRlbnQKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gbmlsCiAgICAgIGVuZCkKCiAgICAgIGlmIHN1Y2Nlc3MgYW5kIGNvbnRlbnQgdGhlbgogICAgICAgIC0tIExvb2sgZm9yIEdpdEh1YiBVUkwgcGF0dGVybnMgaW4gdGhlIHNjcmlwdAogICAgICAgIGxvY2FsIHBhdHRlcm5zID0gewogICAgICAgICAgImh0dHBzOi8vW14lc10rQGdpdGh1YiUuY29tL1teJXNdKyIsCiAgICAgICAgICAiZ2l0QGdpdGh1YiUuY29tOlteJXNdKyIsCiAgICAgICAgICAiaHR0cHM6Ly9naXRodWIlLmNvbS9bXiVzXSsiCiAgICAgICAgfQoKICAgICAgICBmb3IgXywgcGF0dGVybiBpbiBpcGFpcnMocGF0dGVybnMpIGRvCiAgICAgICAgICBsb2NhbCB1cmwgPSBjb250ZW50Om1hdGNoKHBhdHRlcm4pCiAgICAgICAgICBpZiB1cmwgdGhlbgogICAgICAgICAgICAtLSBDbGVhbiB1cCB0aGUgVVJMIChyZW1vdmUgcXVvdGVzLCB0cmFpbGluZyBjaGFyYWN0ZXJzKQogICAgICAgICAgICB1cmwgPSB1cmw6Z3N1YigiW1wiJ2BdIiwgIiIpOmdzdWIoIlslcyVjXSskIiwgIiIpCiAgICAgICAgICAgIHJldHVybiB1cmwKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAoKICAgIHJldHVybiBuaWwKICBlbmQKCiAgZnVuY3Rpb24gR2l0Q29uZmlnVmFsaWRhdG9yOmlzR2l0UmVwb3NpdG9yeSgpCiAgICByZXR1cm4gc2VsZjpleGVjdXRlQ29tbWFuZCgiZ2l0IiwgeyJyZXYtcGFyc2UiLCAiLS1naXQtZGlyIn0sIHRydWUpCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjppbml0aWFsaXplUmVwb3NpdG9yeSgpCiAgICBpZiBub3Qgc2VsZjppc0dpdFJlcG9zaXRvcnkoKSB0aGVuCiAgICAgIHJldHVybiBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCB7ImluaXQiLCAiLWIiLCAibWFpbiJ9LCB0cnVlKQogICAgZW5kCiAgICByZXR1cm4gdHJ1ZQogIGVuZAoKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6Z2V0Q29uZmlnVmFsdWUoa2V5LCBzY29wZSkKICAgIGxvY2FsIGFyZ3MgPSB7ImNvbmZpZyJ9CiAgICBpZiBzY29wZSA9PSAiZ2xvYmFsIiB0aGVuCiAgICAgIHRhYmxlLmluc2VydChhcmdzLCAiLS1nbG9iYWwiKQogICAgZWxzZWlmIHNjb3BlID09ICJsb2NhbCIgdGhlbgogICAgICB0YWJsZS5pbnNlcnQoYXJncywgIi0tbG9jYWwiKQogICAgZW5kCiAgICB0YWJsZS5pbnNlcnQoYXJncywga2V5KQoKICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHNlbGY6ZXhlY3V0ZUNvbW1hbmQoImdpdCIsIGFyZ3MsIHRydWUpCiAgICByZXR1cm4gc3VjY2VzcyBhbmQgcmVzdWx0IG9yIG5pbAogIGVuZAoKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6c2V0Q29uZmlnVmFsdWUoa2V5LCB2YWx1ZSwgc2NvcGUpCiAgICBsb2NhbCBhcmdzID0geyJjb25maWcifQogICAgaWYgc2NvcGUgPT0gImdsb2JhbCIgdGhlbgogICAgICB0YWJsZS5pbnNlcnQoYXJncywgIi0tZ2xvYmFsIikKICAgIGVsc2VpZiBzY29wZSA9PSAibG9jYWwiIHRoZW4KICAgICAgdGFibGUuaW5zZXJ0KGFyZ3MsICItLWxvY2FsIikKICAgIGVuZAogICAgdGFibGUuaW5zZXJ0KGFyZ3MsIGtleSkKICAgIHRhYmxlLmluc2VydChhcmdzLCB2YWx1ZSkKCiAgICBsb2NhbCBzdWNjZXNzLCBvdXRwdXQgPSBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCBhcmdzLCB0cnVlKQoKICAgIHByaW50KCJzZXRDb25maWdWYWx1ZSBkZWJ1ZyAtIHN1Y2Nlc3M6Iiwgc3VjY2VzcywgIm91dHB1dDoiLCBvdXRwdXQgb3IgIihuaWwpIikKCiAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgLS0gQ29uc3RydWN0IHRoZSBnaXQgY29tbWFuZCBzdHJpbmcgZm9yIGRpc3BsYXkKICAgICAgbG9jYWwgZ2l0Q29tbWFuZCA9ICJnaXQgY29uZmlnIgogICAgICBpZiBzY29wZSA9PSAiZ2xvYmFsIiB0aGVuCiAgICAgICAgZ2l0Q29tbWFuZCA9IGdpdENvbW1hbmQgLi4gIiAtLWdsb2JhbCIKICAgICAgZWxzZWlmIHNjb3BlID09ICJsb2NhbCIgdGhlbgogICAgICAgIGdpdENvbW1hbmQgPSBnaXRDb21tYW5kIC4uICIgLS1sb2NhbCIKICAgICAgZW5kCiAgICAgIGdpdENvbW1hbmQgPSBnaXRDb21tYW5kIC4uICIgIiAuLiBrZXkgLi4gIiAiIC4uIHZhbHVlCgogICAgICAtLSBGbGFzaCBub3RpZmljYXRpb24gYW5kIHByaW50CiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiQ29uZmlnIHNldDogIiAuLiBnaXRDb21tYW5kLCAid2FybmluZyIpCiAgICAgIHByaW50KCJHaXQgY29uZmlnIHNldDogIiAuLiBnaXRDb21tYW5kKQogICAgZWxzZQogICAgICBwcmludCgiRmFpbGVkIHRvIHNldCBjb25maWc6Iiwga2V5LCAiPSIsIHZhbHVlLCAiRXJyb3I6Iiwgb3V0cHV0IG9yICIobm8gZXJyb3IpIikKICAgIGVuZAoKICAgIHJldHVybiBzdWNjZXNzCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjpzZXRSZW1vdGVPcmlnaW4odXJsKQogICAgLS0gRmlyc3QgdHJ5IHRvIHNldCBleGlzdGluZyBvcmlnaW4gKGxvY2FsKQogICAgbG9jYWwgc3VjY2VzcyA9IHNlbGY6ZXhlY3V0ZUNvbW1hbmQoImdpdCIsIHsicmVtb3RlIiwgInNldC11cmwiLCAib3JpZ2luIiwgdXJsfSwgdHJ1ZSkKICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCgogICAgLS0gSWYgdGhhdCBmYWlscywgdHJ5IHRvIGFkZCBuZXcgb3JpZ2luIChsb2NhbCkKICAgIHJldHVybiBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCB7InJlbW90ZSIsICJhZGQiLCAib3JpZ2luIiwgdXJsfSwgdHJ1ZSkKICBlbmQKCiAgZnVuY3Rpb24gR2l0Q29uZmlnVmFsaWRhdG9yOmNoZWNrQW5kU2V0Q29uZmlnKGtleSwgZXhwZWN0ZWRWYWx1ZSkKICAgIC0tIENoZWNrIGdsb2JhbCBmaXJzdAogICAgbG9jYWwgZ2xvYmFsVmFsdWUgPSBzZWxmOmdldENvbmZpZ1ZhbHVlKGtleSwgImdsb2JhbCIpCiAgICBpZiBnbG9iYWxWYWx1ZSA9PSBleHBlY3RlZFZhbHVlIHRoZW4KICAgICAgbG9jYWwgZ2l0Q29tbWFuZCA9ICJnaXQgY29uZmlnIiAuLiAiIC0tZ2xvYmFsIgogICAgICBnaXRDb21tYW5kID0gZ2l0Q29tbWFuZCAuLiAiICIgLi4ga2V5IC4uICIgIiAuLiBleHBlY3RlZFZhbHVlCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiQWxyZWFkeSBzZXQ6ICIgLi4gZ2l0Q29tbWFuZCwgIndhcm5pbmciKQogICAgICByZXR1cm4gdHJ1ZSAtLSBBbHJlYWR5IHNldCBpbiBnbG9iYWwsIG5vIG5lZWQgdG8gc2V0IGxvY2FsbHkKICAgIGVuZAoKICAgIC0tIENoZWNrIGxvY2FsCiAgICBsb2NhbCBsb2NhbFZhbHVlID0gc2VsZjpnZXRDb25maWdWYWx1ZShrZXksICJsb2NhbCIpCiAgICBpZiBsb2NhbFZhbHVlID09IGV4cGVjdGVkVmFsdWUgdGhlbgogICAgICBsb2NhbCBnaXRDb21tYW5kID0gImdpdCBjb25maWciIC4uICIgLS1sb2NhbCIKICAgICAgZ2l0Q29tbWFuZCA9IGdpdENvbW1hbmQgLi4gIiAiIC4uIGtleSAuLiAiICIgLi4gZXhwZWN0ZWRWYWx1ZQogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkFscmVhZHkgc2V0OiAiIC4uIGdpdENvbW1hbmQsICJ3YXJuaW5nIikKICAgICAgcmV0dXJuIHRydWUgLS0gQWxyZWFkeSBzZXQgbG9jYWxseQogICAgZW5kCgogICAgLS0gTmVpdGhlciBnbG9iYWwgbm9yIGxvY2FsIGhhcyB0aGUgZXhwZWN0ZWQgdmFsdWUsIHNldCBpdCBsb2NhbGx5CiAgICByZXR1cm4gc2VsZjpzZXRDb25maWdWYWx1ZShrZXksIGV4cGVjdGVkVmFsdWUsICJsb2NhbCIpCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjp2YWxpZGF0ZUFuZFNldHVwKCkKICAgIC0tIFN0ZXAgMTogRW5zdXJlIGdpdCByZXBvc2l0b3J5IGlzIGluaXRpYWxpemVkCiAgICBpZiBub3Qgc2VsZjppbml0aWFsaXplUmVwb3NpdG9yeSgpIHRoZW4KICAgICAgcmV0dXJuIGZhbHNlIC0tIEZhaWxlZCB0byBpbml0aWFsaXplIHJlcG9zaXRvcnkKICAgIGVuZAoKICAgIC0tIFN0ZXAgMjogQ2hlY2sgYW5kIHNldCBiYXNpYyBnaXQgY29uZmlnCiAgICBsb2NhbCBjb25maWdLZXlzID0gewogICAgICBbInVzZXIubmFtZSJdID0gc2VsZi5leHBlY3RlZENvbmZpZy51c2VyTmFtZSwKICAgICAgWyJ1c2VyLmVtYWlsIl0gPSBzZWxmLmV4cGVjdGVkQ29uZmlnLnVzZXJFbWFpbCwKICAgICAgWyJjcmVkZW50aWFsLmhlbHBlciJdID0gc2VsZi5leHBlY3RlZENvbmZpZy5jcmVkZW50aWFsSGVscGVyLAogICAgICBbInB1bGwucmViYXNlIl0gPSBzZWxmLmV4cGVjdGVkQ29uZmlnLnB1bGxSZWJhc2UsCiAgICAgIFsicHVzaC5hdXRvU2V0dXBSZW1vdGUiXSA9IHNlbGYuZXhwZWN0ZWRDb25maWcucHVzaEF1dG9SZW1vdGUKICAgIH0KCiAgICBmb3Iga2V5LCBleHBlY3RlZFZhbHVlIGluIHBhaXJzKGNvbmZpZ0tleXMpIGRvCiAgICAgIGxvY2FsIGNvbmZpZ1NldCA9IHNlbGY6Y2hlY2tBbmRTZXRDb25maWcoa2V5LCBleHBlY3RlZFZhbHVlKQogICAgICBpZiBub3QgY29uZmlnU2V0IHRoZW4KICAgICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIldhcm5pbmc6IEZhaWxlZCB0byBzZXQgY29uZmlnICIgLi4ga2V5IC4uICIgPSAiIC4uIGV4cGVjdGVkVmFsdWUsICJ3YXJuaW5nIikKICAgICAgICBwcmludCgiV2FybmluZzogRmFpbGVkIHRvIHNldCBjb25maWcgIiAuLiBrZXkgLi4gIiA9ICIgLi4gZXhwZWN0ZWRWYWx1ZSkKICAgICAgZW5kCiAgICBlbmQKCiAgICAtLSBTdGVwIDM6IENoZWNrIGFuZCBzZXQgb3JpZ2luIFVSTCAob25seSBmcm9tIGluaXQgc2NyaXB0KQogICAgbG9jYWwgY3VycmVudE9yaWdpblVybCA9IHNlbGY6Z2V0UmVtb3RlT3JpZ2luVXJsKCkKICAgIGlmIG5vdCBjdXJyZW50T3JpZ2luVXJsIG9yIGN1cnJlbnRPcmlnaW5VcmwgPT0gIiIgdGhlbgogICAgICBsb2NhbCBzY3JpcHRVcmwgPSBzZWxmOmdldE9yaWdpblVybEZyb21Jbml0U2NyaXB0KCkKICAgICAgaWYgc2NyaXB0VXJsIHRoZW4KICAgICAgICBzZWxmOnNldFJlbW90ZU9yaWdpbihzY3JpcHRVcmwpCiAgICAgIGVuZAogICAgZW5kCgogICAgcmV0dXJuIHRydWUKICBlbmQKZW5kCmBgYAoKIyMgQWR2YW5jZWQgR2l0IE9wZXJhdGlvbnMgYW5kIEFQSQoKYGBgc3BhY2UtbHVhCi0tIEludGVybmFsIGNvbW1pdCBmdW5jdGlvbiAobm8gbG9jaywgdXNlZCB3aGVuIGxvY2sgaXMgYWxyZWFkeSBhY3F1aXJlZCkKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5wZXJmb3JtQ29tbWl0SW50ZXJuYWwobWVzc2FnZSwgc2hvd1N0ZXBzLCBpc0NvbGRTdGFydCkKICBtZXNzYWdlID0gbWVzc2FnZSBvciAiU25hcHNob3QiCiAgc2hvd1N0ZXBzID0gc2hvd1N0ZXBzID09IG5pbCBhbmQgdHJ1ZSBvciBzaG93U3RlcHMKCiAgaWYgc2hvd1N0ZXBzIHRoZW4KICAgIGlmIGlzQ29sZFN0YXJ0IHRoZW4KICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93SW5mbygiQ09NTUlUX1NURVAiKQogICAgZWxzZQogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dJbmZvKCJDT01NSVRfU1RBUlQiKQogICAgZW5kCiAgZW5kCgogIC0tIFN0ZXAgMTogYWRkIGZpbGVzCiAgbG9jYWwgYWRkU3VjY2VzcywgYWRkUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5hZGRGaWxlcygpCiAgaWYgbm90IGFkZFN1Y2Nlc3MgdGhlbgogICAgcmV0dXJuIGZhbHNlLCBhZGRSZXN1bHQgIC0tIGFkZFJlc3VsdCDlt7Lnu4/mmK/lrozmlbTlrZfnrKbkuLIKICBlbmQKCiAgLS0gU3RlcCAyOiBjb21taXQgY2hhbmdlcwogIGxvY2FsIGNvbW1pdFN1Y2Nlc3MsIGNvbW1pdFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuY29tbWl0Q2hhbmdlcyhtZXNzYWdlKQogIGlmIGNvbW1pdFN1Y2Nlc3MgdGhlbgogICAgcmV0dXJuIHRydWUsIGNvbW1pdFJlc3VsdCAgLS0gY29tbWl0UmVzdWx0IOaYryBzdGRvdXTvvIzmmL7npLrlrozmlbTovpPlh7oKICBlbmQKCiAgLS0gU3RlcCAzOiBub3RoaW5nIHRvIGNvbW1pdAogIGlmIGNvbW1pdFJlc3VsdDpmaW5kKCJub3RoaW5nIHRvIGNvbW1pdCIpIHRoZW4KICAgIHJldHVybiAibm90aGluZyIsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuTk9USElOR19UT19DT01NSVRfQ0xFQU4KICBlbHNlCiAgICByZXR1cm4gZmFsc2UsIGNvbW1pdFJlc3VsdCAtLSDlrozmlbTplJnor6/kv6Hmga8KICBlbmQKZW5kCgotLSBDb3JlIGNvbW1pdCBvcGVyYXRpb24gV0lUSCBMT0NLCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdChtZXNzYWdlLCBzaG93U3RlcHMsIGlzQ29sZFN0YXJ0KQogIGxvY2FsIG5lZWRUb1JlbGVhc2VMb2NrID0gZmFsc2UKICBsb2NhbCBsb2NrT2JqID0gX0cgYW5kIF9HLmdpdExvY2sgb3IgZ2l0TG9jawogIGxvY2FsIGFjcXVpcmVGbiA9IF9HIGFuZCBfRy5hY3F1aXJlR2l0TG9jayBvciBhY3F1aXJlR2l0TG9jawogIGxvY2FsIHJlbGVhc2VGbiA9IF9HIGFuZCBfRy5yZWxlYXNlR2l0TG9jayBvciByZWxlYXNlR2l0TG9jawoKICBpZiBub3QgbG9ja09iai5pc0xvY2tlZCB0aGVuCiAgICBpZiBub3QgYWNxdWlyZUZuKCJHaXQgQ29tbWl0IikgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUwogICAgZW5kCiAgICBuZWVkVG9SZWxlYXNlTG9jayA9IHRydWUKICBlbmQKCiAgbWVzc2FnZSA9IG1lc3NhZ2Ugb3IgIlNuYXBzaG90IgogIHNob3dTdGVwcyA9IHNob3dTdGVwcyA9PSBuaWwgYW5kIHRydWUgb3Igc2hvd1N0ZXBzCgogIC0tIFN0ZXAgMTogQ29tbWl0ICjlhoXpg6jlh73mlbDkvJrlpITnkIYgYWRkICYgY29tbWl0KQogIGxvY2FsIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdEludGVybmFsKG1lc3NhZ2UsIHNob3dTdGVwcywgaXNDb2xkU3RhcnQpCgogIGlmIG5lZWRUb1JlbGVhc2VMb2NrIHRoZW4gcmVsZWFzZUZuKCkgZW5kIC0tIPCflJMKCiAgcmV0dXJuIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZQplbmQKCi0tIENvcmUgc3luYyBvcGVyYXRpb24gV0lUSCBMT0NLICh0aGlzIGlzIGEgY29yZSBmdW5jdGlvbiB0aGF0IG5lZWRzIGxvY2tpbmcpCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucGVyZm9ybVN5bmMoc2hvd1N0ZXBzLCBpc0NvbGRTdGFydCkKICBsb2NhbCBuZWVkVG9SZWxlYXNlTG9jayA9IGZhbHNlCiAgbG9jYWwgbG9ja09iaiA9IF9HIGFuZCBfRy5naXRMb2NrIG9yIGdpdExvY2sKICBsb2NhbCBhY3F1aXJlRm4gPSBfRyBhbmQgX0cuYWNxdWlyZUdpdExvY2sgb3IgYWNxdWlyZUdpdExvY2sKICBsb2NhbCByZWxlYXNlRm4gPSBfRyBhbmQgX0cucmVsZWFzZUdpdExvY2sgb3IgcmVsZWFzZUdpdExvY2sKCiAgaWYgbm90IGxvY2tPYmouaXNMb2NrZWQgdGhlbgogICAgaWYgbm90IGFjcXVpcmVGbigiR2l0IFN5bmMiKSB0aGVuCiAgICAgIHJldHVybiBmYWxzZSwgTm90aWZpY2F0aW9uTWFuYWdlci5tZXNzYWdlcy5HSVRfT1BFUkFUSU9OX0lOX1BST0dSRVNTCiAgICBlbmQKICAgIG5lZWRUb1JlbGVhc2VMb2NrID0gdHJ1ZQogIGVuZAoKICBzaG93U3RlcHMgPSBzaG93U3RlcHMgPT0gbmlsIGFuZCB0cnVlIG9yIHNob3dTdGVwcwoKICAtLSBTdGVwIDE6IGNvbW1pdAogIGxvY2FsIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdEludGVybmFsKG5pbCwgc2hvd1N0ZXBzLCB0cnVlKQogIGlmIGNvbW1pdFJlc3VsdCA9PSBmYWxzZSB0aGVuCiAgICBpZiBuZWVkVG9SZWxlYXNlTG9jayB0aGVuIHJlbGVhc2VGbigpIGVuZAogICAgcmV0dXJuIGZhbHNlLCBjb21taXRNZXNzYWdlCiAgZWxzZWlmIGNvbW1pdFJlc3VsdCA9PSAibm90aGluZyIgdGhlbgogICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZygiTk9USElOR19UT19DT01NSVRfQ0xFQU4iKQogIGVuZAoKICAtLSBTdGVwIDI6IHB1bGwKICBpZiBzaG93U3RlcHMgdGhlbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dJbmZvKCJQVUxMX1NURVAiKSBlbmQKICBsb2NhbCBwdWxsU3VjY2VzcywgcHVsbE1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLnB1bGxDaGFuZ2VzKCkKICBpZiBub3QgcHVsbFN1Y2Nlc3MgdGhlbgogICAgaWYgbmVlZFRvUmVsZWFzZUxvY2sgdGhlbiByZWxlYXNlRm4oKSBlbmQKICAgIHJldHVybiBmYWxzZSwgcHVsbE1lc3NhZ2UKICBlbmQKCiAgLS0gU3RlcCAzOiBwdXNoCiAgaWYgc2hvd1N0ZXBzIHRoZW4gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93SW5mbygiUFVTSF9TVEVQIikgZW5kCiAgbG9jYWwgcHVzaFN1Y2Nlc3MsIHB1c2hNZXNzYWdlID0gR2l0T3BlcmF0aW9ucy5wdXNoQ2hhbmdlcygpCiAgaWYgbm90IHB1c2hTdWNjZXNzIHRoZW4KICAgIGxvY2FsIGhhbmRsZWQsIG1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLmhhbmRsZVB1c2hFcnJvcihwdXNoTWVzc2FnZSwgaXNDb2xkU3RhcnQpCiAgICBpZiBuZWVkVG9SZWxlYXNlTG9jayB0aGVuIHJlbGVhc2VGbigpIGVuZAogICAgcmV0dXJuIGhhbmRsZWQsIG1lc3NhZ2UKICBlbmQKCiAgaWYgbmVlZFRvUmVsZWFzZUxvY2sgdGhlbiByZWxlYXNlRm4oKSBlbmQKICByZXR1cm4gdHJ1ZSwgTm90aWZpY2F0aW9uTWFuYWdlci5tZXNzYWdlcy5TWU5DX1NVQ0NFU1MKZW5kCgotLSBDb3JlIGZvcmNlIHB1c2ggaW5pdGlhbCBjb21taXQgV0lUSCBMT0NLCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucGVyZm9ybUZvcmNlUHVzaEluaXRpYWwoKQogIC0tIPCflJIgQUNRVUlSRSBMT0NLCiAgbG9jYWwgYWNxdWlyZUZuID0gX0cgYW5kIF9HLmFjcXVpcmVHaXRMb2NrIG9yIGFjcXVpcmVHaXRMb2NrCiAgbG9jYWwgcmVsZWFzZUZuID0gX0cgYW5kIF9HLnJlbGVhc2VHaXRMb2NrIG9yIHJlbGVhc2VHaXRMb2NrCgogIGlmIG5vdCBhY3F1aXJlRm4oIkdpdCBGb3JjZSBQdXNoIEluaXRpYWwiKSB0aGVuCiAgICByZXR1cm4gZmFsc2UsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUwogIGVuZAoKICAtLSBTdGVwIDE6IEdldCByZW1vdGUgVVJMIGZyb20gaW5pdCBzY3JpcHQgKGJlZm9yZSBkZWxldGluZyAuZ2l0KQogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RlcCAxLzY6IFJlYWRpbmcgcmVtb3RlIFVSTCBmcm9tIGluaXQgc2NyaXB0Li4uIiwgImluZm8iKQogIGxvY2FsIHJlbW90ZVVybCA9IEdpdENvbmZpZ1ZhbGlkYXRvcjpnZXRPcmlnaW5VcmxGcm9tSW5pdFNjcmlwdCgpCgogIGlmIG5vdCByZW1vdGVVcmwgb3IgcmVtb3RlVXJsID09ICIiIHRoZW4KICAgIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd1dhcm5pbmcoIk5vIHJlbW90ZSBVUkwgZm91bmQgaW4gaW5pdCBzY3JpcHQuIFBsZWFzZSBlbnRlciB0aGUgcmVtb3RlIHJlcG9zaXRvcnkgVVJMLiIpCiAgICByZW1vdGVVcmwgPSBlZGl0b3IucHJvbXB0KCJFbnRlciByZW1vdGUgcmVwb3NpdG9yeSBVUkw6IikKCiAgICBpZiBub3QgcmVtb3RlVXJsIG9yIHJlbW90ZVVybCA9PSAiIiB0aGVuCiAgICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgICAgcmV0dXJuIGZhbHNlLCAiRm9yY2UgcHVzaCBjYW5jZWxsZWQ6IG5vIHJlbW90ZSBVUkwgcHJvdmlkZWQuIgogICAgZW5kCiAgZW5kCgogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiUmVtb3RlIFVSTDogIiAuLiByZW1vdGVVcmwsICJ3YXJuaW5nIikKCiAgLS0gU3RlcCAyOiBSZW1vdmUgLmdpdCBkaXJlY3RvcnkKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMi82OiBXaXBpbmcgbG9jYWwgaGlzdG9yeS4uLiIsICJpbmZvIikKICBsb2NhbCBkZWxldGVTdWNjZXNzLCBvc1R5cGUgPSBHaXRPcGVyYXRpb25zLnJlbW92ZUdpdERpcmVjdG9yeSgpCgogIGlmIG5vdCBkZWxldGVTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgb3NUeXBlCiAgZW5kCgogIC0tIFN0ZXAgMzogUmUtaW5pdGlhbGl6ZSByZXBvc2l0b3J5IGFuZCBjb25maWd1cmUgaXQKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMy82OiBSZS1pbml0aWFsaXppbmcgcmVwb3NpdG9yeSBvbiAnbWFpbicgYnJhbmNoLi4uIiwgImluZm8iKQoKICAtLSBJbml0aWFsaXplIHJlcG9zaXRvcnkKICBsb2NhbCBpbml0U3VjY2VzcywgaW5pdFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuaW5pdFJlcG9zaXRvcnkoKQogIGlmIG5vdCBpbml0U3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIGluaXRSZXN1bHQKICBlbmQKCiAgLS0g8J+UpSBORVc6IENvbmZpZ3VyZSBnaXQgYWZ0ZXIgcmUtaW5pdGlhbGl6YXRpb24KICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkNvbmZpZ3VyaW5nIGdpdCBzZXR0aW5ncy4uLiIsICJ3YXJuaW5nIikKICBsb2NhbCBjb25maWdTdWNjZXNzLCBjb25maWdFcnIgPSBwY2FsbChmdW5jdGlvbigpCiAgICBHaXRDb25maWdWYWxpZGF0b3I6dmFsaWRhdGVBbmRTZXR1cCgpCiAgZW5kKQogIGlmIG5vdCBjb25maWdTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMgUmVsZWFzZSB0aGUgbG9jayBiZWZvcmUgcmV0dXJuaW5nCiAgICAtLSByZXR1cm4gZmFsc2UsICJHaXQgY29uZmlndXJhdGlvbiBmYWlsZWQ6ICIgLi4gdG9zdHJpbmcoY29uZmlnRXJyKQogIGVuZAoKICAtLSBTdGVwIDQ6IFJlLWxpbmsgdG8gcmVtb3RlCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDQvNjogUmUtbGlua2luZyB0byByZW1vdGUuLi4iLCAiaW5mbyIpCiAgbG9jYWwgcmVtb3RlU3VjY2VzcywgcmVtb3RlUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5hZGRSZW1vdGVPcmlnaW4ocmVtb3RlVXJsKQogIGlmIG5vdCByZW1vdGVTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgcmVtb3RlUmVzdWx0CiAgZW5kCgogIC0tIFN0ZXAgNTogQ3JlYXRlIGluaXRpYWwgY29tbWl0CiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDUvNjogQ3JlYXRpbmcgaW5pdGlhbCBjb21taXQuLi4iLCAiaW5mbyIpCiAgbG9jYWwgY29tbWl0U3VjY2VzcywgY29tbWl0TWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdEludGVybmFsKCJJbml0aWFsIENvbW1pdCIsIGZhbHNlLCBmYWxzZSkKICBpZiBjb21taXRTdWNjZXNzIH49IHRydWUgdGhlbgogICAgcmVsZWFzZUZuKCkgLS0g8J+UkwogICAgcmV0dXJuIGZhbHNlLCAiRXJyb3IgZHVyaW5nIGluaXRpYWwgY29tbWl0OiAiIC4uIGNvbW1pdE1lc3NhZ2UKICBlbmQKCiAgLS0gU3RlcCA2OiBGb3JjZSBwdXNoCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDYvNjogRm9yY2UgcHVzaGluZyB0byByZW1vdGUuLi4iLCAiaW5mbyIpCiAgbG9jYWwgcHVzaFN1Y2Nlc3MsIHB1c2hSZXN1bHQgPSBHaXRPcGVyYXRpb25zLmZvcmNlUHVzaCgpCiAgaWYgbm90IHB1c2hTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgcHVzaFJlc3VsdAogIGVuZAoKICByZWxlYXNlRm4oKSAtLSDwn5STCiAgcmV0dXJuIHRydWUsICJGb3JjZSBwdXNoIGluaXRpYWwgY29tbWl0IHN1Y2Nlc3NmdWwhIgplbmQKCi0tIENvcmUgZm9yY2UgcHVsbCBXSVRIIExPQ0sKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5wZXJmb3JtRm9yY2VQdWxsKCkKICAtLSDwn5SSIEFDUVVJUkUgTE9DSwogIGxvY2FsIGFjcXVpcmVGbiA9IF9HIGFuZCBfRy5hY3F1aXJlR2l0TG9jayBvciBhY3F1aXJlR2l0TG9jawogIGxvY2FsIHJlbGVhc2VGbiA9IF9HIGFuZCBfRy5yZWxlYXNlR2l0TG9jayBvciByZWxlYXNlR2l0TG9jawoKICBpZiBub3QgYWNxdWlyZUZuKCJHaXQgRm9yY2UgUHVsbCIpIHRoZW4KICAgIHJldHVybiBmYWxzZSwgTm90aWZpY2F0aW9uTWFuYWdlci5tZXNzYWdlcy5HSVRfT1BFUkFUSU9OX0lOX1BST0dSRVNTCiAgZW5kCgogIC0tIFN0ZXAgMTogRmV0Y2gKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMS8zOiBGZXRjaGluZyBmcm9tIHJlbW90ZS4uLiIsICJpbmZvIikKICBsb2NhbCBmZXRjaFN1Y2Nlc3MsIGZldGNoUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5mZXRjaEZyb21SZW1vdGUoKQogIGlmIG5vdCBmZXRjaFN1Y2Nlc3MgdGhlbgogICAgcmVsZWFzZUZuKCkgLS0g8J+UkwogICAgcmV0dXJuIGZhbHNlLCBmZXRjaFJlc3VsdAogIGVuZAoKICAtLSBTdGVwIDI6IFJlc2V0IGhhcmQKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMi8zOiBSZXNldHRpbmcgbG9jYWwgdG8gbWF0Y2ggcmVtb3RlLi4uIiwgImluZm8iKQogIGxvY2FsIHJlc2V0U3VjY2VzcywgcmVzZXRSZXN1bHQgPSBHaXRPcGVyYXRpb25zLnJlc2V0SGFyZCgpCiAgaWYgbm90IHJlc2V0U3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIHJlc2V0UmVzdWx0CiAgZW5kCgogIC0tIFN0ZXAgMzogQ2xlYW4gdW50cmFja2VkIGZpbGVzCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDMvMzogQ2xlYW5pbmcgdW50cmFja2VkIGZpbGVzLi4uIiwgImluZm8iKQogIGxvY2FsIGNsZWFuU3VjY2VzcywgY2xlYW5SZXN1bHQgPSBHaXRPcGVyYXRpb25zLmNsZWFuVW50cmFja2VkKCkKICBpZiBub3QgY2xlYW5TdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgY2xlYW5SZXN1bHQKICBlbmQKCiAgcmVsZWFzZUZuKCkgLS0g8J+UkwogIHJldHVybiB0cnVlLCAiRm9yY2UgcHVsbCBzdWNjZXNzZnVsISBMb2NhbCBpcyBub3cgaWRlbnRpY2FsIHRvIHJlbW90ZS4iCmVuZAoKLS0gTWFpbiBnaXQgb2JqZWN0ICh0aGVzZSBjb3JlIGZ1bmN0aW9ucyBub3cgaGFuZGxlIHRoZWlyIG93biBsb2NraW5nKQpnaXQgPSB7fQpnaXQuY29tbWl0ID0gR2l0T3BlcmF0aW9ucy5wZXJmb3JtQ29tbWl0CmdpdC5zeW5jID0gR2l0T3BlcmF0aW9ucy5wZXJmb3JtU3luYwpgYGAKCiMjIENvbW1hbmRzCgpgYGBzcGFjZS1sdWEKY29tbWFuZC5kZWZpbmUgewogIG5hbWUgPSAiR2l0OiBDb21taXQiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIGxvY2FsIG1lc3NhZ2UgPSBlZGl0b3IucHJvbXB0KCJDb21taXQgbWVzc2FnZToiKQogICAgaWYgbm90IG1lc3NhZ2UgdGhlbiByZXR1cm4gZW5kCgogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gZ2l0LmNvbW1pdChtZXNzYWdlLCB0cnVlLCBuaWwpCgogICAgaWYgc3VjY2VzcyA9PSBmYWxzZSB0aGVuCiAgICAgIC0tIOWujOaVtOmUmeivr+S/oeaBr+aYvuekugogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dFcnJvcihyZXN1bHQpCiAgICBlbHNlaWYgc3VjY2VzcyA9PSAibm90aGluZyIgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIk5vdGhpbmcgdG8gY29tbWl0OiB3b3JraW5nIHRyZWUgaXMgY2xlYW4uIiwgIndhcm5pbmciKQogICAgZWxzZQogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkNvbW1pdCBzdWNjZXNzZnVsIVxuIiAuLiByZXN1bHQsICJ3YXJuaW5nIikKICAgIGVuZAogIGVuZAp9Cgpjb21tYW5kLmRlZmluZSB7CiAgbmFtZSA9ICJHaXQ6IFN5bmMiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RhcnRpbmcgbWFudWFsIEdpdCBzeW5jLi4uIiwgIndhcm5pbmciKQoKICAgIGxvY2FsIHN1Y2Nlc3MsIG1lc3NhZ2UgPSBnaXQuc3luYyh0cnVlLCBmYWxzZSkgLS0gU2hvdyBzdGVwcywgbm90IGNvbGQgc3RhcnQKCiAgICBpZiBzdWNjZXNzID09IHRydWUgdGhlbgogICAgICBpZiBtZXNzYWdlID09ICJPbmx5IHB1c2ggZmFpbGVkIiB0aGVuCiAgICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJNYW51YWw6IEdpdCBwdWxsIGNvbXBsZXRlLiAiIC4uIG1lc3NhZ2UgLi4gIi4iLCAid2FybmluZyIpCiAgICAgIGVsc2UKICAgICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIk1hbnVhbCBHaXQgc3luYyBjb21wbGV0ZSEiLCAid2FybmluZyIpCiAgICAgIGVuZAogICAgZWxzZWlmIHN1Y2Nlc3MgPT0gIm5vdGhpbmciIHRoZW4KICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJOb3RoaW5nIHRvIGNvbW1pdDogd29ya2luZyB0cmVlIGlzIGNsZWFuLiIsICJ3YXJuaW5nIikKICAgIGVsc2UKICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93RXJyb3IobWVzc2FnZSkKICAgIGVuZAogIGVuZAp9Cgpjb21tYW5kLmRlZmluZSB7CiAgbmFtZSA9ICJHaXQ6IEZvcmNlIFB1c2ggSW5pdGlhbCBDb21taXQiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIGlmIG5vdCBlZGl0b3IuY29uZmlybSgiREFOR0VSOiBUaGlzIHdpbGwgV0lQRSB5b3VyIGVudGlyZSBHaXQgaGlzdG9yeSAobG9jYWwgYW5kIHJlbW90ZSkgYW5kIHN0YXJ0IG92ZXIuIEFyZSB5b3UgYWJzb2x1dGVseSBzdXJlPyIpIHRoZW4KICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0YXJ0aW5nIGZvcmNlIHB1c2ggcHJvY2Vzcy4uLiIsICJ3YXJuaW5nIikKCiAgICBsb2NhbCBzdWNjZXNzLCBtZXNzYWdlID0gR2l0T3BlcmF0aW9ucy5wZXJmb3JtRm9yY2VQdXNoSW5pdGlhbCgpCgogICAgaWYgc3VjY2VzcyB0aGVuCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihtZXNzYWdlLCAid2FybmluZyIpCiAgICBlbHNlCiAgICAgIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd0Vycm9yKG1lc3NhZ2UpCiAgICBlbmQKICBlbmQKfQoKY29tbWFuZC5kZWZpbmUgewogIG5hbWUgPSAiR2l0OiBGb3JjZSBQdWxsIHRvIE92ZXJ3cml0ZSBMb2NhbCIsCiAgcnVuID0gZnVuY3Rpb24oKQogICAgaWYgbm90IGVkaXRvci5jb25maXJtKCJEQU5HRVI6IFRoaXMgd2lsbCBESVNDQVJEIGFsbCBsb2NhbCBjaGFuZ2VzIGFuZCBjb21taXRzLCBtYWtpbmcgeW91ciBsb2NhbCBjb3B5IGlkZW50aWNhbCB0byB0aGUgcmVtb3RlLiBBcmUgeW91IHN1cmU/IikgdGhlbgogICAgICByZXR1cm4KICAgIGVuZAoKICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RhcnRpbmcgZm9yY2UgcHVsbCBwcm9jZXNzLi4uIiwgIndhcm5pbmciKQoKICAgIGxvY2FsIHN1Y2Nlc3MsIG1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLnBlcmZvcm1Gb3JjZVB1bGwoKQoKICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24obWVzc2FnZSwgIndhcm5pbmciKQogICAgZWxzZQogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dFcnJvcihtZXNzYWdlKQogICAgZW5kCiAgZW5kCn0KYGBgCgojIyBBdXRvLVN5bmMgU3lzdGVtCgpgYGBzcGFjZS1sdWEKLS0gcHJpb3JpdHk6IC0xCgotLSBBdXRvLXN5bmMgbWFuYWdlciAoU0lNUExJRklFRCAtIG5vIGV4cGxpY2l0IGxvY2tpbmcsIGNvcmUgZnVuY3Rpb25zIGhhbmRsZSBpdCkKbG9jYWwgQXV0b1N5bmNNYW5hZ2VyID0gewogIGxhc3RQZXJpb2RpY1N5bmMgPSAwLAogIGNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgPSBmYWxzZSwKICBzdGFydHVwVGltZSA9IG9zLnRpbWUoKSwKICBldmVudFN5bmNTY2hlZHVsZWRBdCA9IDAsCiAgZXZlbnRTeW5jRGVsYXlTZWNvbmRzID0gMTAKfQoKZnVuY3Rpb24gQXV0b1N5bmNNYW5hZ2VyOnNob3VsZFRyaWdnZXJTeW5jKCkKICBsb2NhbCBub3cgPSBvcy50aW1lKCkKICBsb2NhbCB1cHRpbWUgPSBub3cgLSBzZWxmLnN0YXJ0dXBUaW1lCiAgbG9jYWwgcGVyaW9kaWNTeW5jTWludXRlcyA9IGNvbmZpZy5nZXQoImdpdC5hdXRvU3luYyIpCgogIC0tIENvbGQgc3RhcnQgc3luYwogIGlmIHBlcmlvZGljU3luY01pbnV0ZXMgYW5kIG5vdCBzZWxmLmNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgYW5kIHVwdGltZSA+PSA1IGFuZCB1cHRpbWUgPD0gMTAgdGhlbgogICAgcmV0dXJuICJjb2xkLXN0YXJ0IgogIGVuZAoKICAtLSBQZXJpb2RpYyBzeW5jCiAgaWYgcGVyaW9kaWNTeW5jTWludXRlcyBhbmQgc2VsZi5jb2xkU3RhcnRTeW5jVHJpZ2dlcmVkIGFuZCAobm93IC0gc2VsZi5sYXN0UGVyaW9kaWNTeW5jKSAvIDYwID49IHBlcmlvZGljU3luY01pbnV0ZXMgdGhlbgogICAgcmV0dXJuICJwZXJpb2RpYyIKICBlbmQKCiAgLS0gRXZlbnQtZHJpdmVuIHN5bmMKICBpZiBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID4gMCBhbmQgKG5vdyAtIHNlbGYuZXZlbnRTeW5jU2NoZWR1bGVkQXQpID49IHNlbGYuZXZlbnRTeW5jCgo+Pj4gKipVc2VyKio6IOe7p+e7rQoKPj4+ICoqQ29waWxvdCoqOiBgYGBzcGFjZS1sdWEKLS0gcHJpb3JpdHk6IC0xCgotLSBBdXRvLXN5bmMgbWFuYWdlciAoU0lNUExJRklFRCAtIG5vIGV4cGxpY2l0IGxvY2tpbmcsIGNvcmUgZnVuY3Rpb25zIGhhbmRsZSBpdCkKbG9jYWwgQXV0b1N5bmNNYW5hZ2VyID0gewogIGxhc3RQZXJpb2RpY1N5bmMgPSAwLAogIGNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgPSBmYWxzZSwKICBzdGFydHVwVGltZSA9IG9zLnRpbWUoKSwKICBldmVudFN5bmNTY2hlZHVsZWRBdCA9IDAsCiAgZXZlbnRTeW5jRGVsYXlTZWNvbmRzID0gMTAKfQoKZnVuY3Rpb24gQXV0b1N5bmNNYW5hZ2VyOnNob3VsZFRyaWdnZXJTeW5jKCkKICBsb2NhbCBub3cgPSBvcy50aW1lKCkKICBsb2NhbCB1cHRpbWUgPSBub3cgLSBzZWxmLnN0YXJ0dXBUaW1lCiAgbG9jYWwgcGVyaW9kaWNTeW5jTWludXRlcyA9IGNvbmZpZy5nZXQoImdpdC5hdXRvU3luYyIpCgogIC0tIENvbGQgc3RhcnQgc3luYwogIGlmIHBlcmlvZGljU3luY01pbnV0ZXMgYW5kIG5vdCBzZWxmLmNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgYW5kIHVwdGltZSA+PSA1IGFuZCB1cHRpbWUgPD0gMTAgdGhlbgogICAgcmV0dXJuICJjb2xkLXN0YXJ0IgogIGVuZAoKICAtLSBQZXJpb2RpYyBzeW5jCiAgaWYgcGVyaW9kaWNTeW5jTWludXRlcyBhbmQgc2VsZi5jb2xkU3RhcnRTeW5jVHJpZ2dlcmVkIGFuZCAobm93IC0gc2VsZi5sYXN0UGVyaW9kaWNTeW5jKSAvIDYwID49IHBlcmlvZGljU3luY01pbnV0ZXMgdGhlbgogICAgcmV0dXJuICJwZXJpb2RpYyIKICBlbmQKCiAgLS0gRXZlbnQtZHJpdmVuIHN5bmMKICBpZiBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID4gMCBhbmQgKG5vdyAtIHNlbGYuZXZlbnRTeW5jU2NoZWR1bGVkQXQpID49IHNlbGYuZXZlbnRTeW5jRGVsYXlTZWNvbmRzIHRoZW4KICAgIHJldHVybiAiZXZlbnQtZHJpdmVuIgogIGVuZAoKICByZXR1cm4gbmlsCmVuZAoKZnVuY3Rpb24gQXV0b1N5bmNNYW5hZ2VyOnBlcmZvcm1BdXRvU3luYyhzeW5jVHlwZSkKICBwcmludCgiVHJpZ2dlcmluZyAiIC4uIHN5bmNUeXBlOmxvd2VyKCkgLi4gIiBnaXQgc3luYy4uLiIpCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJUcmlnZ2VyaW5nICIgLi4gc3luY1R5cGUgLi4gIiBHaXQgc3luYy4uLiIsICJ3YXJuaW5nIikKCiAgbG9jYWwgaXNDb2xkU3RhcnQgPSAoc3luY1R5cGUgPT0gIlN0YXJ0dXAiKQogIGxvY2FsIHN5bmNPaywgc3luY01lc3NhZ2UgPSBnaXQuc3luYyh0cnVlLCBpc0NvbGRTdGFydCkgLS0gQWx3YXlzIHNob3cgc3RlcHMgKHRydWUpCgogIGlmIHN5bmNPayA9PSB0cnVlIHRoZW4KICAgIGlmIHN5bmNNZXNzYWdlID09ICJPbmx5IHB1c2ggZmFpbGVkIiB0aGVuCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jVHlwZSAuLiAiOiBHaXQgcHVsbCBjb21wbGV0ZS4gIiAuLiBzeW5jTWVzc2FnZSAuLiAiLiIsICJ3YXJuaW5nIikKICAgIGVsc2UKICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKHN5bmNUeXBlIC4uICI6IEdpdCBzeW5jIGNvbXBsZXRlLiIsICJ3YXJuaW5nIikKICAgIGVuZAogICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKQogIGVsc2VpZiBzeW5jT2sgPT0gIm5vdGhpbmciIHRoZW4KICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jTWVzc2FnZSwgIndhcm5pbmciKQogICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jOiBub3RoaW5nIHRvIGNvbW1pdCIpCiAgZWxzZWlmIHN5bmNPayA9PSBmYWxzZSB0aGVuCiAgICBpZiBzeW5jTWVzc2FnZSA9PSBOb3RpZmljYXRpb25NYW5hZ2VyLm1lc3NhZ2VzLkdJVF9PUEVSQVRJT05fSU5fUFJPR1JFU1MgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oc3luY01lc3NhZ2UsICJ3YXJuaW5nIikKICAgICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jIHdhcm5pbmc6ICIgLi4gc3luY01lc3NhZ2UpCiAgICBlbHNlCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jTWVzc2FnZSwgImVycm9yIikKICAgICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jIGZhaWxlZDpcbiIgLi4gc3luY01lc3NhZ2UpCiAgICBlbmQKICBlbHNlCiAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlVua25vd24gZ2l0IHN5bmMgcmVzdWx0IiwgImVycm9yIikKICAgIHByaW50KHN5bmNUeXBlIC4uICIgc3luYyB1bmtub3duIHJlc3VsdDoiLCBzeW5jT2ssIHN5bmNNZXNzYWdlKQogIGVuZAplbmQKCmZ1bmN0aW9uIEF1dG9TeW5jTWFuYWdlcjp1cGRhdGVTeW5jU3RhdGUoc3luY1R5cGUpCiAgbG9jYWwgbm93ID0gb3MudGltZSgpCgogIGlmIHN5bmNUeXBlID09ICJjb2xkLXN0YXJ0IiB0aGVuCiAgICBzZWxmLmNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgPSB0cnVlCiAgICBzZWxmLmxhc3RQZXJpb2RpY1N5bmMgPSBub3cKICAgIHNlbGYuZXZlbnRTeW5jU2NoZWR1bGVkQXQgPSAwCiAgZWxzZWlmIHN5bmNUeXBlID09ICJwZXJpb2RpYyIgdGhlbgogICAgc2VsZi5sYXN0UGVyaW9kaWNTeW5jID0gbm93CiAgICBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID0gMAogIGVsc2UgLS0gZXZlbnQtZHJpdmVuCiAgICBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID0gMAogICAgc2VsZi5sYXN0UGVyaW9kaWNTeW5jID0gbm93CiAgZW5kCmVuZAoKLS0gSW5pdGlhbGl6ZSBhdXRvLXN5bmMgY29uZmlndXJhdGlvbgpsb2NhbCBwZXJpb2RpY1N5bmNNaW51dGVzID0gY29uZmlnLmdldCgiZ2l0LmF1dG9TeW5jIikKaWYgcGVyaW9kaWNTeW5jTWludXRlcyB0aGVuCiAgcHJpbnQoIkVuYWJsaW5nIHBlcmlvZGljIGdpdCBhdXRvIHN5bmMgZXZlcnkgIiAuLiBwZXJpb2RpY1N5bmNNaW51dGVzIC4uICIgbWludXRlcyIpCmVuZAoKLS0gRklYRUQgRVZFTlQgTElTVEVORVJTIChyZW1vdmUgdW5uZWNlc3NhcnkgbG9jayBjaGVja3MpCmV2ZW50Lmxpc3RlbiB7CiAgbmFtZSA9ICJwYWdlOnNhdmVkIiwKICBydW4gPSBmdW5jdGlvbihldmVudCkKICAgIC0tIOKchSDnp7vpmaTplIHmo4Dmn6XvvIzorqnmoLjlv4Plh73mlbDlpITnkIbkupLmlqUKICAgIHByaW50KCJQYWdlICciIC4uIGV2ZW50Lm5hbWUgLi4gIicgc2F2ZWQuIFNjaGVkdWxpbmcgZ2l0IHN5bmMgaW4gIiAuLiBBdXRvU3luY01hbmFnZXIuZXZlbnRTeW5jRGVsYXlTZWNvbmRzLzYwIC4uICIgbWludXRlcy4iKQogICAgQXV0b1N5bmNNYW5hZ2VyLmV2ZW50U3luY1NjaGVkdWxlZEF0ID0gb3MudGltZSgpCiAgZW5kCn0KcHJpbnQoIkV2ZW50LWRyaXZlbiBnaXQgc3luYyBlbmFibGVkIChvbiBwYWdlIHNhdmUpLiIpCgpldmVudC5saXN0ZW4gewogIG5hbWUgPSAiY3JvbjpzZWNvbmRQYXNzZWQiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIC0tIOKchSDnroDljJbpgLvovpHvvIzorqnmoLjlv4Plh73mlbDlpITnkIbplIEKICAgIGxvY2FsIHN5bmNUeXBlID0gQXV0b1N5bmNNYW5hZ2VyOnNob3VsZFRyaWdnZXJTeW5jKCkKCiAgICBpZiBzeW5jVHlwZSB0aGVuCiAgICAgIHByaW50KCI9PT0gIiAuLiBzeW5jVHlwZSAuLiAiIHN5bmMgdHJpZ2dlciBkZXRlY3RlZCA9PT0iKSAtLSDmt7vliqDosIPor5Xkv6Hmga8KCiAgICAgIC0tIFVwZGF0ZSBzeW5jIHN0YXRlCiAgICAgIEF1dG9TeW5jTWFuYWdlcjp1cGRhdGVTeW5jU3RhdGUoc3luY1R5cGUpCgogICAgICAtLSBFeGVjdXRlIHN5bmMgKGxvY2tpbmcgaGFuZGxlZCBpbnRlcm5hbGx5IGJ5IGdpdC5zeW5jKQogICAgICBpZiBzeW5jVHlwZSA9PSAiY29sZC1zdGFydCIgdGhlbgogICAgICAgIHByaW50KCI9PT0gQ29sZCBTdGFydCBTeW5jIFRyaWdnZXJlZCA9PT0iKQogICAgICAgIHByaW50KCJVcHRpbWU6Iiwgb3MudGltZSgpIC0gQXV0b1N5bmNNYW5hZ2VyLnN0YXJ0dXBUaW1lLCAic2Vjb25kcyIpCiAgICAgICAgQXV0b1N5bmNNYW5hZ2VyOnBlcmZvcm1BdXRvU3luYygiU3RhcnR1cCIpCiAgICAgIGVsc2VpZiBzeW5jVHlwZSA9PSAicGVyaW9kaWMiIHRoZW4KICAgICAgICBBdXRvU3luY01hbmFnZXI6cGVyZm9ybUF1dG9TeW5jKCJQZXJpb2RpYyIpCiAgICAgIGVsc2UgLS0gZXZlbnQtZHJpdmVuCiAgICAgICAgQXV0b1N5bmNNYW5hZ2VyOnBlcmZvcm1BdXRvU3luYygiRXZlbnQtZHJpdmVuIikKICAgICAgZW5kCiAgICBlbmQKICBlbmQKfQpgYGAAAAAAAAAAABp3AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABBdwAAAAAAAEF3AAAAAAAAAAAAAAAA8L8"
				],
				[
					66,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADwdwAALS0tCmdpdGh1YlVybDogImh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0NoZW5aaHUtWGllLzFlYjRiNzY0NDc0YTJiMGNkOTRhMzUxOTY5ZDJlNWJiIgotLS0KI21ldGEKClRoaXMgbGlicmFyeSBhZGRzIGEgYmFzaWMgZ2l0IHN5bmNocm9uaXphdGlvbiBmdW5jdGlvbmFsaXR5IHRvIFNpbHZlckJ1bGxldC4gSXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBzdWNjZXNzb3IgdG8gW3NpbHZlcmJ1bGxldC1naXRdKGh0dHBzOi8vZ2l0aHViLmNvbS9zaWx2ZXJidWxsZXRtZC9zaWx2ZXJidWxsZXQtZ2l0KSBpbXBsZW1lbnRlZCBpbiBTcGFjZSBMdWEuCgpUaGUgZm9sbG93aW5nIGNvbW1hbmRzIGFyZSBpbXBsZW1lbnRlZDoKCiR7d2lkZ2V0cy5jb21tYW5kQnV0dG9uKCJHaXQ6IFN5bmMiKX0KCiogQWRkcyBhbGwgZmlsZXMgaW4geW91ciBmb2xkZXIgdG8gZ2l0CiogQ29tbWl0cyB0aGVtIHdpdGggdGhlIGRlZmF1bHQgIlNuYXBzaG90IiBjb21taXQgbWVzc2FnZQoqIGBnaXQgcHVsbGBzIGNoYW5nZXMgZnJvbSB0aGUgcmVtb3RlIHNlcnZlcgoqIGBnaXQgcHVzaGBlcyBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgc2VydmVyCgoke3dpZGdldHMuY29tbWFuZEJ1dHRvbigiR2l0OiBDb21taXQiKX0KCiogQXNrcyB5b3UgZm9yIGEgY29tbWl0IG1lc3NhZ2UKKiBDb21taXRzCgojIENvbmZpZ3VyYXRpb24KVGhlcmUgaXMgY3VycmVudGx5IG9ubHkgYSBzaW5nbGUgY29uZmlndXJhdGlvbiBvcHRpb246IGBnaXQuYXV0b1N5bmNgLiBXaGVuIHNldCwgdGhlIGBHaXQ6IFN5bmNgIGNvbW1hbmQgd2lsbCBiZSBydW4gZXZlcnkgX3hfIG1pbnV0ZXMuCgpFeGFtcGxlIGNvbmZpZ3VyYXRpb246CmBgYGx1YQpjb25maWcuc2V0KCJnaXQuYXV0b1N5bmMiLCA1KQpgYGAKCiMgSW1wbGVtZW50YXRpb24KVGhlIGZ1bGwgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBpbnRlZ3JhdGlvbiBmb2xsb3dzLgoKIyMgQ29uZmlndXJhdGlvbgpgYGBzcGFjZS1sdWEKLS0gcHJpb3JpdHk6IDEwMApjb25maWcuZGVmaW5lKCJnaXQiLCB7CiAgdHlwZSA9ICJvYmplY3QiLAogIHByb3BlcnRpZXMgPSB7CiAgICBhdXRvU3luYyA9IHNjaGVtYS5udW1iZXIoKQogIH0KfSkKYGBgCgojIyBDb3JlIFV0aWxpdGllcyBhbmQgR2l0IE9wZXJhdGlvbnMKCmBgYHNwYWNlLWx1YQotLSBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgY29uc2lzdGVudCBlcnJvciBoYW5kbGluZwpsb2NhbCBmdW5jdGlvbiBleGVjdXRlR2l0Q29tbWFuZChjb21tYW5kLCBhcmdzLCBvcGVyYXRpb24pCiAgcHJpbnQoIj09PSBleGVjdXRlR2l0Q29tbWFuZCBERUJVRyBTVEFSVCA9PT0iKQogIHByaW50KCJjb21tYW5kOiIsIGNvbW1hbmQpCiAgcHJpbnQoImFyZ3M6IiwgdGFibGUuY29uY2F0KGFyZ3Mgb3Ige30sICIgIikpCiAgcHJpbnQoIm9wZXJhdGlvbjoiLCBvcGVyYXRpb24pCgogIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgIHJldHVybiBzaGVsbC5ydW4oY29tbWFuZCwgYXJncykKICBlbmQpCgogIHByaW50KCJwY2FsbCBzdWNjZXNzOiIsIHN1Y2Nlc3MpCiAgcHJpbnQoInJlc3VsdCB0eXBlOiIsIHR5cGUocmVzdWx0KSkKCiAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgcHJpbnQoIj09PSBUYWJsZSBjb250ZW50cyA9PT0iKQogICAgZm9yIGssIHYgaW4gcGFpcnMocmVzdWx0KSBkbwogICAgICBwcmludCgiICAiIC4uIHRvc3RyaW5nKGspIC4uICI6IiwgdG9zdHJpbmcodikpCiAgICBlbmQKICAgIHByaW50KCI9PT0gRW5kIHRhYmxlID09PSIpCiAgZWxzZQogICAgcHJpbnQoInJlc3VsdCB2YWx1ZToiLCB0b3N0cmluZyhyZXN1bHQpKQogIGVuZAoKICBpZiBub3Qgc3VjY2VzcyB0aGVuCiAgICBsb2NhbCBlcnJvck1zZyA9IHRvc3RyaW5nKHJlc3VsdCBvciAiVW5rbm93biBlcnJvciIpCiAgICBwcmludCgicGNhbGwgZmFpbGVkLCByZXR1cm5pbmc6Iiwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiAiIC4uIGVycm9yTXNnKQogICAgcmV0dXJuIGZhbHNlLCBvcGVyYXRpb24gLi4gIiBmYWlsZWQ6ICIgLi4gZXJyb3JNc2cKICBlbmQKCiAgaWYgcmVzdWx0ID09IG5pbCB0aGVuCiAgICBwcmludCgicmVzdWx0IGlzIG5pbCwgcmV0dXJuaW5nIGVycm9yIikKICAgIHJldHVybiBmYWxzZSwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiBObyByZXN1bHQgcmV0dXJuZWQgZnJvbSBnaXQgY29tbWFuZCIKICBlbmQKCiAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgbG9jYWwgb3V0ID0gIiIKICAgIGxvY2FsIGV4aXRDb2RlID0gcmVzdWx0LmNvZGUgb3IgMAoKICAgIHByaW50KCJleGl0Q29kZToiLCBleGl0Q29kZSkKICAgIHByaW50KCJyZXN1bHQuc3Rkb3V0OiIsIHRvc3RyaW5nKHJlc3VsdC5zdGRvdXQpKQogICAgcHJpbnQoInJlc3VsdC5zdGRlcnI6IiwgdG9zdHJpbmcocmVzdWx0LnN0ZGVycikpCgogICAgaWYgcmVzdWx0LnN0ZGVyciBhbmQgcmVzdWx0LnN0ZGVyciB+PSAiIiB0aGVuCiAgICAgIG91dCA9IHJlc3VsdC5zdGRlcnIKICAgIGVsc2VpZiByZXN1bHQuc3Rkb3V0IGFuZCByZXN1bHQuc3Rkb3V0IH49ICIiIHRoZW4KICAgICAgb3V0ID0gcmVzdWx0LnN0ZG91dAogICAgZWxzZQogICAgICBvdXQgPSAiR2l0IGNvbW1hbmQgY29tcGxldGVkIHdpdGggbm8gb3V0cHV0IgogICAgZW5kCgogICAgcHJpbnQoImZpbmFsIG91dDoiLCBvdXQpCgogICAgaWYgZXhpdENvZGUgfj0gMCB0aGVuCiAgICAgIHByaW50KCJyZXR1cm5pbmcgZmFsc2UgZHVlIHRvIG5vbi16ZXJvIGV4aXQgY29kZSIpCiAgICAgIHJldHVybiBmYWxzZSwgb3BlcmF0aW9uIC4uICIgZmFpbGVkOiAiIC4uIG91dAogICAgZWxzZQogICAgICBwcmludCgicmV0dXJuaW5nIHRydWUgd2l0aCBvdXRwdXQ6Iiwgb3V0KQogICAgICByZXR1cm4gdHJ1ZSwgb3V0CiAgICBlbmQKICBlbHNlaWYgdHlwZShyZXN1bHQpID09ICJzdHJpbmciIHRoZW4KICAgIHByaW50KCJyZXN1bHQgaXMgc3RyaW5nLCByZXR1cm5pbmc6IiwgcmVzdWx0KQogICAgcmV0dXJuIHRydWUsIHJlc3VsdAogIGVsc2VpZiB0eXBlKHJlc3VsdCkgPT0gIm51bWJlciIgdGhlbgogICAgcHJpbnQoInJlc3VsdCBpcyBudW1iZXI6IiwgcmVzdWx0KQogICAgaWYgcmVzdWx0IH49IDAgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIG9wZXJhdGlvbiAuLiAiIGZhaWxlZCB3aXRoIGV4aXQgY29kZTogIiAuLiB0b3N0cmluZyhyZXN1bHQpCiAgICBlbHNlCiAgICAgIHJldHVybiB0cnVlLCBvcGVyYXRpb24gLi4gIiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IgogICAgZW5kCiAgZWxzZQogICAgcHJpbnQoInJlc3VsdCBpcyBvdGhlciB0eXBlLCByZXR1cm5pbmc6IiwgdG9zdHJpbmcocmVzdWx0KSkKICAgIHJldHVybiB0cnVlLCBvcGVyYXRpb24gLi4gIiBjb21wbGV0ZWQ6ICIgLi4gdG9zdHJpbmcocmVzdWx0KQogIGVuZAoKICBwcmludCgiPT09IGV4ZWN1dGVHaXRDb21tYW5kIERFQlVHIEVORCA9PT0iKQplbmQKCi0tIE5vdGlmaWNhdGlvbiBtYW5hZ2VyIGZvciBjb25zaXN0ZW50IG1lc3NhZ2luZwpsb2NhbCBOb3RpZmljYXRpb25NYW5hZ2VyID0gewogIG1lc3NhZ2VzID0gewogICAgR0lUX0xPQ0tfV0FSTklORyA9ICJHaXQgb3BlcmF0aW9uICclcycgaXMgYWxyZWFkeSBydW5uaW5nLiBQbGVhc2Ugd2FpdC4iLAogICAgQ09NTUlUX1NUQVJUID0gIkNvbW1pdHRpbmcgbG9jYWwgY2hhbmdlcy4uLiIsCiAgICBDT01NSVRfU1RFUCA9ICJTdGVwIDEvMzogQ29tbWl0dGluZyBsb2NhbCBjaGFuZ2VzLi4uIiwKICAgIFBVTExfU1RFUCA9ICJTdGVwIDIvMzogUHVsbGluZyBmcm9tIHJlbW90ZS4uLiIsCiAgICBQVVNIX1NURVAgPSAiU3RlcCAzLzM6IFB1c2hpbmcgdG8gcmVtb3RlLi4uIiwKICAgIFNZTkNfU1VDQ0VTUyA9ICJHaXQgc3luYyBzdWNjZXNzZnVsLiIsCiAgICBTWU5DX01BTlVBTF9TVEFSVCA9ICJTdGFydGluZyBtYW51YWwgR2l0IHN5bmMuLi4iLAogICAgU1lOQ19NQU5VQUxfQ09NUExFVEUgPSAiTWFudWFsIEdpdCBzeW5jIGNvbXBsZXRlISIsCiAgICBOT1RISU5HX1RPX0NPTU1JVCA9ICJObyBjaGFuZ2VzIHRvIGNvbW1pdCIsCiAgICBGT1JDRV9QVVNIX1NUQVJUID0gIlN0YXJ0aW5nIGZvcmNlIHB1c2ggcHJvY2Vzcy4uLiIsCiAgICBGT1JDRV9QVUxMX1NUQVJUID0gIlN0YXJ0aW5nIGZvcmNlIHB1bGwgcHJvY2Vzcy4uLiIsCiAgICBBVVRPX1NZTkNfVFJJR0dFUiA9ICJUcmlnZ2VyaW5nICVzIEdpdCBzeW5jLi4uIiwKICAgIEFVVE9fU1lOQ19DT01QTEVURSA9ICIlczogR2l0IHN5bmMgY29tcGxldGUuIiwKICAgIEFVVE9fU1lOQ19QVUxMX09OTFkgPSAiJXM6IEdpdCBwdWxsIGNvbXBsZXRlLiIsCiAgICBDT01NSVRfU1VDQ0VTUyA9ICJDb21taXQgc3VjY2Vzc2Z1bCEiLAogICAgTk9USElOR19UT19DT01NSVRfQ0xFQU4gPSAiTm90aGluZyB0byBjb21taXQ6IHdvcmtpbmcgdHJlZSBpcyBjbGVhbi4iLAogICAgR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUyA9ICJBbm90aGVyIGdpdCBvcGVyYXRpb24gaXMgaW4gcHJvZ3Jlc3MiCiAgfQp9CgpmdW5jdGlvbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3cobWVzc2FnZUtleSwgbGV2ZWwsIC4uLikKICBsb2NhbCB0ZW1wbGF0ZSA9IHNlbGYubWVzc2FnZXNbbWVzc2FnZUtleV0gb3IgbWVzc2FnZUtleQogIGxvY2FsIG1lc3NhZ2UgPSBzdHJpbmcuZm9ybWF0KHRlbXBsYXRlLCAuLi4pCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKG1lc3NhZ2UsIGxldmVsIG9yICJpbmZvIikKZW5kCgpmdW5jdGlvbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dFcnJvcihtZXNzYWdlS2V5LCAuLi4pCiAgc2VsZjpzaG93KG1lc3NhZ2VLZXksICJlcnJvciIsIC4uLikKZW5kCgpmdW5jdGlvbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dJbmZvKG1lc3NhZ2VLZXksIC4uLikKICBzZWxmOnNob3cobWVzc2FnZUtleSwgImluZm8iLCAuLi4pCmVuZAoKZnVuY3Rpb24gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZyhtZXNzYWdlS2V5LCAuLi4pCiAgc2VsZjpzaG93KG1lc3NhZ2VLZXksICJ3YXJuaW5nIiwgLi4uKQplbmQKCi0tIFNpbXBsZSBtZW1vcnkgbG9jayBtZWNoYW5pc20gZm9yIFNCIGludGVybmFsIGdpdCBvcGVyYXRpb25zCmlmIG5vdCBfRyB0aGVuCiAgZ2l0TG9jayA9IHsKICAgIGlzTG9ja2VkID0gZmFsc2UsCiAgICBjdXJyZW50T3BlcmF0aW9uID0gIiIKICB9CgogIGFjcXVpcmVHaXRMb2NrID0gZnVuY3Rpb24ob3BlcmF0aW9uTmFtZSkKICAgIGlmIGdpdExvY2suaXNMb2NrZWQgdGhlbgogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dXYXJuaW5nKCJHSVRfTE9DS19XQVJOSU5HIiwgZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uKQogICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAoKICAgIGdpdExvY2suaXNMb2NrZWQgPSB0cnVlCiAgICBnaXRMb2NrLmN1cnJlbnRPcGVyYXRpb24gPSBvcGVyYXRpb25OYW1lCiAgICByZXR1cm4gdHJ1ZQogIGVuZAoKICByZWxlYXNlR2l0TG9jayA9IGZ1bmN0aW9uKCkKICAgIGdpdExvY2suaXNMb2NrZWQgPSBmYWxzZQogICAgZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uID0gIiIKICBlbmQKZWxzZQogIF9HLmdpdExvY2sgPSB7CiAgICBpc0xvY2tlZCA9IGZhbHNlLAogICAgY3VycmVudE9wZXJhdGlvbiA9ICIiCiAgfQoKICBfRy5hY3F1aXJlR2l0TG9jayA9IGZ1bmN0aW9uKG9wZXJhdGlvbk5hbWUpCiAgICBpZiBfRy5naXRMb2NrLmlzTG9ja2VkIHRoZW4KICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZygiR0lUX0xPQ0tfV0FSTklORyIsIF9HLmdpdExvY2suY3VycmVudE9wZXJhdGlvbikKICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBfRy5naXRMb2NrLmlzTG9ja2VkID0gdHJ1ZQogICAgX0cuZ2l0TG9jay5jdXJyZW50T3BlcmF0aW9uID0gb3BlcmF0aW9uTmFtZQogICAgcmV0dXJuIHRydWUKICBlbmQKCiAgX0cucmVsZWFzZUdpdExvY2sgPSBmdW5jdGlvbigpCiAgICBfRy5naXRMb2NrLmlzTG9ja2VkID0gZmFsc2UKICAgIF9HLmdpdExvY2suY3VycmVudE9wZXJhdGlvbiA9ICIiCiAgZW5kCgogIC0tIEFsc28gY3JlYXRlIGxvY2FsIHJlZmVyZW5jZXMgZm9yIGNvbnNpc3RlbmN5CiAgZ2l0TG9jayA9IF9HLmdpdExvY2sKICBhY3F1aXJlR2l0TG9jayA9IF9HLmFjcXVpcmVHaXRMb2NrCiAgcmVsZWFzZUdpdExvY2sgPSBfRy5yZWxlYXNlR2l0TG9jawplbmQKCi0tIEdpdCBvcGVyYXRpb24gaGFuZGxlcnMgKGxvdy1sZXZlbCBvcGVyYXRpb25zLCBubyBsb2NrcykKbG9jYWwgR2l0T3BlcmF0aW9ucyA9IHt9CgpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLmFkZEZpbGVzKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsiYWRkIiwgIi4vKiJ9LCAiR2l0IGFkZCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5jb21taXRDaGFuZ2VzKG1lc3NhZ2UpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7ImNvbW1pdCIsICItYSIsICItbSIsIG1lc3NhZ2V9LCAiR2l0IGNvbW1pdCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5wdWxsQ2hhbmdlcygpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7InB1bGwiLCAib3JpZ2luIiwgIm1haW4ifSwgIkdpdCBwdWxsIikKZW5kCgpmdW5jdGlvbiBHaXRPcGVyYXRpb25zLnB1c2hDaGFuZ2VzKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicHVzaCIsICJvcmlnaW4iLCAibWFpbiJ9LCAiR2l0IHB1c2giKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuZmV0Y2hGcm9tUmVtb3RlKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsiZmV0Y2giLCAib3JpZ2luIn0sICJHaXQgZmV0Y2giKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucmVzZXRIYXJkKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicmVzZXQiLCAiLS1oYXJkIiwgIm9yaWdpbi9tYWluIn0sICJHaXQgcmVzZXQiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuY2xlYW5VbnRyYWNrZWQoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJjbGVhbiIsICItZmQifSwgIkdpdCBjbGVhbiIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5nZXRSZW1vdGVVcmwoKQogIHJldHVybiBleGVjdXRlR2l0Q29tbWFuZCgiZ2l0IiwgeyJyZW1vdGUiLCAiZ2V0LXVybCIsICJvcmlnaW4ifSwgIkdpdCBnZXQgcmVtb3RlIFVSTCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5yZW1vdmVHaXREaXJlY3RvcnkoKQogIC0tIFRyeSBXaW5kb3dzIGZpcnN0CiAgbG9jYWwgd2luU3VjY2Vzcywgd2luUmVzdWx0ID0gZXhlY3V0ZUdpdENvbW1hbmQoImNtZCIsIHsiL2MiLCAicmQiLCAiL3MiLCAiL3EiLCAiLmdpdCJ9LCAiUmVtb3ZlIC5naXQgZGlyZWN0b3J5IChXaW5kb3dzKSIpCiAgaWYgd2luU3VjY2VzcyB0aGVuCiAgICByZXR1cm4gdHJ1ZSwgIldpbmRvd3MiCiAgZW5kCgogIC0tIFRyeSBVbml4L0xpbnV4CiAgbG9jYWwgbGludXhTdWNjZXNzLCBsaW51eFJlc3VsdCA9IGV4ZWN1dGVHaXRDb21tYW5kKCJybSIsIHsiLXJmIiwgIi5naXQifSwgIlJlbW92ZSAuZ2l0IGRpcmVjdG9yeSAoVW5peC9MaW51eCkiKQogIGlmIGxpbnV4U3VjY2VzcyB0aGVuCiAgICByZXR1cm4gdHJ1ZSwgIlVuaXgvTGludXgiCiAgZW5kCgogIHJldHVybiBmYWxzZSwgIkZhaWxlZCB0byBkZWxldGUgLmdpdCBkaXJlY3Rvcnkgb24gYm90aCBXaW5kb3dzIGFuZCBVbml4L0xpbnV4IHN5c3RlbXMiCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5pbml0UmVwb3NpdG9yeSgpCiAgcmV0dXJuIGV4ZWN1dGVHaXRDb21tYW5kKCJnaXQiLCB7ImluaXQiLCAiLWIiLCAibWFpbiJ9LCAiR2l0IGluaXQiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuYWRkUmVtb3RlT3JpZ2luKHJlbW90ZVVybCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicmVtb3RlIiwgImFkZCIsICJvcmlnaW4iLCByZW1vdGVVcmx9LCAiR2l0IGFkZCByZW1vdGUiKQplbmQKCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMuZm9yY2VQdXNoKCkKICByZXR1cm4gZXhlY3V0ZUdpdENvbW1hbmQoImdpdCIsIHsicHVzaCIsICItLWZvcmNlIiwgIm9yaWdpbiIsICJtYWluIn0sICJHaXQgZm9yY2UgcHVzaCIpCmVuZAoKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5oYW5kbGVQdXNoRXJyb3IoZXJyb3JNZXNzYWdlLCBpc0NvbGRTdGFydCkKICBsb2NhbCBmb3JtYXR0ZWRFcnJvciA9IGVycm9yTWVzc2FnZTpnc3ViKCJeR2l0IHB1c2ggZmFpbGVkOiIsICJPbmx5IHB1c2ggZmFpbGVkOiIpCgogIGxvY2FsIHN5bmNSZXN1bHRNZXNzYWdlID0gIk9ubHkgcHVzaCBmYWlsZWQiCiAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZyhzeW5jUmVzdWx0TWVzc2FnZSAuLiAiOiAiIC4uIGZvcm1hdHRlZEVycm9yKQogIHJldHVybiB0cnVlLCBzeW5jUmVzdWx0TWVzc2FnZQplbmQKYGBgCgojIyBHaXQgQ29uZmlndXJhdGlvbiBWYWxpZGF0b3IKCmBgYHNwYWNlLWx1YQotLSBHaXRDb25maWdWYWxpZGF0b3IKaWYgbm90IEdpdENvbmZpZ1ZhbGlkYXRvciB0aGVuCiAgR2l0Q29uZmlnVmFsaWRhdG9yID0gewogICAgZXhwZWN0ZWRDb25maWcgPSB7CiAgICAgIHVzZXJOYW1lID0gIlhjeiIsCiAgICAgIHVzZXJFbWFpbCA9ICIyOTQzMDI3MDRAcXEuY29tIiwKICAgICAgY3JlZGVudGlhbEhlbHBlciA9ICJzdG9yZSIsCiAgICAgIHB1bGxSZWJhc2UgPSAiZmFsc2UiLAogICAgICBwdXNoQXV0b1JlbW90ZSA9ICJ0cnVlIgogICAgfQogIH0KCiAgZnVuY3Rpb24gR2l0Q29uZmlnVmFsaWRhdG9yOmV4ZWN1dGVDb21tYW5kKGNvbW1hbmQsIGFyZ3MsIHN1cHByZXNzT3V0cHV0KQogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICByZXR1cm4gc2hlbGwucnVuKGNvbW1hbmQsIGFyZ3MpCiAgICBlbmQpCgogICAgaWYgbm90IHN1Y2Nlc3MgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIG5pbAogICAgZW5kCgogICAgaWYgdHlwZShyZXN1bHQpID09ICJ0YWJsZSIgdGhlbgogICAgICBsb2NhbCBvdXRwdXQgPSByZXN1bHQuc3Rkb3V0IG9yICIiCiAgICAgIGxvY2FsIGV4aXRDb2RlID0gcmVzdWx0LmNvZGUgb3IgMAogICAgICBpZiBleGl0Q29kZSA9PSAwIHRoZW4KICAgICAgICBsb2NhbCBmdW5jdGlvbiBzYWZlX3RyaW0ocykKICAgICAgICAgIGlmIG5vdCBzIG9yIHMgPT0gIiIgdGhlbgogICAgICAgICAgICByZXR1cm4gIiIgIC0tIOepuuWtl+espuS4suebtOaOpei/lOWbngogICAgICAgICAgZW5kCiAgICAgICAgICByZXR1cm4gczpnc3ViKCIlcyskIiwgIiIpCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIHRydWUsIHNhZmVfdHJpbShvdXRwdXQpCiAgICAgIGVsc2UKICAgICAgICByZXR1cm4gZmFsc2UsIHJlc3VsdC5zdGRlcnIgb3IgIiIKICAgICAgZW5kCiAgICBlbmQKCiAgICByZXR1cm4gc3VjY2VzcywgcmVzdWx0CiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjpnZXRPcmlnaW5VcmxGcm9tSW5pdFNjcmlwdCgpCiAgICAtLSBGaXJzdCwgdHJ5IHRvIGdldCB0aGUgVVJMIGZyb20gZXhpc3RpbmcgZ2l0IGNvbmZpZyB1c2luZyBHaXRPcGVyYXRpb25zCiAgICBpZiBHaXRPcGVyYXRpb25zIGFuZCBHaXRPcGVyYXRpb25zLmdldFJlbW90ZVVybCB0aGVuCiAgICAgIGxvY2FsIHVybFN1Y2Nlc3MsIHVybFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuZ2V0UmVtb3RlVXJsKCkKCiAgICAgIGlmIHVybFN1Y2Nlc3MgYW5kIHVybFJlc3VsdCBhbmQgdXJsUmVzdWx0IH49ICIiIHRoZW4KICAgICAgICAtLSBDbGVhbiB1cCB0aGUgVVJMIChyZW1vdmUgcXVvdGVzLCB0cmFpbGluZyB3aGl0ZXNwYWNlKQogICAgICAgIGxvY2FsIGNsZWFuVXJsID0gdXJsUmVzdWx0OmdzdWIoIiVzKyIsICIiKQogICAgICAgIGlmIGNsZWFuVXJsIH49ICIiIHRoZW4KICAgICAgICAgIHJldHVybiBjbGVhblVybAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAoKICAgIC0tIElmIG5vIHJlbW90ZSBVUkwgZm91bmQgaW4gZ2l0IGNvbmZpZywgdHJ5IHRvIHJlYWQgZnJvbSBpbml0IHNjcmlwdAogICAgbG9jYWwgcGF0aHMgPSB7Ii4uL2luaXQuc2giLCAiLi4vaW5pdC5iYXQiLCAiLi4vaW5pdC5jbWQifQoKICAgIGZvciBfLCBwYXRoIGluIGlwYWlycyhwYXRocykgZG8KICAgICAgbG9jYWwgc3VjY2VzcywgY29udGVudCA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihwYXRoLCAiciIpCiAgICAgICAgaWYgZmlsZSB0aGVuCiAgICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYWxsIikKICAgICAgICAgIGZpbGU6Y2xvc2UoKQogICAgICAgICAgcmV0dXJuIGNvbnRlbnQKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gbmlsCiAgICAgIGVuZCkKCiAgICAgIGlmIHN1Y2Nlc3MgYW5kIGNvbnRlbnQgdGhlbgogICAgICAgIC0tIExvb2sgZm9yIEdpdEh1YiBVUkwgcGF0dGVybnMgaW4gdGhlIHNjcmlwdAogICAgICAgIGxvY2FsIHBhdHRlcm5zID0gewogICAgICAgICAgImh0dHBzOi8vW14lc10rQGdpdGh1YiUuY29tL1teJXNdKyIsCiAgICAgICAgICAiZ2l0QGdpdGh1YiUuY29tOlteJXNdKyIsCiAgICAgICAgICAiaHR0cHM6Ly9naXRodWIlLmNvbS9bXiVzXSsiCiAgICAgICAgfQoKICAgICAgICBmb3IgXywgcGF0dGVybiBpbiBpcGFpcnMocGF0dGVybnMpIGRvCiAgICAgICAgICBsb2NhbCB1cmwgPSBjb250ZW50Om1hdGNoKHBhdHRlcm4pCiAgICAgICAgICBpZiB1cmwgdGhlbgogICAgICAgICAgICAtLSBDbGVhbiB1cCB0aGUgVVJMIChyZW1vdmUgcXVvdGVzLCB0cmFpbGluZyBjaGFyYWN0ZXJzKQogICAgICAgICAgICB1cmwgPSB1cmw6Z3N1YigiW1wiJ2BdIiwgIiIpOmdzdWIoIlslcyVjXSskIiwgIiIpCiAgICAgICAgICAgIHJldHVybiB1cmwKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAoKICAgIHJldHVybiBuaWwKICBlbmQKCiAgZnVuY3Rpb24gR2l0Q29uZmlnVmFsaWRhdG9yOmlzR2l0UmVwb3NpdG9yeSgpCiAgICByZXR1cm4gc2VsZjpleGVjdXRlQ29tbWFuZCgiZ2l0IiwgeyJyZXYtcGFyc2UiLCAiLS1naXQtZGlyIn0sIHRydWUpCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjppbml0aWFsaXplUmVwb3NpdG9yeSgpCiAgICBpZiBub3Qgc2VsZjppc0dpdFJlcG9zaXRvcnkoKSB0aGVuCiAgICAgIHJldHVybiBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCB7ImluaXQiLCAiLWIiLCAibWFpbiJ9LCB0cnVlKQogICAgZW5kCiAgICByZXR1cm4gdHJ1ZQogIGVuZAoKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6Z2V0Q29uZmlnVmFsdWUoa2V5LCBzY29wZSkKICAgIGxvY2FsIGFyZ3MgPSB7ImNvbmZpZyJ9CiAgICBpZiBzY29wZSA9PSAiZ2xvYmFsIiB0aGVuCiAgICAgIHRhYmxlLmluc2VydChhcmdzLCAiLS1nbG9iYWwiKQogICAgZWxzZWlmIHNjb3BlID09ICJsb2NhbCIgdGhlbgogICAgICB0YWJsZS5pbnNlcnQoYXJncywgIi0tbG9jYWwiKQogICAgZW5kCiAgICB0YWJsZS5pbnNlcnQoYXJncywga2V5KQoKICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHNlbGY6ZXhlY3V0ZUNvbW1hbmQoImdpdCIsIGFyZ3MsIHRydWUpCiAgICByZXR1cm4gc3VjY2VzcyBhbmQgcmVzdWx0IG9yIG5pbAogIGVuZAoKICBmdW5jdGlvbiBHaXRDb25maWdWYWxpZGF0b3I6c2V0Q29uZmlnVmFsdWUoa2V5LCB2YWx1ZSwgc2NvcGUpCiAgICBsb2NhbCBhcmdzID0geyJjb25maWcifQogICAgaWYgc2NvcGUgPT0gImdsb2JhbCIgdGhlbgogICAgICB0YWJsZS5pbnNlcnQoYXJncywgIi0tZ2xvYmFsIikKICAgIGVsc2VpZiBzY29wZSA9PSAibG9jYWwiIHRoZW4KICAgICAgdGFibGUuaW5zZXJ0KGFyZ3MsICItLWxvY2FsIikKICAgIGVuZAogICAgdGFibGUuaW5zZXJ0KGFyZ3MsIGtleSkKICAgIHRhYmxlLmluc2VydChhcmdzLCB2YWx1ZSkKCiAgICBsb2NhbCBzdWNjZXNzLCBvdXRwdXQgPSBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCBhcmdzLCB0cnVlKQoKICAgIHByaW50KCJzZXRDb25maWdWYWx1ZSBkZWJ1ZyAtIHN1Y2Nlc3M6Iiwgc3VjY2VzcywgIm91dHB1dDoiLCBvdXRwdXQgb3IgIihuaWwpIikKCiAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgLS0gQ29uc3RydWN0IHRoZSBnaXQgY29tbWFuZCBzdHJpbmcgZm9yIGRpc3BsYXkKICAgICAgbG9jYWwgZ2l0Q29tbWFuZCA9ICJnaXQgY29uZmlnIgogICAgICBpZiBzY29wZSA9PSAiZ2xvYmFsIiB0aGVuCiAgICAgICAgZ2l0Q29tbWFuZCA9IGdpdENvbW1hbmQgLi4gIiAtLWdsb2JhbCIKICAgICAgZWxzZWlmIHNjb3BlID09ICJsb2NhbCIgdGhlbgogICAgICAgIGdpdENvbW1hbmQgPSBnaXRDb21tYW5kIC4uICIgLS1sb2NhbCIKICAgICAgZW5kCiAgICAgIGdpdENvbW1hbmQgPSBnaXRDb21tYW5kIC4uICIgIiAuLiBrZXkgLi4gIiAiIC4uIHZhbHVlCgogICAgICAtLSBGbGFzaCBub3RpZmljYXRpb24gYW5kIHByaW50CiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiQ29uZmlnIHNldDogIiAuLiBnaXRDb21tYW5kLCAid2FybmluZyIpCiAgICAgIHByaW50KCJHaXQgY29uZmlnIHNldDogIiAuLiBnaXRDb21tYW5kKQogICAgZWxzZQogICAgICBwcmludCgiRmFpbGVkIHRvIHNldCBjb25maWc6Iiwga2V5LCAiPSIsIHZhbHVlLCAiRXJyb3I6Iiwgb3V0cHV0IG9yICIobm8gZXJyb3IpIikKICAgIGVuZAoKICAgIHJldHVybiBzdWNjZXNzCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjpzZXRSZW1vdGVPcmlnaW4odXJsKQogICAgLS0gRmlyc3QgdHJ5IHRvIHNldCBleGlzdGluZyBvcmlnaW4gKGxvY2FsKQogICAgbG9jYWwgc3VjY2VzcyA9IHNlbGY6ZXhlY3V0ZUNvbW1hbmQoImdpdCIsIHsicmVtb3RlIiwgInNldC11cmwiLCAib3JpZ2luIiwgdXJsfSwgdHJ1ZSkKICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCgogICAgLS0gSWYgdGhhdCBmYWlscywgdHJ5IHRvIGFkZCBuZXcgb3JpZ2luIChsb2NhbCkKICAgIHJldHVybiBzZWxmOmV4ZWN1dGVDb21tYW5kKCJnaXQiLCB7InJlbW90ZSIsICJhZGQiLCAib3JpZ2luIiwgdXJsfSwgdHJ1ZSkKICBlbmQKCiAgZnVuY3Rpb24gR2l0Q29uZmlnVmFsaWRhdG9yOmNoZWNrQW5kU2V0Q29uZmlnKGtleSwgZXhwZWN0ZWRWYWx1ZSkKICAgIC0tIENoZWNrIGdsb2JhbCBmaXJzdAogICAgbG9jYWwgZ2xvYmFsVmFsdWUgPSBzZWxmOmdldENvbmZpZ1ZhbHVlKGtleSwgImdsb2JhbCIpCiAgICBpZiBnbG9iYWxWYWx1ZSA9PSBleHBlY3RlZFZhbHVlIHRoZW4KICAgICAgbG9jYWwgZ2l0Q29tbWFuZCA9ICJnaXQgY29uZmlnIiAuLiAiIC0tZ2xvYmFsIgogICAgICBnaXRDb21tYW5kID0gZ2l0Q29tbWFuZCAuLiAiICIgLi4ga2V5IC4uICIgIiAuLiBleHBlY3RlZFZhbHVlCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiQWxyZWFkeSBzZXQ6ICIgLi4gZ2l0Q29tbWFuZCwgIndhcm5pbmciKQogICAgICByZXR1cm4gdHJ1ZSAtLSBBbHJlYWR5IHNldCBpbiBnbG9iYWwsIG5vIG5lZWQgdG8gc2V0IGxvY2FsbHkKICAgIGVuZAoKICAgIC0tIENoZWNrIGxvY2FsCiAgICBsb2NhbCBsb2NhbFZhbHVlID0gc2VsZjpnZXRDb25maWdWYWx1ZShrZXksICJsb2NhbCIpCiAgICBpZiBsb2NhbFZhbHVlID09IGV4cGVjdGVkVmFsdWUgdGhlbgogICAgICBsb2NhbCBnaXRDb21tYW5kID0gImdpdCBjb25maWciIC4uICIgLS1sb2NhbCIKICAgICAgZ2l0Q29tbWFuZCA9IGdpdENvbW1hbmQgLi4gIiAiIC4uIGtleSAuLiAiICIgLi4gZXhwZWN0ZWRWYWx1ZQogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkFscmVhZHkgc2V0OiAiIC4uIGdpdENvbW1hbmQsICJ3YXJuaW5nIikKICAgICAgcmV0dXJuIHRydWUgLS0gQWxyZWFkeSBzZXQgbG9jYWxseQogICAgZW5kCgogICAgLS0gTmVpdGhlciBnbG9iYWwgbm9yIGxvY2FsIGhhcyB0aGUgZXhwZWN0ZWQgdmFsdWUsIHNldCBpdCBsb2NhbGx5CiAgICByZXR1cm4gc2VsZjpzZXRDb25maWdWYWx1ZShrZXksIGV4cGVjdGVkVmFsdWUsICJsb2NhbCIpCiAgZW5kCgogIGZ1bmN0aW9uIEdpdENvbmZpZ1ZhbGlkYXRvcjp2YWxpZGF0ZUFuZFNldHVwKCkKICAgIC0tIFN0ZXAgMTogRW5zdXJlIGdpdCByZXBvc2l0b3J5IGlzIGluaXRpYWxpemVkCiAgICBpZiBub3Qgc2VsZjppbml0aWFsaXplUmVwb3NpdG9yeSgpIHRoZW4KICAgICAgcmV0dXJuIGZhbHNlIC0tIEZhaWxlZCB0byBpbml0aWFsaXplIHJlcG9zaXRvcnkKICAgIGVuZAoKICAgIC0tIFN0ZXAgMjogQ2hlY2sgYW5kIHNldCBiYXNpYyBnaXQgY29uZmlnCiAgICBsb2NhbCBjb25maWdLZXlzID0gewogICAgICBbInVzZXIubmFtZSJdID0gc2VsZi5leHBlY3RlZENvbmZpZy51c2VyTmFtZSwKICAgICAgWyJ1c2VyLmVtYWlsIl0gPSBzZWxmLmV4cGVjdGVkQ29uZmlnLnVzZXJFbWFpbCwKICAgICAgWyJjcmVkZW50aWFsLmhlbHBlciJdID0gc2VsZi5leHBlY3RlZENvbmZpZy5jcmVkZW50aWFsSGVscGVyLAogICAgICBbInB1bGwucmViYXNlIl0gPSBzZWxmLmV4cGVjdGVkQ29uZmlnLnB1bGxSZWJhc2UsCiAgICAgIFsicHVzaC5hdXRvU2V0dXBSZW1vdGUiXSA9IHNlbGYuZXhwZWN0ZWRDb25maWcucHVzaEF1dG9SZW1vdGUKICAgIH0KCiAgICBmb3Iga2V5LCBleHBlY3RlZFZhbHVlIGluIHBhaXJzKGNvbmZpZ0tleXMpIGRvCiAgICAgIGxvY2FsIGNvbmZpZ1NldCA9IHNlbGY6Y2hlY2tBbmRTZXRDb25maWcoa2V5LCBleHBlY3RlZFZhbHVlKQogICAgICBpZiBub3QgY29uZmlnU2V0IHRoZW4KICAgICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIldhcm5pbmc6IEZhaWxlZCB0byBzZXQgY29uZmlnICIgLi4ga2V5IC4uICIgPSAiIC4uIGV4cGVjdGVkVmFsdWUsICJ3YXJuaW5nIikKICAgICAgICBwcmludCgiV2FybmluZzogRmFpbGVkIHRvIHNldCBjb25maWcgIiAuLiBrZXkgLi4gIiA9ICIgLi4gZXhwZWN0ZWRWYWx1ZSkKICAgICAgZW5kCiAgICBlbmQKCiAgICAtLSBTdGVwIDM6IENoZWNrIGFuZCBzZXQgb3JpZ2luIFVSTCAob25seSBmcm9tIGluaXQgc2NyaXB0KQogICAgbG9jYWwgY3VycmVudE9yaWdpblVybCA9IHNlbGY6Z2V0UmVtb3RlT3JpZ2luVXJsKCkKICAgIGlmIG5vdCBjdXJyZW50T3JpZ2luVXJsIG9yIGN1cnJlbnRPcmlnaW5VcmwgPT0gIiIgdGhlbgogICAgICBsb2NhbCBzY3JpcHRVcmwgPSBzZWxmOmdldE9yaWdpblVybEZyb21Jbml0U2NyaXB0KCkKICAgICAgaWYgc2NyaXB0VXJsIHRoZW4KICAgICAgICBzZWxmOnNldFJlbW90ZU9yaWdpbihzY3JpcHRVcmwpCiAgICAgIGVuZAogICAgZW5kCgogICAgcmV0dXJuIHRydWUKICBlbmQKZW5kCmBgYAoKIyMgQWR2YW5jZWQgR2l0IE9wZXJhdGlvbnMgYW5kIEFQSQoKYGBgc3BhY2UtbHVhCi0tIEludGVybmFsIGNvbW1pdCBmdW5jdGlvbiAobm8gbG9jaywgdXNlZCB3aGVuIGxvY2sgaXMgYWxyZWFkeSBhY3F1aXJlZCkKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5wZXJmb3JtQ29tbWl0SW50ZXJuYWwobWVzc2FnZSwgc2hvd1N0ZXBzLCBpc0NvbGRTdGFydCkKICBtZXNzYWdlID0gbWVzc2FnZSBvciAiU25hcHNob3QiCiAgc2hvd1N0ZXBzID0gc2hvd1N0ZXBzID09IG5pbCBhbmQgdHJ1ZSBvciBzaG93U3RlcHMKCiAgaWYgc2hvd1N0ZXBzIHRoZW4KICAgIGlmIGlzQ29sZFN0YXJ0IHRoZW4KICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93SW5mbygiQ09NTUlUX1NURVAiKQogICAgZWxzZQogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dJbmZvKCJDT01NSVRfU1RBUlQiKQogICAgZW5kCiAgZW5kCgogIC0tIFN0ZXAgMTogYWRkIGZpbGVzCiAgbG9jYWwgYWRkU3VjY2VzcywgYWRkUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5hZGRGaWxlcygpCiAgaWYgbm90IGFkZFN1Y2Nlc3MgdGhlbgogICAgcmV0dXJuIGZhbHNlLCBhZGRSZXN1bHQgIC0tIGFkZFJlc3VsdCDlt7Lnu4/mmK/lrozmlbTlrZfnrKbkuLIKICBlbmQKCiAgLS0gU3RlcCAyOiBjb21taXQgY2hhbmdlcwogIGxvY2FsIGNvbW1pdFN1Y2Nlc3MsIGNvbW1pdFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuY29tbWl0Q2hhbmdlcyhtZXNzYWdlKQogIGlmIGNvbW1pdFN1Y2Nlc3MgdGhlbgogICAgcmV0dXJuIHRydWUsIGNvbW1pdFJlc3VsdCAgLS0gY29tbWl0UmVzdWx0IOaYryBzdGRvdXTvvIzmmL7npLrlrozmlbTovpPlh7oKICBlbmQKCiAgLS0gU3RlcCAzOiBub3RoaW5nIHRvIGNvbW1pdAogIGlmIGNvbW1pdFJlc3VsdDpmaW5kKCJub3RoaW5nIHRvIGNvbW1pdCIpIHRoZW4KICAgIHJldHVybiAibm90aGluZyIsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuTk9USElOR19UT19DT01NSVRfQ0xFQU4KICBlbHNlCiAgICByZXR1cm4gZmFsc2UsIGNvbW1pdFJlc3VsdCAtLSDlrozmlbTplJnor6/kv6Hmga8KICBlbmQKZW5kCgotLSBDb3JlIGNvbW1pdCBvcGVyYXRpb24gV0lUSCBMT0NLCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdChtZXNzYWdlLCBzaG93U3RlcHMsIGlzQ29sZFN0YXJ0KQogIGxvY2FsIG5lZWRUb1JlbGVhc2VMb2NrID0gZmFsc2UKICBsb2NhbCBsb2NrT2JqID0gX0cgYW5kIF9HLmdpdExvY2sgb3IgZ2l0TG9jawogIGxvY2FsIGFjcXVpcmVGbiA9IF9HIGFuZCBfRy5hY3F1aXJlR2l0TG9jayBvciBhY3F1aXJlR2l0TG9jawogIGxvY2FsIHJlbGVhc2VGbiA9IF9HIGFuZCBfRy5yZWxlYXNlR2l0TG9jayBvciByZWxlYXNlR2l0TG9jawoKICBpZiBub3QgbG9ja09iai5pc0xvY2tlZCB0aGVuCiAgICBpZiBub3QgYWNxdWlyZUZuKCJHaXQgQ29tbWl0IikgdGhlbgogICAgICByZXR1cm4gZmFsc2UsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUwogICAgZW5kCiAgICBuZWVkVG9SZWxlYXNlTG9jayA9IHRydWUKICBlbmQKCiAgbWVzc2FnZSA9IG1lc3NhZ2Ugb3IgIlNuYXBzaG90IgogIHNob3dTdGVwcyA9IHNob3dTdGVwcyA9PSBuaWwgYW5kIHRydWUgb3Igc2hvd1N0ZXBzCgogIC0tIFN0ZXAgMTogQ29tbWl0ICjlhoXpg6jlh73mlbDkvJrlpITnkIYgYWRkICYgY29tbWl0KQogIGxvY2FsIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdEludGVybmFsKG1lc3NhZ2UsIHNob3dTdGVwcywgaXNDb2xkU3RhcnQpCgogIGlmIG5lZWRUb1JlbGVhc2VMb2NrIHRoZW4gcmVsZWFzZUZuKCkgZW5kIC0tIPCflJMKCiAgcmV0dXJuIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZQplbmQKCi0tIENvcmUgc3luYyBvcGVyYXRpb24gV0lUSCBMT0NLICh0aGlzIGlzIGEgY29yZSBmdW5jdGlvbiB0aGF0IG5lZWRzIGxvY2tpbmcpCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucGVyZm9ybVN5bmMoc2hvd1N0ZXBzLCBpc0NvbGRTdGFydCkKICBsb2NhbCBuZWVkVG9SZWxlYXNlTG9jayA9IGZhbHNlCiAgbG9jYWwgbG9ja09iaiA9IF9HIGFuZCBfRy5naXRMb2NrIG9yIGdpdExvY2sKICBsb2NhbCBhY3F1aXJlRm4gPSBfRyBhbmQgX0cuYWNxdWlyZUdpdExvY2sgb3IgYWNxdWlyZUdpdExvY2sKICBsb2NhbCByZWxlYXNlRm4gPSBfRyBhbmQgX0cucmVsZWFzZUdpdExvY2sgb3IgcmVsZWFzZUdpdExvY2sKCiAgaWYgbm90IGxvY2tPYmouaXNMb2NrZWQgdGhlbgogICAgaWYgbm90IGFjcXVpcmVGbigiR2l0IFN5bmMiKSB0aGVuCiAgICAgIHJldHVybiBmYWxzZSwgTm90aWZpY2F0aW9uTWFuYWdlci5tZXNzYWdlcy5HSVRfT1BFUkFUSU9OX0lOX1BST0dSRVNTCiAgICBlbmQKICAgIG5lZWRUb1JlbGVhc2VMb2NrID0gdHJ1ZQogIGVuZAoKICBzaG93U3RlcHMgPSBzaG93U3RlcHMgPT0gbmlsIGFuZCB0cnVlIG9yIHNob3dTdGVwcwoKICAtLSBTdGVwIDE6IGNvbW1pdAogIGxvY2FsIGNvbW1pdFJlc3VsdCwgY29tbWl0TWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdEludGVybmFsKG5pbCwgc2hvd1N0ZXBzLCB0cnVlKQogIGlmIGNvbW1pdFJlc3VsdCA9PSBmYWxzZSB0aGVuCiAgICBpZiBuZWVkVG9SZWxlYXNlTG9jayB0aGVuIHJlbGVhc2VGbigpIGVuZAogICAgcmV0dXJuIGZhbHNlLCBjb21taXRNZXNzYWdlCiAgZWxzZWlmIGNvbW1pdFJlc3VsdCA9PSAibm90aGluZyIgdGhlbgogICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93V2FybmluZygiTk9USElOR19UT19DT01NSVRfQ0xFQU4iKQogIGVuZAoKICAtLSBTdGVwIDI6IHB1bGwKICBpZiBzaG93U3RlcHMgdGhlbiBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dJbmZvKCJQVUxMX1NURVAiKSBlbmQKICBsb2NhbCBwdWxsU3VjY2VzcywgcHVsbE1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLnB1bGxDaGFuZ2VzKCkKICBpZiBub3QgcHVsbFN1Y2Nlc3MgdGhlbgogICAgaWYgbmVlZFRvUmVsZWFzZUxvY2sgdGhlbiByZWxlYXNlRm4oKSBlbmQKICAgIHJldHVybiBmYWxzZSwgcHVsbE1lc3NhZ2UKICBlbmQKCiAgLS0gU3RlcCAzOiBwdXNoCiAgaWYgc2hvd1N0ZXBzIHRoZW4gTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93SW5mbygiUFVTSF9TVEVQIikgZW5kCiAgbG9jYWwgcHVzaFN1Y2Nlc3MsIHB1c2hNZXNzYWdlID0gR2l0T3BlcmF0aW9ucy5wdXNoQ2hhbmdlcygpCiAgaWYgbm90IHB1c2hTdWNjZXNzIHRoZW4KICAgIGxvY2FsIGhhbmRsZWQsIG1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLmhhbmRsZVB1c2hFcnJvcihwdXNoTWVzc2FnZSwgaXNDb2xkU3RhcnQpCiAgICBpZiBuZWVkVG9SZWxlYXNlTG9jayB0aGVuIHJlbGVhc2VGbigpIGVuZAogICAgcmV0dXJuIGhhbmRsZWQsIG1lc3NhZ2UKICBlbmQKCiAgaWYgbmVlZFRvUmVsZWFzZUxvY2sgdGhlbiByZWxlYXNlRm4oKSBlbmQKICByZXR1cm4gdHJ1ZSwgTm90aWZpY2F0aW9uTWFuYWdlci5tZXNzYWdlcy5TWU5DX1NVQ0NFU1MKZW5kCgotLSBDb3JlIGZvcmNlIHB1c2ggaW5pdGlhbCBjb21taXQgV0lUSCBMT0NLCmZ1bmN0aW9uIEdpdE9wZXJhdGlvbnMucGVyZm9ybUZvcmNlUHVzaEluaXRpYWwoKQogIC0tIPCflJIgQUNRVUlSRSBMT0NLCiAgbG9jYWwgYWNxdWlyZUZuID0gX0cgYW5kIF9HLmFjcXVpcmVHaXRMb2NrIG9yIGFjcXVpcmVHaXRMb2NrCiAgbG9jYWwgcmVsZWFzZUZuID0gX0cgYW5kIF9HLnJlbGVhc2VHaXRMb2NrIG9yIHJlbGVhc2VHaXRMb2NrCgogIGlmIG5vdCBhY3F1aXJlRm4oIkdpdCBGb3JjZSBQdXNoIEluaXRpYWwiKSB0aGVuCiAgICByZXR1cm4gZmFsc2UsIE5vdGlmaWNhdGlvbk1hbmFnZXIubWVzc2FnZXMuR0lUX09QRVJBVElPTl9JTl9QUk9HUkVTUwogIGVuZAoKICAtLSBTdGVwIDE6IEdldCByZW1vdGUgVVJMIGZyb20gaW5pdCBzY3JpcHQgKGJlZm9yZSBkZWxldGluZyAuZ2l0KQogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RlcCAxLzY6IFJlYWRpbmcgcmVtb3RlIFVSTCBmcm9tIGluaXQgc2NyaXB0Li4uIiwgImluZm8iKQogIGxvY2FsIHJlbW90ZVVybCA9IEdpdENvbmZpZ1ZhbGlkYXRvcjpnZXRPcmlnaW5VcmxGcm9tSW5pdFNjcmlwdCgpCgogIGlmIG5vdCByZW1vdGVVcmwgb3IgcmVtb3RlVXJsID09ICIiIHRoZW4KICAgIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd1dhcm5pbmcoIk5vIHJlbW90ZSBVUkwgZm91bmQgaW4gaW5pdCBzY3JpcHQuIFBsZWFzZSBlbnRlciB0aGUgcmVtb3RlIHJlcG9zaXRvcnkgVVJMLiIpCiAgICByZW1vdGVVcmwgPSBlZGl0b3IucHJvbXB0KCJFbnRlciByZW1vdGUgcmVwb3NpdG9yeSBVUkw6IikKCiAgICBpZiBub3QgcmVtb3RlVXJsIG9yIHJlbW90ZVVybCA9PSAiIiB0aGVuCiAgICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgICAgcmV0dXJuIGZhbHNlLCAiRm9yY2UgcHVzaCBjYW5jZWxsZWQ6IG5vIHJlbW90ZSBVUkwgcHJvdmlkZWQuIgogICAgZW5kCiAgZW5kCgogIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiUmVtb3RlIFVSTDogIiAuLiByZW1vdGVVcmwsICJ3YXJuaW5nIikKCiAgLS0gU3RlcCAyOiBSZW1vdmUgLmdpdCBkaXJlY3RvcnkKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMi82OiBXaXBpbmcgbG9jYWwgaGlzdG9yeS4uLiIsICJpbmZvIikKICBsb2NhbCBkZWxldGVTdWNjZXNzLCBvc1R5cGUgPSBHaXRPcGVyYXRpb25zLnJlbW92ZUdpdERpcmVjdG9yeSgpCgogIGlmIG5vdCBkZWxldGVTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgb3NUeXBlCiAgZW5kCgogIC0tIFN0ZXAgMzogUmUtaW5pdGlhbGl6ZSByZXBvc2l0b3J5IGFuZCBjb25maWd1cmUgaXQKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMy82OiBSZS1pbml0aWFsaXppbmcgcmVwb3NpdG9yeSBvbiAnbWFpbicgYnJhbmNoLi4uIiwgImluZm8iKQoKICAtLSBJbml0aWFsaXplIHJlcG9zaXRvcnkKICBsb2NhbCBpbml0U3VjY2VzcywgaW5pdFJlc3VsdCA9IEdpdE9wZXJhdGlvbnMuaW5pdFJlcG9zaXRvcnkoKQogIGlmIG5vdCBpbml0U3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIGluaXRSZXN1bHQKICBlbmQKCiAgLS0g8J+UpSBORVc6IENvbmZpZ3VyZSBnaXQgYWZ0ZXIgcmUtaW5pdGlhbGl6YXRpb24KICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkNvbmZpZ3VyaW5nIGdpdCBzZXR0aW5ncy4uLiIsICJ3YXJuaW5nIikKICBsb2NhbCBjb25maWdTdWNjZXNzLCBjb25maWdFcnIgPSBwY2FsbChmdW5jdGlvbigpCiAgICBHaXRDb25maWdWYWxpZGF0b3I6dmFsaWRhdGVBbmRTZXR1cCgpCiAgZW5kKQogIGlmIG5vdCBjb25maWdTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMgUmVsZWFzZSB0aGUgbG9jayBiZWZvcmUgcmV0dXJuaW5nCiAgICAtLSByZXR1cm4gZmFsc2UsICJHaXQgY29uZmlndXJhdGlvbiBmYWlsZWQ6ICIgLi4gdG9zdHJpbmcoY29uZmlnRXJyKQogIGVuZAoKICAtLSBTdGVwIDQ6IFJlLWxpbmsgdG8gcmVtb3RlCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDQvNjogUmUtbGlua2luZyB0byByZW1vdGUuLi4iLCAiaW5mbyIpCiAgbG9jYWwgcmVtb3RlU3VjY2VzcywgcmVtb3RlUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5hZGRSZW1vdGVPcmlnaW4ocmVtb3RlVXJsKQogIGlmIG5vdCByZW1vdGVTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgcmVtb3RlUmVzdWx0CiAgZW5kCgogIC0tIFN0ZXAgNTogQ3JlYXRlIGluaXRpYWwgY29tbWl0CiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDUvNjogQ3JlYXRpbmcgaW5pdGlhbCBjb21taXQuLi4iLCAiaW5mbyIpCiAgbG9jYWwgY29tbWl0U3VjY2VzcywgY29tbWl0TWVzc2FnZSA9IEdpdE9wZXJhdGlvbnMucGVyZm9ybUNvbW1pdEludGVybmFsKCJJbml0aWFsIENvbW1pdCIsIGZhbHNlLCBmYWxzZSkKICBpZiBjb21taXRTdWNjZXNzIH49IHRydWUgdGhlbgogICAgcmVsZWFzZUZuKCkgLS0g8J+UkwogICAgcmV0dXJuIGZhbHNlLCAiRXJyb3IgZHVyaW5nIGluaXRpYWwgY29tbWl0OiAiIC4uIGNvbW1pdE1lc3NhZ2UKICBlbmQKCiAgLS0gU3RlcCA2OiBGb3JjZSBwdXNoCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDYvNjogRm9yY2UgcHVzaGluZyB0byByZW1vdGUuLi4iLCAiaW5mbyIpCiAgbG9jYWwgcHVzaFN1Y2Nlc3MsIHB1c2hSZXN1bHQgPSBHaXRPcGVyYXRpb25zLmZvcmNlUHVzaCgpCiAgaWYgbm90IHB1c2hTdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgcHVzaFJlc3VsdAogIGVuZAoKICByZWxlYXNlRm4oKSAtLSDwn5STCiAgcmV0dXJuIHRydWUsICJGb3JjZSBwdXNoIGluaXRpYWwgY29tbWl0IHN1Y2Nlc3NmdWwhIgplbmQKCi0tIENvcmUgZm9yY2UgcHVsbCBXSVRIIExPQ0sKZnVuY3Rpb24gR2l0T3BlcmF0aW9ucy5wZXJmb3JtRm9yY2VQdWxsKCkKICAtLSDwn5SSIEFDUVVJUkUgTE9DSwogIGxvY2FsIGFjcXVpcmVGbiA9IF9HIGFuZCBfRy5hY3F1aXJlR2l0TG9jayBvciBhY3F1aXJlR2l0TG9jawogIGxvY2FsIHJlbGVhc2VGbiA9IF9HIGFuZCBfRy5yZWxlYXNlR2l0TG9jayBvciByZWxlYXNlR2l0TG9jawoKICBpZiBub3QgYWNxdWlyZUZuKCJHaXQgRm9yY2UgUHVsbCIpIHRoZW4KICAgIHJldHVybiBmYWxzZSwgTm90aWZpY2F0aW9uTWFuYWdlci5tZXNzYWdlcy5HSVRfT1BFUkFUSU9OX0lOX1BST0dSRVNTCiAgZW5kCgogIC0tIFN0ZXAgMTogRmV0Y2gKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMS8zOiBGZXRjaGluZyBmcm9tIHJlbW90ZS4uLiIsICJpbmZvIikKICBsb2NhbCBmZXRjaFN1Y2Nlc3MsIGZldGNoUmVzdWx0ID0gR2l0T3BlcmF0aW9ucy5mZXRjaEZyb21SZW1vdGUoKQogIGlmIG5vdCBmZXRjaFN1Y2Nlc3MgdGhlbgogICAgcmVsZWFzZUZuKCkgLS0g8J+UkwogICAgcmV0dXJuIGZhbHNlLCBmZXRjaFJlc3VsdAogIGVuZAoKICAtLSBTdGVwIDI6IFJlc2V0IGhhcmQKICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0ZXAgMi8zOiBSZXNldHRpbmcgbG9jYWwgdG8gbWF0Y2ggcmVtb3RlLi4uIiwgImluZm8iKQogIGxvY2FsIHJlc2V0U3VjY2VzcywgcmVzZXRSZXN1bHQgPSBHaXRPcGVyYXRpb25zLnJlc2V0SGFyZCgpCiAgaWYgbm90IHJlc2V0U3VjY2VzcyB0aGVuCiAgICByZWxlYXNlRm4oKSAtLSDwn5STCiAgICByZXR1cm4gZmFsc2UsIHJlc2V0UmVzdWx0CiAgZW5kCgogIC0tIFN0ZXAgMzogQ2xlYW4gdW50cmFja2VkIGZpbGVzCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJTdGVwIDMvMzogQ2xlYW5pbmcgdW50cmFja2VkIGZpbGVzLi4uIiwgImluZm8iKQogIGxvY2FsIGNsZWFuU3VjY2VzcywgY2xlYW5SZXN1bHQgPSBHaXRPcGVyYXRpb25zLmNsZWFuVW50cmFja2VkKCkKICBpZiBub3QgY2xlYW5TdWNjZXNzIHRoZW4KICAgIHJlbGVhc2VGbigpIC0tIPCflJMKICAgIHJldHVybiBmYWxzZSwgY2xlYW5SZXN1bHQKICBlbmQKCiAgcmVsZWFzZUZuKCkgLS0g8J+UkwogIHJldHVybiB0cnVlLCAiRm9yY2UgcHVsbCBzdWNjZXNzZnVsISBMb2NhbCBpcyBub3cgaWRlbnRpY2FsIHRvIHJlbW90ZS4iCmVuZAoKLS0gTWFpbiBnaXQgb2JqZWN0ICh0aGVzZSBjb3JlIGZ1bmN0aW9ucyBub3cgaGFuZGxlIHRoZWlyIG93biBsb2NraW5nKQpnaXQgPSB7fQpnaXQuY29tbWl0ID0gR2l0T3BlcmF0aW9ucy5wZXJmb3JtQ29tbWl0CmdpdC5zeW5jID0gR2l0T3BlcmF0aW9ucy5wZXJmb3JtU3luYwpgYGAKCiMjIENvbW1hbmRzCgpgYGBzcGFjZS1sdWEKY29tbWFuZC5kZWZpbmUgewogIG5hbWUgPSAiR2l0OiBDb21taXQiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIGxvY2FsIG1lc3NhZ2UgPSBlZGl0b3IucHJvbXB0KCJDb21taXQgbWVzc2FnZToiKQogICAgaWYgbm90IG1lc3NhZ2UgdGhlbiByZXR1cm4gZW5kCgogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gZ2l0LmNvbW1pdChtZXNzYWdlLCB0cnVlLCBuaWwpCgogICAgaWYgc3VjY2VzcyA9PSBmYWxzZSB0aGVuCiAgICAgIC0tIOWujOaVtOmUmeivr+S/oeaBr+aYvuekugogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dFcnJvcihyZXN1bHQpCiAgICBlbHNlaWYgc3VjY2VzcyA9PSAibm90aGluZyIgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIk5vdGhpbmcgdG8gY29tbWl0OiB3b3JraW5nIHRyZWUgaXMgY2xlYW4uIiwgIndhcm5pbmciKQogICAgZWxzZQogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIkNvbW1pdCBzdWNjZXNzZnVsIVxuIiAuLiByZXN1bHQsICJ3YXJuaW5nIikKICAgIGVuZAogIGVuZAp9Cgpjb21tYW5kLmRlZmluZSB7CiAgbmFtZSA9ICJHaXQ6IFN5bmMiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RhcnRpbmcgbWFudWFsIEdpdCBzeW5jLi4uIiwgIndhcm5pbmciKQoKICAgIGxvY2FsIHN1Y2Nlc3MsIG1lc3NhZ2UgPSBnaXQuc3luYyh0cnVlLCBmYWxzZSkgLS0gU2hvdyBzdGVwcywgbm90IGNvbGQgc3RhcnQKCiAgICBpZiBzdWNjZXNzID09IHRydWUgdGhlbgogICAgICBpZiBtZXNzYWdlID09ICJPbmx5IHB1c2ggZmFpbGVkIiB0aGVuCiAgICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJNYW51YWw6IEdpdCBwdWxsIGNvbXBsZXRlLiAiIC4uIG1lc3NhZ2UgLi4gIi4iLCAid2FybmluZyIpCiAgICAgIGVsc2UKICAgICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIk1hbnVhbCBHaXQgc3luYyBjb21wbGV0ZSEiLCAid2FybmluZyIpCiAgICAgIGVuZAogICAgZWxzZWlmIHN1Y2Nlc3MgPT0gIm5vdGhpbmciIHRoZW4KICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJOb3RoaW5nIHRvIGNvbW1pdDogd29ya2luZyB0cmVlIGlzIGNsZWFuLiIsICJ3YXJuaW5nIikKICAgIGVsc2UKICAgICAgTm90aWZpY2F0aW9uTWFuYWdlcjpzaG93RXJyb3IobWVzc2FnZSkKICAgIGVuZAogIGVuZAp9Cgpjb21tYW5kLmRlZmluZSB7CiAgbmFtZSA9ICJHaXQ6IEZvcmNlIFB1c2ggSW5pdGlhbCBDb21taXQiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIGlmIG5vdCBlZGl0b3IuY29uZmlybSgiREFOR0VSOiBUaGlzIHdpbGwgV0lQRSB5b3VyIGVudGlyZSBHaXQgaGlzdG9yeSAobG9jYWwgYW5kIHJlbW90ZSkgYW5kIHN0YXJ0IG92ZXIuIEFyZSB5b3UgYWJzb2x1dGVseSBzdXJlPyIpIHRoZW4KICAgICAgcmV0dXJuCiAgICBlbmQKCiAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlN0YXJ0aW5nIGZvcmNlIHB1c2ggcHJvY2Vzcy4uLiIsICJ3YXJuaW5nIikKCiAgICBsb2NhbCBzdWNjZXNzLCBtZXNzYWdlID0gR2l0T3BlcmF0aW9ucy5wZXJmb3JtRm9yY2VQdXNoSW5pdGlhbCgpCgogICAgaWYgc3VjY2VzcyB0aGVuCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihtZXNzYWdlLCAid2FybmluZyIpCiAgICBlbHNlCiAgICAgIE5vdGlmaWNhdGlvbk1hbmFnZXI6c2hvd0Vycm9yKG1lc3NhZ2UpCiAgICBlbmQKICBlbmQKfQoKY29tbWFuZC5kZWZpbmUgewogIG5hbWUgPSAiR2l0OiBGb3JjZSBQdWxsIHRvIE92ZXJ3cml0ZSBMb2NhbCIsCiAgcnVuID0gZnVuY3Rpb24oKQogICAgaWYgbm90IGVkaXRvci5jb25maXJtKCJEQU5HRVI6IFRoaXMgd2lsbCBESVNDQVJEIGFsbCBsb2NhbCBjaGFuZ2VzIGFuZCBjb21taXRzLCBtYWtpbmcgeW91ciBsb2NhbCBjb3B5IGlkZW50aWNhbCB0byB0aGUgcmVtb3RlLiBBcmUgeW91IHN1cmU/IikgdGhlbgogICAgICByZXR1cm4KICAgIGVuZAoKICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbigiU3RhcnRpbmcgZm9yY2UgcHVsbCBwcm9jZXNzLi4uIiwgIndhcm5pbmciKQoKICAgIGxvY2FsIHN1Y2Nlc3MsIG1lc3NhZ2UgPSBHaXRPcGVyYXRpb25zLnBlcmZvcm1Gb3JjZVB1bGwoKQoKICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24obWVzc2FnZSwgIndhcm5pbmciKQogICAgZWxzZQogICAgICBOb3RpZmljYXRpb25NYW5hZ2VyOnNob3dFcnJvcihtZXNzYWdlKQogICAgZW5kCiAgZW5kCn0KYGBgCgojIyBBdXRvLVN5bmMgU3lzdGVtCgpgYGBzcGFjZS1sdWEKLS0gcHJpb3JpdHk6IC0xCgotLSBBdXRvLXN5bmMgbWFuYWdlciAoU0lNUExJRklFRCAtIG5vIGV4cGxpY2l0IGxvY2tpbmcsIGNvcmUgZnVuY3Rpb25zIGhhbmRsZSBpdCkKbG9jYWwgQXV0b1N5bmNNYW5hZ2VyID0gewogIGxhc3RQZXJpb2RpY1N5bmMgPSAwLAogIGNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgPSBmYWxzZSwKICBzdGFydHVwVGltZSA9IG9zLnRpbWUoKSwKICBldmVudFN5bmNTY2hlZHVsZWRBdCA9IDAsCiAgZXZlbnRTeW5jRGVsYXlTZWNvbmRzID0gMTAKfQoKZnVuY3Rpb24gQXV0b1N5bmNNYW5hZ2VyOnNob3VsZFRyaWdnZXJTeW5jKCkKICBsb2NhbCBub3cgPSBvcy50aW1lKCkKICBsb2NhbCB1cHRpbWUgPSBub3cgLSBzZWxmLnN0YXJ0dXBUaW1lCiAgbG9jYWwgcGVyaW9kaWNTeW5jTWludXRlcyA9IGNvbmZpZy5nZXQoImdpdC5hdXRvU3luYyIpCgogIC0tIENvbGQgc3RhcnQgc3luYwogIGlmIHBlcmlvZGljU3luY01pbnV0ZXMgYW5kIG5vdCBzZWxmLmNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgYW5kIHVwdGltZSA+PSA1IGFuZCB1cHRpbWUgPD0gMTAgdGhlbgogICAgcmV0dXJuICJjb2xkLXN0YXJ0IgogIGVuZAoKICAtLSBQZXJpb2RpYyBzeW5jCiAgaWYgcGVyaW9kaWNTeW5jTWludXRlcyBhbmQgc2VsZi5jb2xkU3RhcnRTeW5jVHJpZ2dlcmVkIGFuZCAobm93IC0gc2VsZi5sYXN0UGVyaW9kaWNTeW5jKSAvIDYwID49IHBlcmlvZGljU3luY01pbnV0ZXMgdGhlbgogICAgcmV0dXJuICJwZXJpb2RpYyIKICBlbmQKCiAgLS0gRXZlbnQtZHJpdmVuIHN5bmMKICBpZiBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID4gMCBhbmQgKG5vdyAtIHNlbGYuZXZlbnRTeW5jU2NoZWR1bGVkQXQpID49IHNlbGYuZXZlbnRTeW5jCgo+Pj4gKipVc2VyKio6IOe7p+e7rQoKPj4+ICoqQ29waWxvdCoqOiBgYGBzcGFjZS1sdWEKLS0gcHJpb3JpdHk6IC0xCgotLSBBdXRvLXN5bmMgbWFuYWdlciAoU0lNUExJRklFRCAtIG5vIGV4cGxpY2l0IGxvY2tpbmcsIGNvcmUgZnVuY3Rpb25zIGhhbmRsZSBpdCkKbG9jYWwgQXV0b1N5bmNNYW5hZ2VyID0gewogIGxhc3RQZXJpb2RpY1N5bmMgPSAwLAogIGNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgPSBmYWxzZSwKICBzdGFydHVwVGltZSA9IG9zLnRpbWUoKSwKICBldmVudFN5bmNTY2hlZHVsZWRBdCA9IDAsCiAgZXZlbnRTeW5jRGVsYXlTZWNvbmRzID0gMTAKfQoKZnVuY3Rpb24gQXV0b1N5bmNNYW5hZ2VyOnNob3VsZFRyaWdnZXJTeW5jKCkKICBsb2NhbCBub3cgPSBvcy50aW1lKCkKICBsb2NhbCB1cHRpbWUgPSBub3cgLSBzZWxmLnN0YXJ0dXBUaW1lCiAgbG9jYWwgcGVyaW9kaWNTeW5jTWludXRlcyA9IGNvbmZpZy5nZXQoImdpdC5hdXRvU3luYyIpCgogIC0tIENvbGQgc3RhcnQgc3luYwogIGlmIHBlcmlvZGljU3luY01pbnV0ZXMgYW5kIG5vdCBzZWxmLmNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgYW5kIHVwdGltZSA+PSA1IGFuZCB1cHRpbWUgPD0gMTAgdGhlbgogICAgcmV0dXJuICJjb2xkLXN0YXJ0IgogIGVuZAoKICAtLSBQZXJpb2RpYyBzeW5jCiAgaWYgcGVyaW9kaWNTeW5jTWludXRlcyBhbmQgc2VsZi5jb2xkU3RhcnRTeW5jVHJpZ2dlcmVkIGFuZCAobm93IC0gc2VsZi5sYXN0UGVyaW9kaWNTeW5jKSAvIDYwID49IHBlcmlvZGljU3luY01pbnV0ZXMgdGhlbgogICAgcmV0dXJuICJwZXJpb2RpYyIKICBlbmQKCiAgLS0gRXZlbnQtZHJpdmVuIHN5bmMKICBpZiBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID4gMCBhbmQgKG5vdyAtIHNlbGYuZXZlbnRTeW5jU2NoZWR1bGVkQXQpID49IHNlbGYuZXZlbnRTeW5jRGVsYXlTZWNvbmRzIHRoZW4KICAgIHJldHVybiAiZXZlbnQtZHJpdmVuIgogIGVuZAoKICByZXR1cm4gbmlsCmVuZAoKZnVuY3Rpb24gQXV0b1N5bmNNYW5hZ2VyOnBlcmZvcm1BdXRvU3luYyhzeW5jVHlwZSkKICBwcmludCgiVHJpZ2dlcmluZyAiIC4uIHN5bmNUeXBlOmxvd2VyKCkgLi4gIiBnaXQgc3luYy4uLiIpCiAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKCJUcmlnZ2VyaW5nICIgLi4gc3luY1R5cGUgLi4gIiBHaXQgc3luYy4uLiIsICJ3YXJuaW5nIikKCiAgbG9jYWwgaXNDb2xkU3RhcnQgPSAoc3luY1R5cGUgPT0gIlN0YXJ0dXAiKQogIGxvY2FsIHN5bmNPaywgc3luY01lc3NhZ2UgPSBnaXQuc3luYyh0cnVlLCBpc0NvbGRTdGFydCkgLS0gQWx3YXlzIHNob3cgc3RlcHMgKHRydWUpCgogIGlmIHN5bmNPayA9PSB0cnVlIHRoZW4KICAgIGlmIHN5bmNNZXNzYWdlID09ICJPbmx5IHB1c2ggZmFpbGVkIiB0aGVuCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jVHlwZSAuLiAiOiBHaXQgcHVsbCBjb21wbGV0ZS4gIiAuLiBzeW5jTWVzc2FnZSAuLiAiLiIsICJ3YXJuaW5nIikKICAgIGVsc2UKICAgICAgZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uKHN5bmNUeXBlIC4uICI6IEdpdCBzeW5jIGNvbXBsZXRlLiIsICJ3YXJuaW5nIikKICAgIGVuZAogICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKQogIGVsc2VpZiBzeW5jT2sgPT0gIm5vdGhpbmciIHRoZW4KICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jTWVzc2FnZSwgIndhcm5pbmciKQogICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jOiBub3RoaW5nIHRvIGNvbW1pdCIpCiAgZWxzZWlmIHN5bmNPayA9PSBmYWxzZSB0aGVuCiAgICBpZiBzeW5jTWVzc2FnZSA9PSBOb3RpZmljYXRpb25NYW5hZ2VyLm1lc3NhZ2VzLkdJVF9PUEVSQVRJT05fSU5fUFJPR1JFU1MgdGhlbgogICAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oc3luY01lc3NhZ2UsICJ3YXJuaW5nIikKICAgICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jIHdhcm5pbmc6ICIgLi4gc3luY01lc3NhZ2UpCiAgICBlbHNlCiAgICAgIGVkaXRvci5mbGFzaE5vdGlmaWNhdGlvbihzeW5jTWVzc2FnZSwgImVycm9yIikKICAgICAgcHJpbnQoc3luY1R5cGUgLi4gIiBzeW5jIGZhaWxlZDpcbiIgLi4gc3luY01lc3NhZ2UpCiAgICBlbmQKICBlbHNlCiAgICBlZGl0b3IuZmxhc2hOb3RpZmljYXRpb24oIlVua25vd24gZ2l0IHN5bmMgcmVzdWx0IiwgImVycm9yIikKICAgIHByaW50KHN5bmNUeXBlIC4uICIgc3luYyB1bmtub3duIHJlc3VsdDoiLCBzeW5jT2ssIHN5bmNNZXNzYWdlKQogIGVuZAplbmQKCmZ1bmN0aW9uIEF1dG9TeW5jTWFuYWdlcjp1cGRhdGVTeW5jU3RhdGUoc3luY1R5cGUpCiAgbG9jYWwgbm93ID0gb3MudGltZSgpCgogIGlmIHN5bmNUeXBlID09ICJjb2xkLXN0YXJ0IiB0aGVuCiAgICBzZWxmLmNvbGRTdGFydFN5bmNUcmlnZ2VyZWQgPSB0cnVlCiAgICBzZWxmLmxhc3RQZXJpb2RpY1N5bmMgPSBub3cKICAgIHNlbGYuZXZlbnRTeW5jU2NoZWR1bGVkQXQgPSAwCiAgZWxzZWlmIHN5bmNUeXBlID09ICJwZXJpb2RpYyIgdGhlbgogICAgc2VsZi5sYXN0UGVyaW9kaWNTeW5jID0gbm93CiAgICBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID0gMAogIGVsc2UgLS0gZXZlbnQtZHJpdmVuCiAgICBzZWxmLmV2ZW50U3luY1NjaGVkdWxlZEF0ID0gMAogICAgc2VsZi5sYXN0UGVyaW9kaWNTeW5jID0gbm93CiAgZW5kCmVuZAoKLS0gSW5pdGlhbGl6ZSBhdXRvLXN5bmMgY29uZmlndXJhdGlvbgpsb2NhbCBwZXJpb2RpY1N5bmNNaW51dGVzID0gY29uZmlnLmdldCgiZ2l0LmF1dG9TeW5jIikKaWYgcGVyaW9kaWNTeW5jTWludXRlcyB0aGVuCiAgcHJpbnQoIkVuYWJsaW5nIHBlcmlvZGljIGdpdCBhdXRvIHN5bmMgZXZlcnkgIiAuLiBwZXJpb2RpY1N5bmNNaW51dGVzIC4uICIgbWludXRlcyIpCmVuZAoKLS0gRklYRUQgRVZFTlQgTElTVEVORVJTIChyZW1vdmUgdW5uZWNlc3NhcnkgbG9jayBjaGVja3MpCmV2ZW50Lmxpc3RlbiB7CiAgbmFtZSA9ICJwYWdlOnNhdmVkIiwKICBydW4gPSBmdW5jdGlvbihldmVudCkKICAgIC0tIOKchSDnp7vpmaTplIHmo4Dmn6XvvIzorqnmoLjlv4Plh73mlbDlpITnkIbkupLmlqUKICAgIHByaW50KCJQYWdlICciIC4uIGV2ZW50Lm5hbWUgLi4gIicgc2F2ZWQuIFNjaGVkdWxpbmcgZ2l0IHN5bmMgaW4gIiAuLiBBdXRvU3luY01hbmFnZXIuZXZlbnRTeW5jRGVsYXlTZWNvbmRzLzYwIC4uICIgbWludXRlcy4iKQogICAgQXV0b1N5bmNNYW5hZ2VyLmV2ZW50U3luY1NjaGVkdWxlZEF0ID0gb3MudGltZSgpCiAgZW5kCn0KcHJpbnQoIkV2ZW50LWRyaXZlbiBnaXQgc3luYyBlbmFibGVkIChvbiBwYWdlIHNhdmUpLiIpCgpldmVudC5saXN0ZW4gewogIG5hbWUgPSAiY3JvbjpzZWNvbmRQYXNzZWQiLAogIHJ1biA9IGZ1bmN0aW9uKCkKICAgIC0tIOKchSDnroDljJbpgLvovpHvvIzorqnmoLjlv4Plh73mlbDlpITnkIbplIEKICAgIGxvY2FsIHN5bmNUeXBlID0gQXV0b1N5bmNNYW5hZ2VyOnNob3VsZFRyaWdnZXJTeW5jKCkKCiAgICBpZiBzeW5jVHlwZSB0aGVuCiAgICAgIHByaW50KCI9PT0gIiAuLiBzeW5jVHlwZSAuLiAiIHN5bmMgdHJpZ2dlciBkZXRlY3RlZCA9PT0iKSAtLSDmt7vliqDosIPor5Xkv6Hmga8KCiAgICAgIC0tIFVwZGF0ZSBzeW5jIHN0YXRlCiAgICAgIEF1dG9TeW5jTWFuYWdlcjp1cGRhdGVTeW5jU3RhdGUoc3luY1R5cGUpCgogICAgICAtLSBFeGVjdXRlIHN5bmMgKGxvY2tpbmcgaGFuZGxlZCBpbnRlcm5hbGx5IGJ5IGdpdC5zeW5jKQogICAgICBpZiBzeW5jVHlwZSA9PSAiY29sZC1zdGFydCIgdGhlbgogICAgICAgIHByaW50KCI9PT0gQ29sZCBTdGFydCBTeW5jIFRyaWdnZXJlZCA9PT0iKQogICAgICAgIHByaW50KCJVcHRpbWU6Iiwgb3MudGltZSgpIC0gQXV0b1N5bmNNYW5hZ2VyLnN0YXJ0dXBUaW1lLCAic2Vjb25kcyIpCiAgICAgICAgQXV0b1N5bmNNYW5hZ2VyOnBlcmZvcm1BdXRvU3luYygiU3RhcnR1cCIpCiAgICAgIGVsc2VpZiBzeW5jVHlwZSA9PSAicGVyaW9kaWMiIHRoZW4KICAgICAgICBBdXRvU3luY01hbmFnZXI6cGVyZm9ybUF1dG9TeW5jKCJQZXJpb2RpYyIpCiAgICAgIGVsc2UgLS0gZXZlbnQtZHJpdmVuCiAgICAgICAgQXV0b1N5bmNNYW5hZ2VyOnBlcmZvcm1BdXRvU3luYygiRXZlbnQtZHJpdmVuIikKICAgICAgZW5kCiAgICBlbmQKICBlbmQKfQpgYGAAAAAAAAAAAH9zAAAAAAAAAAAAAAAAAAAAAAAASXQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAABp3AAAAAAAAAAAAAAAA8L8"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
		[
			[
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					""
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Traditional Builder"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Traditional Builder with PdfLaTeX"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Traditional Builder with XeLaTeX"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Traditional Builder with LuaLaTeX"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Basic Builder"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Basic Builder with PdfLaTeX"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Basic Builder with XeLaTeX"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Basic Builder with LuaLaTeX"
				],
				[
					"Packages/LaTeXTools/Compile to PDF.sublime-build",
					"Script Builder"
				]
			],
			[
				"Packages/LaTeXTools/Compile to PDF.sublime-build",
				"Basic Builder with PdfLaTeX"
			]
		],
		[
			[
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					""
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Traditional"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"PdfLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"XeLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"LuaLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder - PdfLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder - XeLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder - LuaLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Script Builder"
				]
			],
			[
				"Packages/LaTeXTools/LaTeX.sublime-build",
				"Traditional"
			]
		],
		[
			[
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					""
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Traditional Builder"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Traditional Builder with PdfLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Traditional Builder with XeLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Traditional Builder with LuaLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder with PdfLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder with XeLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Basic Builder with LuaLaTeX"
				],
				[
					"Packages/LaTeXTools/LaTeX.sublime-build",
					"Script Builder"
				]
			],
			[
				"Packages/LaTeXTools/LaTeX.sublime-build",
				"Traditional Builder with XeLaTeX"
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"chang",
				"Pieces: Change LLM"
			],
			[
				"change l",
				"Pieces: Change LLM"
			],
			[
				"chan",
				"Pieces: Change LLM"
			],
			[
				"packag ins",
				"Package Control: Install Package"
			],
			[
				"prefer",
				"Preferences: Settings"
			],
			[
				"compile",
				"Build With: Compile to PDF - Traditional Builder with XeLaTeX"
			],
			[
				"packa con upd",
				"Package Control: Upgrade All Packages"
			],
			[
				"iew Package Fil",
				"View Package File"
			],
			[
				"quick",
				"QuickLineNavigator: Clear All Keyword Highlights"
			],
			[
				"quick temp",
				"QuickLineNavigator: Toggle Extension Filters (Temporary)"
			],
			[
				"quick filter",
				"QuickLineNavigator: Toggle Extension Filters (Temporary)"
			],
			[
				"quick  temp",
				"QuickLineNavigator: Toggle Extension Filters (Temporary)"
			],
			[
				"quick clea",
				"QuickLineNavigator: Clear All Keyword Highlights"
			],
			[
				"list packa",
				"Package Control: List Packages"
			],
			[
				"QUICK folder",
				"QuickLineNavigator: Search in Folder"
			],
			[
				"QUICK open",
				"QuickLineNavigator: Search in Open Files"
			],
			[
				"pac control ",
				"Package Control: Install Package"
			],
			[
				"pices chang",
				"Pieces: Change LLM"
			],
			[
				"pieces change",
				"Pieces: Change LLM"
			],
			[
				"packa con",
				"Package Control: Install Package"
			],
			[
				"latex build ",
				"Build With: LaTeX - Traditional Builder with XeLaTeX"
			],
			[
				"satis",
				"Package Control: Satisfy Packages"
			],
			[
				"install packa",
				"Package Control: Install Package"
			],
			[
				"package remo",
				"Package Control: Remove Package"
			],
			[
				"list pa",
				"Package Control: List Packages"
			],
			[
				"latex bui",
				"Build With: LaTeX - Basic Builder - XeLaTeX"
			],
			[
				"packa sa",
				"Package Control: Satisfy Packages"
			],
			[
				"packa list",
				"Package Control: List Packages"
			],
			[
				"build latex",
				"Build With: LaTeX - Basic Builder - XeLaTeX"
			],
			[
				"build",
				"Build With: LaTeX - Basic Builder - XeLaTeX"
			],
			[
				"latex",
				"Build With: LaTeX - Basic Builder - XeLaTeX"
			],
			[
				"list pack",
				"Package Control: List Packages"
			],
			[
				"packa satis",
				"Package Control: Satisfy Packages"
			],
			[
				"packa lis",
				"Package Control: List Packages"
			],
			[
				"build ",
				"Build With: LaTeX - Basic Builder - XeLaTeX"
			],
			[
				"Package Control: list",
				"Package Control: List Packages"
			],
			[
				"Package Control: ",
				"Package Control: Clear Cache Directory"
			],
			[
				"pacage sati",
				"Package Control: Satisfy Libraries"
			],
			[
				"pacage ins",
				"Package Control: Install Package"
			],
			[
				"pac",
				"Package Control: Satisfy Libraries"
			],
			[
				"package ",
				"Package Control: Satisfy Packages"
			],
			[
				"packa sat",
				"Package Control: List Packages"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"latex build",
				"Build With: LaTeX - Basic Builder - XeLaTeX"
			],
			[
				"package inst",
				"Package Control: Install Package"
			],
			[
				"package satis",
				"Package Control: Satisfy Libraries"
			],
			[
				"package upda",
				"Package Control: Upgrade All Packages"
			],
			[
				"package ins",
				"Package Control: Install Package"
			],
			[
				"package sa",
				"Package Control: Satisfy Packages"
			],
			[
				"Package Control: Satisfy Libraries",
				"Package Control: Satisfy Libraries"
			],
			[
				"view",
				"View: Toggle Menu"
			],
			[
				"packa control list",
				"Package Control: List Packages"
			],
			[
				"packa contro lis",
				"Package Control: List Packages"
			],
			[
				"build with ",
				"Build With: LaTeX - Traditional Builder"
			],
			[
				"latextool",
				"Preferences: LaTeXTools Mouse Bindings"
			],
			[
				"Package Control: INS",
				"Package Control: Install Package"
			],
			[
				"Package Control: INST",
				"Package Control: Install Package"
			],
			[
				"Package Control: INSTALL",
				"Package Control: Install Package"
			],
			[
				"Package Control: in",
				"Package Control: Install Package"
			],
			[
				"paca instal",
				"Package Control: Install Package"
			],
			[
				"Package Control: inst",
				"Package Control: Install Package"
			],
			[
				"Package Control: install",
				"Package Control: Install Package"
			],
			[
				"pieces",
				"Pieces: Open Pieces Settings"
			],
			[
				"Package Control: up",
				"Package Control: Upgrade Package"
			],
			[
				"packa",
				"Preferences: Browse Packages"
			],
			[
				"Package",
				"Preferences: Browse Packages"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 277.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/F/Note_book/SilverBullet/1.local_server/SB_space",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/ENHANCE",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/Library"
	],
	"file_history":
	[
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 以 md 分段 2.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 3 大面积引入 warning 样式.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 以 md 分段.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 2 大面积引入 warning 样式.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 3 大面积引入 warning 样式 - 副本.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 3.1 修复最后 2 个 git config 不正确运行的问题.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 大面积引入 warning 样式.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 3 修复最后 2 个 git config 不正确运行的问题.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 多一些 git configure 的调试信息 - 副本.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 从下述回退：尝试修复 强制push 的第 3 步后，没有正确初始化.git 配置 - 副本.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 从下述回退：尝试修复 强制push 的第 3 步后，没有正确初始化.git 配置.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 修复 非 commit 的所有 3 步 sync 的第 1 步 commit - 副本.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 修复 非 commit 的所有 3 步 sync 的第 1 步 commit.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - fix pull only messages bug.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 取消 分多段 space-lua 块.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 取消每个git小函数前，都检查 .git 配置，只强制 push 的第 3 步检查.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 强制push 的第三步，和每个git小函数前，都检查 .git 配置.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 3 取消每个git小函数前，都检查 .git 配置，只强制 push 的第 3 步检查 - 副本.md",
		"/F/Note_book/SilverBullet/2.ETP-read_only(remote_1)/init.sh",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 取消每个git小函数前，都检查 .git 配置，只强制 push 的第 3 步检查 - 副本.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 修复 No remote URL found. 的问题.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git.md",
		"/F/Note_book/SilverBullet/2.ETP-read_only(remote_1)/fly.toml",
		"/F/Note_book/SilverBullet/3.xczphysics(remote_2)/init.sh",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 尝试 fix commit 报 nil 1.md",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/Library/Git.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 尝试 fix commit 报 nil 3.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 尝试 fix commit 报 nil 2.md",
		"/F/Note_book/SilverBullet/2.ETP-read_only(remote_1)/Dockerfile",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - 尝试 fix commit 报 nil 4.md",
		"/F/Note_book/SilverBullet/备份/Git.md/Git - fix pull only messages bug - 副本.md",
		"/D/C2D/Desktop/Git.md 备份/Git.md",
		"/D/C2D/Desktop/Git.md 备份/Git - b.md",
		"/D/C2D/Desktop/Git.md 备份/Git - 2.md",
		"/D/C2D/Desktop/Git.md 备份/Git - a.md",
		"/D/C2D/Desktop/Git.md 备份/Git - 副本.md",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/.gitignore",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/SB_space.sublime-workspace",
		"/E/Text_editor/SublimeText/Data/Packages/User/Preferences.sublime-settings",
		"/E/Text_editor/SublimeText/Data/Packages/Default/Preferences.sublime-settings",
		"/D/C2D/Desktop/article/LFCO/LFCO_iop/LFCO_iop.tex",
		"/D/C2D/Desktop/article/LFCO/LFCO_iop/iopjournal-template.tex",
		"/E/Text_editor/SublimeText/Data/Packages/新建文件夹/aura-theme.tmTheme",
		"/E/Text_editor/SublimeText/Data/Packages/新建文件夹/aura-theme-soft.tmTheme",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/chapters/chapter3.tex",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/chapters/chapter4.tex",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/chapters/chapter2.tex",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/njuthesis-sample.tex",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/njuthesis-setup.def",
		"/F/Note_book/SilverBullet/3.xczphysics(remote_2)/fly.toml",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/LICENSE",
		"/F/Note_book/SilverBullet/3.xczphysics(remote_2)/Dockerfile",
		"/D/C2D/Desktop/stem.zh.tex",
		"/F/Note_book/SilverBullet/2.5.我的配置历史/4/fly.toml",
		"/F/Note_book/SilverBullet/2.5.我的配置历史/1.configurefile/fly.toml",
		"/F/Note_book/SilverBullet/2.5.我的配置历史/2.configurefiles/fly.toml",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/_plug/treeview.plug.js",
		"/F/Note_book/SilverBullet/1.local_server/SB_space/_plug/git.plug.js",
		"/C/Windows/SystemApps/MicrosoftWindows.Client.Core_cw5n1h2txyewy/LiveCaptions/LiveCaptions.manifest",
		"/C/Windows/WinSxS/amd64_userexperience-sxs_31bf3856ad364e35_10.0.26100.4946_none_419dc00e72a8bc8a/57074914.Livtop/LiveCaptions/LiveCaptions.manifest",
		"/F/Note_book/SilverBullet/3.ETP/fly.toml",
		"/F/Note_book/SilverBullet/2.remote_server/fly.toml",
		"/F/Note_book/SilverBullet/2.remote_server/Dockerfile",
		"/F/Note_book/SilverBullet/2.remote_server/data/config.json",
		"/F/Note_book/SilverBullet/ETP/fly.toml",
		"/F/Note_book/SilverBullet/remote_server/fly.toml",
		"/F/Note_book/SilverBullet/remote_server/Dockerfile",
		"/F/Note_book/SilverBullet/remote_server/data/config.json",
		"/F/Note_book/SilverBullet/remote_server/config.json",
		"/F/Note_book/SilverBullet/Dockerfile",
		"/F/Note_book/SilverBullet/configure.json",
		"/F/Note_book/SilverBullet/fly.toml",
		"/e/Runtime/texlive/2024/texmf-dist/tex/latex/mathtools/mathtools.sty",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/chapters/chapter0.tex",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/tmp/fonts_installed",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/.vscode/settings.json",
		"/E/Text_editor/SublimeText/Data/Packages/User/QuickLineNavigator.sublime-settings",
		"/D/C2D/Desktop/Code/Python/projects/QuickLineNavigator/manual_version_control/quick_line_navigator - 3.33 关键词 可保存情况下，尝试修复 switch 搜索命令的 bug.py",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/TeXstudio_Compile_Settings.txsprofile",
		"/D/C2D/Desktop/Code/Python/projects/QuickLineNavigator/QuickLineNavigator.sublime-settings",
		"/D/C2D/Desktop/Code/Python/projects/QuickLineNavigator/quick_line_navigator.py",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/tmp/chapters/chapter4.aux",
		"/D/C2D/Desktop/Code/Python/projects/package_control_channel/repository/q.json",
		"/E/Text_editor/SublimeText/Data/Packages/QuickLineNavigator/QuickLineNavigator.sublime-settings",
		"/C/Users/Xcz/AppData/Roaming/Mesh Intelligent Technologies, Inc/Pieces OS/shared_preferences.json",
		"/D/C2D/Desktop/Code/Python/projects/package_control_channel/repository.json",
		"/E/Text_editor/SublimeText/Data/Packages/User/rg_fzf_search.sublime-settings",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/hlp.sublime-snippet",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/doc.sublime-project",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/subequations.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/align.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/beq.sublime-snippet",
		"/F/Audio/LiveCaptionsTranslator/setting.json",
		"/F/Audio/LunaTranslator_x64_win10/translation_record/0_copy.json",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/bb.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/PineGreen.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/Plum.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/NavyBlue.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/Maroon.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/gray.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/plum.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/pl.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/pl - 副本.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/gr - 副本.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/gr.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/br.sublime-snippet",
		"/E/Text_editor/SublimeText/Data/Packages/Usersnippets/b.sublime-snippet",
		"/C/Users/Xcz/.wakatime.cfg",
		"/D/CtoD/Default/桌面/直播/my-youtube-api-project-468104-3ce4bf9fb8af.json",
		"/D/CtoD/Default/桌面/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/chapters/chapter4.tex",
		"/D/CtoD/Default/下载/未命名_2.json",
		"/D/CtoD/Default/桌面/Copy_History/log/20250806_copy_History.txt",
		"/E/Application/Noter/siyuan_data1/data/plugins/wakatime/plugin.json",
		"/E/Application/Text_Editor/SublimeText/Data/Packages/User/WakaTime.sublime-settings",
		"/E/Application/Text_Editor/SublimeText/Data/Packages/User/LaTeXTools.sublime-settings",
		"/E/Application/Text_Editor/SublimeText/Data/Packages/LaTeXTools/dependencies.json",
		"/E/Application/Text_Editor/SublimeText/Data/Packages/User/Default (Windows).sublime-keymap",
		"/D/CtoD/Default/下载/必看_安装配置步骤.txt",
		"/C/Windows/WinSxS/amd64_userexperience-core_31bf3856ad364e35_10.0.26100.4768_none_53d315517add2b01/Core/LiveCaptions/LiveCaptions.manifest",
		"/C/Windows/WinSxS/amd64_userexperience-sxs_31bf3856ad364e35_10.0.26100.4652_none_41bf8b3c728f1b8a/57074914.Livtop/LiveCaptions/LiveCaptions.manifest",
		"/C/Windows/SystemApps/SxS/MicrosoftWindows.57074914.Livtop_cw5n1h2txyewy/LiveCaptions/LiveCaptions.manifest",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/doc.sublime-workspace",
		"/E/Text_editor/SublimeText/Data/Packages/User/Side Bar.sublime-settings",
		"/E/Text_editor/SublimeText/Data/Packages/LaTeXTools/Default (Windows).sublime-keymap",
		"/E/Text_editor/SublimeText/Data/Cache/LaTeXTools/internal/preview_math/98c9d979a2e543f1398f3d1f4339bc60.png.err",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/chapters/chapter1.tex",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/chapters/chapter5.tex",
		"/D/C2D/Desktop/Code/Latex/TexStudio/0.njuthesis/NJU_thesis_doctor__xcz/docs/latex.sublime-workspace"
	],
	"find":
	{
		"height": 40.0
	},
	"find_in_files":
	{
		"height": 0.0,
		"where_history":
		[
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"Auto-sync manager (SIMPLIFIED - no explicit locking, core functions handle it)",
			"configuration",
			"Auto-sync manager",
			"继续",
			"executeCommand",
			"n GitConfigValidator:setConfigValue(key, value, scope)",
			"tConfigValidator:validateAndSetup",
			"tConfigValidator:validateAndSetup(afterDeletion)",
			"GitConfigValidator:validateAndSetu",
			"tConfigValidator:validateAndSetu",
			"initializeRepository",
			"local maxRetries = 10",
			"GitConfigValidator:validateAndSetu",
			"os.execute(\"sleep 0.5\") -- Unix/Linux",
			"on GitOperations.performForcePushInitial()",
			"onfigValidator:validateAnd",
			"onfigValidator:validateAndSe",
			"initializeRepository",
			"getOriginUrlFromInitScript",
			"itConfigValidator:validateAndSet",
			"(\"%s",
			"GitConfigValidator",
			"GitOperations",
			"```",
			"executeGitCommand",
			"\"push.autoSetupRemote\" = ",
			"\"push.autoSetupRemote\" = \"true\"",
			"local",
			"AutoSyncManager",
			"function commitChanges",
			"function addFiles",
			"executeGitCommand",
			"local",
			"local function",
			"executeGitCommand",
			"getErrorMessage",
			"GitOperations",
			"GitConfigValidator",
			"AutoSyncManager:performAutoSync(",
			"o-sync manager (SIMPLIFIED - no explicit locking, core functions handle it)",
			"至完整",
			"至完整 ",
			"uto-sync manager (SIMPLIFIED - no explicit locking, core functions handle it)",
			"AutoSyncManager:performAutoSync(syncType)",
			"itOperations.getRemoteUrl()",
			"GitOperations.getRemoteUrl",
			"Operations.getRemoteUr",
			"client.js:341 Error running command Attempting to call nil as a function\n（匿名）\t@\tclient.js:341",
			"git force push 时",
			"Step 1: commit (make sure to show \"Step 1/3",
			"unction GitOperations.forcePull()",
			"git.forcePush = GitOperations.forcePush",
			"\"Git: Sync\"",
			"name=\"Git: Sync\"",
			"force pu"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "Library/Git.md",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 29769,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								29769
							]
						],
						"settings":
						{
							"syntax": "Packages/Markdown/Markdown.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 15908.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 40.0
	},
	"input":
	{
		"height": 204.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.Pieces Auth":
	{
		"height": 0.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"output.latextools":
	{
		"height": 237.0
	},
	"output.mdpopups":
	{
		"height": 0.0
	},
	"output.mdpopups-dummy":
	{
		"height": 0.0
	},
	"pinned_build_system": "",
	"project": "SB_space.sublime-project",
	"replace":
	{
		"height": 76.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"D:\\C2D\\Desktop\\Code\\Latex\\TexStudio\\0.njuthesis\\NJU_thesis_doctor__xcz\\docs\\doc.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 323.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 1344.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 267.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
